import{k as H,J as N,r as V,d as _,l as F,F as J,v as n,q as r,z as t,y as h,x as p,O as g,P as x,s as z,u as S,N as v,A as a,K as f}from"./vue-Eb8ZdQV1.js";import{u as P}from"./activity-BYFEx7WV.js";import{u as q,t as w,_ as E}from"./index-BQQdwWu-.js";import"./state-WzMdx_T8.js";const K={class:"my-hiking-page"},L={class:"sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm"},O={class:"flex gap-0 border-b border-gray-200"},R={key:0,class:"absolute bottom-0 left-0 right-0 h-1 bg-teal-500 rounded-t-sm"},U={key:0,class:"absolute bottom-0 left-0 right-0 h-1 bg-teal-500 rounded-t-sm"},G={class:"px-4 py-4 pb-20"},Q={key:0},W={key:0,class:"space-y-4"},X=["onClick"],Y={class:"relative overflow-hidden h-56"},Z=["src","alt"],tt={class:"absolute top-4 left-4"},et={class:"p-4"},st={class:"font-bold text-lg text-gray-800 mb-3"},ot={class:"space-y-2 mb-4 text-sm text-gray-600"},nt={class:"flex items-center gap-2"},rt={class:"flex items-center gap-2"},lt={key:0,class:"flex items-center gap-2 py-3 border-t border-gray-100"},at={class:"flex -space-x-2"},it=["src","alt","title"],dt={key:0,class:"w-8 h-8 rounded-full border-2 border-white bg-teal-100 flex items-center justify-center text-xs font-semibold text-teal-600"},ct={class:"text-sm text-gray-600 ml-2"},ut={key:1,class:"text-center py-16"},pt={key:1},gt={key:0,class:"space-y-4"},xt=["onClick"],mt=["src","alt"],ht={class:"absolute top-4 right-4"},ft={class:"absolute top-4 left-4"},bt={class:"inline-block text-xs font-bold px-3 py-1 rounded-full bg-yellow-500 text-white"},_t={class:"p-4"},vt=["onClick"],wt={class:"space-y-2 mb-4 text-sm text-gray-600"},kt={class:"flex items-center gap-2"},yt={class:"flex items-center gap-2"},Ct={key:0,class:"mb-4 p-3 bg-teal-50 rounded-xl border border-teal-200"},$t={class:"flex items-center justify-between gap-2"},jt={class:"flex items-center gap-2 flex-1 min-w-0"},zt={class:"flex -space-x-2 flex-shrink-0"},St=["src","alt","title"],At={class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},Mt={class:"text-teal-600"},Dt=["onClick"],Bt={key:1,class:"mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200"},It={class:"flex items-center justify-between gap-2"},Tt={class:"flex items-center gap-2 flex-1 min-w-0"},Ht={class:"flex -space-x-2 flex-shrink-0"},Nt=["src","alt","title"],Vt={class:"text-sm font-semibold text-gray-700"},Ft=["onClick"],Jt={class:"flex gap-2 pt-3 border-t border-gray-100"},Pt=["onClick"],qt=["onClick"],Et={key:1,class:"text-center py-16"},Kt=H({__name:"MyHiking",setup(Lt){const m=N(),d=P(),A=q(),i=V("joined");_(()=>d.loading);const M=o=>{const e=new Date,c=new Date(o.start_time),s=o.end_time?new Date(o.end_time):null;return o.status==="cancelled"?"å·²å–æ¶ˆ":o.status==="completed"||s&&e>s?"å·²å®Œæˆ":e>=c&&(!s||e<=s)?"è¿›è¡Œä¸­":e<c?"å¾…å‚åŠ ":o.status==="recruiting"?"æ‹›å‹Ÿä¸­":"å·²å®Œæˆ"},k=o=>({id:parseInt(o.activity_id),title:o.title,location:o.location,startTime:o.start_time,coverImage:o.cover_image||"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&h=400&fit=crop",status:M(o),difficulty:o.difficulty_level||"2.0",participantCount:o.participant_count||0,participants:[],applicants:[]}),y=_(()=>d.activities.filter(o=>o.is_joined).map(k)),C=_(()=>d.activities.filter(o=>o.creator_id===A.userId).map(k));F(async()=>{await $()});const $=async()=>{try{await Promise.all([d.fetchMyJoinedActivities({page:1,page_size:20}),d.fetchMyCreatedActivities({page:1,page_size:20})]),console.log("æ´»åŠ¨åˆ—è¡¨åŠ è½½æˆåŠŸ")}catch(o){console.error("åŠ è½½æ´»åŠ¨åˆ—è¡¨å¤±è´¥:",o)}},j=o=>{if(!o)return"";try{const e=new Date(o),c=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),u=String(e.getMinutes()).padStart(2,"0");return`${c}-${s} ${l}:${u}`}catch{return o}},b=o=>{m.push(`/activity/${o}`)},D=o=>{console.log("æŸ¥çœ‹ç”³è¯·è€…åˆ—è¡¨:",o),m.push(`/activity/${o}/applicants`)},B=o=>{m.push(`/activity/${o}`)},I=o=>{m.push(`/create-activity?id=${o}`)},T=async o=>{if(confirm("ç¡®å®šå–æ¶ˆè¯¥æ´»åŠ¨å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"))try{await d.deleteActivity(o.toString())?(w.success("æ´»åŠ¨å·²å–æ¶ˆ"),await $()):w.error("å–æ¶ˆæ´»åŠ¨å¤±è´¥: "+d.error)}catch(e){console.error("å–æ¶ˆæ´»åŠ¨å¤±è´¥:",e),w.error("å–æ¶ˆæ´»åŠ¨å¤±è´¥")}};return(o,e)=>{const c=J("router-link");return r(),n("div",K,[t("div",L,[e[4]||(e[4]=t("div",{class:"px-4 py-4"},[t("h1",{class:"text-2xl font-bold text-gray-800 text-center"},"å¾’æ­¥è®°å½•")],-1)),t("div",O,[t("button",{onClick:e[0]||(e[0]=s=>i.value="joined"),class:h(["flex-1 py-3 px-4 font-medium text-center transition-all relative",i.value==="joined"?"text-teal-600":"text-gray-600 hover:text-gray-800"])},[e[2]||(e[2]=t("span",null,"æˆ‘åŠ å…¥çš„",-1)),i.value==="joined"?(r(),n("div",R)):p("",!0)],2),t("button",{onClick:e[1]||(e[1]=s=>i.value="created"),class:h(["flex-1 py-3 px-4 font-medium text-center transition-all relative",i.value==="created"?"text-teal-600":"text-gray-600 hover:text-gray-800"])},[e[3]||(e[3]=t("span",null,"æˆ‘å‘å¸ƒçš„",-1)),i.value==="created"?(r(),n("div",U)):p("",!0)],2)])]),t("div",G,[i.value==="joined"?(r(),n("div",Q,[y.value.length>0?(r(),n("div",W,[(r(!0),n(g,null,x(y.value,s=>(r(),n("div",{key:s.id,onClick:l=>b(s.id),class:"activity-card-joined bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:-translate-y-1"},[t("div",Y,[t("img",{src:s.coverImage,alt:s.title,class:"w-full h-full object-cover"},null,8,Z),t("div",tt,[t("span",{class:h(["inline-block text-xs font-bold px-3 py-1 rounded-full text-white",s.status==="å¾…å‚åŠ "?"bg-teal-500":s.status==="è¿›è¡Œä¸­"?"bg-orange-500":s.status==="å·²å®Œæˆ"?"bg-green-500":"bg-gray-500"])},a(s.status),3)]),e[5]||(e[5]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"},null,-1))]),t("div",et,[t("h3",st,a(s.title),1),t("div",ot,[t("div",nt,[e[6]||(e[6]=t("svg",{class:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})],-1)),t("span",null,a(j(s.startTime)),1)]),t("div",rt,[e[7]||(e[7]=t("svg",{class:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),t("span",null,a(s.location),1)])]),s.participants&&s.participants.length>0?(r(),n("div",lt,[t("div",at,[(r(!0),n(g,null,x((s.participants||[]).slice(0,5),(l,u)=>(r(),n("img",{key:u,src:l.avatar,alt:l.name,title:l.name,class:"w-8 h-8 rounded-full border-2 border-white object-cover hover:z-10 transition-transform hover:scale-110"},null,8,it))),128)),(s.participants||[]).length>5?(r(),n("div",dt," +"+a((s.participants||[]).length-5),1)):p("",!0)]),t("span",ct,a(s.participants.length)+"äººå‚åŠ  ",1)])):p("",!0)])],8,X))),128))])):(r(),n("div",ut,[e[9]||(e[9]=t("div",{class:"text-5xl mb-3 opacity-50"},"ğŸ¥¾",-1)),e[10]||(e[10]=t("p",{class:"text-gray-600 text-lg mb-4"},"è¿˜æ²¡æœ‰åŠ å…¥ä»»ä½•å¾’æ­¥æ´»åŠ¨",-1)),z(c,{to:"/discover",class:"inline-block px-6 py-2.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-semibold text-sm"},{default:S(()=>[...e[8]||(e[8]=[v(" å»å‘ç°æ´»åŠ¨ ",-1)])]),_:1})]))])):p("",!0),i.value==="created"?(r(),n("div",pt,[C.value.length>0?(r(),n("div",gt,[(r(!0),n(g,null,x(C.value,s=>(r(),n("div",{key:s.id,class:"activity-card-created bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 group"},[t("div",{class:"relative overflow-hidden h-56 cursor-pointer",onClick:l=>b(s.id)},[t("img",{src:s.coverImage,alt:s.title,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,mt),t("div",ht,[t("span",{class:h(["inline-block text-xs font-bold px-3 py-1 rounded-full text-white",s.status==="æ‹›å‹Ÿä¸­"?"bg-teal-500":s.status==="è¿›è¡Œä¸­"?"bg-orange-500":"bg-gray-500"])},a(s.status),3)]),t("div",ft,[t("span",bt," éš¾åº¦ "+a(s.difficulty||"3.0"),1)]),e[11]||(e[11]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"},null,-1))],8,xt),t("div",_t,[t("h3",{class:"font-bold text-lg text-gray-800 mb-3 cursor-pointer hover:text-teal-600 transition",onClick:l=>b(s.id)},a(s.title),9,vt),t("div",wt,[t("div",kt,[e[12]||(e[12]=t("svg",{class:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})],-1)),t("span",null,a(j(s.startTime)),1)]),t("div",yt,[e[13]||(e[13]=t("svg",{class:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),t("span",null,a(s.location),1)])]),s.status==="æ‹›å‹Ÿä¸­"?(r(),n("div",Ct,[t("div",$t,[t("div",jt,[t("div",zt,[(r(!0),n(g,null,x((s.applicants||[]).slice(0,3),(l,u)=>(r(),n("img",{key:u,src:l.avatar,alt:l.name,title:l.name,class:"w-7 h-7 rounded-full border-2 border-white object-cover"},null,8,St))),128))]),t("span",At,[t("span",Mt,a(s.applicantCount||0),1),e[14]||(e[14]=v("äººç”³è¯·ä¸­ ",-1))])]),t("button",{onClick:f(l=>D(s.id),["stop"]),class:"text-sm text-teal-600 font-semibold hover:text-teal-700 whitespace-nowrap"}," æŸ¥çœ‹ç”³è¯· â†’ ",8,Dt)])])):s.status==="è¿›è¡Œä¸­"?(r(),n("div",Bt,[t("div",It,[t("div",Tt,[t("div",Ht,[(r(!0),n(g,null,x((s.participants||[]).slice(0,5),(l,u)=>(r(),n("img",{key:u,src:l.avatar,alt:l.name,title:l.name,class:"w-7 h-7 rounded-full border-2 border-white object-cover"},null,8,Nt))),128))]),t("span",Vt,a((s.participants||[]).length)+"äººå‚åŠ  ",1)]),t("button",{onClick:f(l=>B(s.id),["stop"]),class:"text-sm text-orange-600 font-semibold hover:text-orange-700 whitespace-nowrap"}," è¯¦æƒ… â†’ ",8,Ft)])])):p("",!0),t("div",Jt,[t("button",{onClick:f(l=>I(s.id),["stop"]),class:"flex-1 py-2 px-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-medium text-sm"}," ç¼–è¾‘ ",8,Pt),t("button",{onClick:f(l=>T(s.id),["stop"]),class:"flex-1 py-2 px-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium text-sm"}," å–æ¶ˆ ",8,qt)])])]))),128))])):(r(),n("div",Et,[e[16]||(e[16]=t("div",{class:"text-5xl mb-3 opacity-50"},"ğŸ—»",-1)),e[17]||(e[17]=t("p",{class:"text-gray-600 text-lg mb-4"},"è¿˜æ²¡æœ‰å‘å¸ƒä»»ä½•å¾’æ­¥æ´»åŠ¨",-1)),z(c,{to:"/create-activity",class:"inline-block px-6 py-2.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-semibold text-sm"},{default:S(()=>[...e[15]||(e[15]=[v(" å‘å¸ƒç¬¬ä¸€ä¸ªæ´»åŠ¨ ",-1)])]),_:1})]))])):p("",!0)])])}}}),Qt=E(Kt,[["__scopeId","data-v-8377b741"]]);export{Qt as default};
