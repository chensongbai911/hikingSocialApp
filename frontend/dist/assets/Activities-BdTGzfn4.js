import{k as T,J as j,r,l as B,v as l,q as a,z as e,G as _,O as S,P as V,L as b,M as w,y as I,A as i,x as L}from"./vue-B6Xl8iL6.js";import{a as N,_ as P}from"./index-D-ytOed8.js";import"./state-BRWMog1q.js";const q={class:"activities-page min-h-screen bg-gray-50 pb-24 flex flex-col overflow-hidden"},E={class:"bg-white pt-6 pb-4 px-4 border-b border-gray-100 sticky top-0 z-10 flex-shrink-0"},F={class:"container mx-auto"},G={class:"flex items-center justify-between mb-4"},J={class:"relative"},O={class:"flex-1 overflow-y-auto px-4 py-4"},Q={key:0,class:"space-y-4"},R={key:1,class:"space-y-4"},U=["onClick"],H={class:"relative h-48 overflow-hidden"},K=["src","alt"],W={class:"absolute top-3 left-3"},X={class:"p-4"},Y={class:"text-lg font-bold text-gray-800 mb-2"},Z={class:"text-sm text-gray-600 mb-3 line-clamp-2"},ee={class:"flex items-center justify-between text-sm text-gray-500"},te={class:"flex items-center gap-4"},se={key:0,class:"mt-3 pt-3 border-t border-gray-100 flex items-center gap-2"},oe=["src","alt"],le={class:"text-sm text-gray-700"},ae={key:0,class:"text-center py-4"},ne={key:1,class:"text-gray-500"},re={key:1,class:"text-center py-4 text-gray-500 text-sm"},ie={key:2,class:"bg-white rounded-2xl p-8 text-center mt-4"},de=T({__name:"Activities",setup(ce){const c=j(),d=r([]),u=r(!1),p=r(!1),v=r(""),g=r(1),k=r(20),x=r(0),f=r(!0),m=async(o=1)=>{var t,s;try{o===1?u.value=!0:p.value=!0;const n=await N.get("/discovery/activities",{params:{page:o,page_size:k.value,keyword:v.value||void 0}});if((t=n==null?void 0:n.data)!=null&&t.items){const y=n.data.items||[];x.value=((s=n.data.pagination)==null?void 0:s.total)||0,o===1?d.value=y:d.value=[...d.value,...y],f.value=d.value.length<x.value,g.value=o}}catch(n){console.error("Âä†ËΩΩÊ¥ªÂä®ÂàóË°®Â§±Ë¥•:",n)}finally{u.value=!1,p.value=!1}},C=()=>{m(g.value+1)};let h=null;const D=()=>{clearTimeout(h),h=setTimeout(()=>{g.value=1,m(1)},500)},M=o=>{c.push(`/activity/${o}`)},A=o=>({easy:"ÁÆÄÂçï",moderate:"‰∏≠Á≠â",hard:"Âõ∞Èöæ",expert:"‰∏ìÂÆ∂"})[o]||o,$=o=>({easy:"bg-green-100 text-green-700",moderate:"bg-yellow-100 text-yellow-700",hard:"bg-orange-100 text-orange-700",expert:"bg-red-100 text-red-700"})[o]||"bg-gray-100 text-gray-700",z=o=>{const t=new Date(o),s=t.getMonth()+1,n=t.getDate();return`${s}Êúà${n}Êó•`};return B(()=>{m()}),(o,t)=>(a(),l("div",q,[e("div",E,[e("div",F,[e("div",G,[e("button",{onClick:t[0]||(t[0]=s=>_(c).back()),class:"p-2 hover:bg-gray-100 rounded-full"},[...t[3]||(t[3]=[e("span",{class:"text-2xl"},"‚Üê",-1)])]),t[4]||(t[4]=e("h1",{class:"text-xl font-bold text-gray-800"},"Êé®ËçêÊ¥ªÂä®",-1)),t[5]||(t[5]=e("div",{class:"w-10"},null,-1))]),e("div",J,[t[6]||(t[6]=e("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"},"üîç",-1)),S(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),onInput:D,type:"text",placeholder:"ÊêúÁ¥¢Ê¥ªÂä®",class:"w-full pl-12 pr-4 py-3 bg-gray-100 rounded-full border-0 focus:outline-none focus:ring-2 focus:ring-teal-500 transition"},null,544),[[V,v.value]])])])]),e("div",O,[u.value&&d.value.length===0?(a(),l("div",Q,[(a(),l(b,null,w(5,s=>e("div",{key:s,class:"bg-white rounded-2xl p-4 animate-pulse"},[...t[7]||(t[7]=[e("div",{class:"h-40 bg-gray-200 rounded-xl mb-3"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-2"},null,-1),e("div",{class:"h-3 bg-gray-200 rounded w-1/2"},null,-1)])])),64))])):d.value.length>0?(a(),l("div",R,[(a(!0),l(b,null,w(d.value,s=>(a(),l("div",{key:s.id,onClick:n=>M(s.id),class:"bg-white rounded-2xl shadow-sm overflow-hidden hover:shadow-md transition cursor-pointer"},[e("div",H,[e("img",{src:s.cover_image_url||"https://picsum.photos/800/600",alt:s.title,class:"w-full h-full object-cover"},null,8,K),e("div",W,[e("span",{class:I(["px-3 py-1 rounded-full text-xs font-medium",$(s.difficulty)])},i(A(s.difficulty)),3)])]),e("div",X,[e("h3",Y,i(s.title),1),e("p",Z,i(s.description),1),e("div",ee,[e("div",te,[e("span",null,"üìç "+i(s.location),1),e("span",null,"üë• "+i(s.participant_count||0)+"/"+i(s.max_participants),1)]),e("span",null,i(z(s.start_time)),1)]),s.creator?(a(),l("div",se,[e("img",{src:s.creator.avatar_url||"https://picsum.photos/40/40",alt:s.creator.nickname,class:"w-8 h-8 rounded-full object-cover"},null,8,oe),e("span",le,i(s.creator.nickname),1)])):L("",!0)])],8,U))),128)),f.value?(a(),l("div",ae,[p.value?(a(),l("div",ne,"Âä†ËΩΩ‰∏≠...")):(a(),l("button",{key:0,onClick:C,class:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition"}," Âä†ËΩΩÊõ¥Â§ö "))])):(a(),l("div",re," Ê≤°ÊúâÊõ¥Â§öÊ¥ªÂä®‰∫Ü "))])):(a(),l("div",ie,[t[8]||(t[8]=e("div",{class:"text-6xl mb-3"},"üèîÔ∏è",-1)),t[9]||(t[9]=e("p",{class:"text-gray-500 mb-4"},"ÊöÇÊó†Êé®ËçêÊ¥ªÂä®",-1)),e("button",{onClick:t[2]||(t[2]=s=>_(c).push("/create-activity")),class:"px-6 py-2 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition"}," ÂèëËµ∑Á¨¨‰∏Ä‰∏™Ê¥ªÂä® ")]))])]))}}),ge=P(de,[["__scopeId","data-v-06a8840c"]]);export{ge as default};
