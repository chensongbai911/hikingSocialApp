import{k as O,J as q,r as n,d as $,l as R,W as J,v as o,q as l,z as t,x as m,S as z,y as k,Q as w,A as r,L as p,M as B,N as y}from"./vue-B6Xl8iL6.js";import{_ as Q}from"./index-D-ytOed8.js";import"./state-BRWMog1q.js";const U={class:"hiking-mode min-h-screen bg-gray-50"},W={class:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 safe-area-inset-top"},G={class:"flex items-center justify-between px-4 h-14"},K={class:"relative w-full h-full bg-gray-200"},X={key:0,class:"absolute inset-0 pointer-events-none"},Y=["points"],Z={class:"px-4 pb-6 overflow-y-auto",style:{height:"calc(100% - 20px)"}},tt={key:0},et={class:"grid grid-cols-3 gap-3 mb-4"},st={class:"text-center"},ot={class:"text-2xl font-bold text-teal-600"},lt={class:"text-center"},at={class:"text-2xl font-bold text-orange-500"},nt={class:"text-center"},rt={class:"text-2xl font-bold text-blue-600"},it={class:"text-xs text-gray-400"},dt={class:"flex gap-3"},ut={key:1},vt={class:"grid grid-cols-2 gap-4 mb-6"},xt={class:"bg-gradient-to-br from-teal-50 to-teal-100 rounded-xl p-4"},ct={class:"text-3xl font-bold text-teal-600"},gt={class:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4"},bt={class:"text-3xl font-bold text-orange-600"},ft={class:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4"},mt={class:"text-3xl font-bold text-blue-600"},pt={class:"text-xs text-gray-500 mt-1"},ht={class:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4"},kt={class:"text-3xl font-bold text-purple-600"},wt={class:"bg-white border border-gray-200 rounded-xl p-4 mb-6"},yt={class:"h-32 flex items-end space-x-1"},Ct={class:"flex gap-3"},_t={class:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl transform transition-all"},Mt={class:"bg-gray-50 rounded-xl p-4 mb-6"},St={class:"text-gray-900 font-medium pl-7"},jt={class:"flex gap-3"},$t={class:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl"},zt={class:"flex gap-3"},Bt={class:"fixed right-0 top-0 bottom-0 w-80 bg-white shadow-2xl transform transition-transform"},Lt={class:"flex items-center justify-between px-4 h-14 border-b border-gray-200"},Tt={class:"text-lg font-semibold text-gray-900"},Vt={class:"p-4 space-y-3 overflow-y-auto",style:{height:"calc(100vh - 56px)"}},Ft={class:"flex items-start"},Ht=["src","alt"],It={class:"ml-3 flex-1"},Dt={class:"flex items-center justify-between mb-1"},Pt={class:"font-semibold text-gray-900"},Nt={class:"text-sm text-gray-500 mb-2"},At=O({__name:"HikingMode",setup(Et){const h=q(),v=n(!1),x=n(!1),d=n(!1),b=n(!1),c=n(!1),f=n(!1),a=n({distance:"0.00",elevation:"0",time:0,pace:`0'00"`,avgSpeed:"0.0"}),L=n(0),T=n(0),g=n(null),V=n("北京市海淀区香山公园"),F=n("50,100 100,80 150,90 200,70 250,85"),H=n([30,45,55,50,60,70,65,75,80,85,90,85,80,75]),C=n([{id:1,name:"李明",avatar:"https://i.pravatar.cc/150?img=1",status:"online",distance:"0.5"},{id:2,name:"王芳",avatar:"https://i.pravatar.cc/150?img=2",status:"online",distance:"0.3"},{id:3,name:"张伟",avatar:"https://i.pravatar.cc/150?img=3",status:"offline",distance:"1.2"}]),I=$(()=>d.value?"calc(40vh)":"calc(100vh - 56px - 180px)"),_=$(()=>{const i=a.value.time,e=Math.floor(i/3600),s=Math.floor(i%3600/60),u=i%60;return e>0?`${e}:${String(s).padStart(2,"0")}:${String(u).padStart(2,"0")}`:`${s}:${String(u).padStart(2,"0")}`}),D=()=>{v.value?confirm("徒步正在进行中，确定要退出吗？")&&h.back():h.back()},P=()=>{d.value=!d.value},M=()=>{v.value=!0,x.value=!1,L.value=Date.now(),g.value=window.setInterval(()=>{if(!x.value){a.value.time++;const i=parseFloat(a.value.distance)+.001;a.value.distance=i.toFixed(2);const e=parseInt(a.value.elevation)+Math.floor(Math.random()*2);if(a.value.elevation=e.toString(),i>0){const s=(i/(a.value.time/3600)).toFixed(1);a.value.avgSpeed=s;const u=Math.floor(60/parseFloat(s)),E=Math.floor((60/parseFloat(s)-u)*60);a.value.pace=`${u}'${String(E).padStart(2,"0")}"`}}},1e3)},S=()=>{x.value=!0,T.value=Date.now()},j=()=>{x.value=!1},N=()=>{v.value=!1,c.value=!1,g.value&&(clearInterval(g.value),g.value=null),h.push({name:"HikingReport",params:{id:"new"},query:{distance:a.value.distance,elevation:a.value.elevation,time:a.value.time.toString()}})},A=()=>{b.value=!1,alert(`紧急求救信号已发送！

将通知您的：
- 紧急联系人
- 队伍成员
- 平台客服

请保持手机畅通`)};return R(()=>{console.log("行进模式已启动")}),J(()=>{g.value&&clearInterval(g.value)}),(i,e)=>(l(),o("div",U,[t("div",W,[t("div",G,[t("button",{onClick:D,class:"p-2"},[...e[10]||(e[10]=[t("svg",{class:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[12]||(e[12]=t("h1",{class:"text-lg font-semibold text-gray-900"},"行进模式",-1)),t("button",{onClick:e[0]||(e[0]=s=>f.value=!0),class:"p-2"},[...e[11]||(e[11]=[t("svg",{class:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)])])])]),t("div",{class:"fixed top-14 left-0 right-0",style:w({height:I.value})},[t("div",K,[e[13]||(e[13]=z('<div class="absolute inset-0 flex items-center justify-center text-gray-400" data-v-5054db9b><div class="text-center" data-v-5054db9b><svg class="w-16 h-16 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-5054db9b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" data-v-5054db9b></path></svg><p class="text-sm" data-v-5054db9b>地图加载中...</p></div></div>',1)),v.value?(l(),o("svg",X,[t("polyline",{points:F.value,fill:"none",stroke:"#14b8a6","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Y)])):m("",!0)]),t("button",{onClick:e[1]||(e[1]=s=>b.value=!0),class:"absolute top-4 right-4 w-16 h-16 bg-red-500 hover:bg-red-600 rounded-full shadow-lg flex items-center justify-center transition-all transform active:scale-95"},[...e[14]||(e[14]=[t("span",{class:"text-white text-2xl font-bold"},"SOS",-1)])]),t("button",{onClick:P,class:"absolute bottom-4 right-4 w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center"},[(l(),o("svg",{class:k(["w-6 h-6 text-gray-700",{"rotate-180":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[15]||(e[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"},null,-1)])],2))])],4),t("div",{class:k(["fixed left-0 right-0 bg-white rounded-t-3xl shadow-2xl transition-all duration-300",(d.value,"bottom-0")]),style:w({height:d.value?"60vh":"180px"})},[e[30]||(e[30]=t("div",{class:"flex justify-center pt-3 pb-2"},[t("div",{class:"w-10 h-1 bg-gray-300 rounded-full"})],-1)),t("div",Z,[d.value?(l(),o("div",ut,[e[29]||(e[29]=t("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"详细数据",-1)),t("div",vt,[t("div",xt,[e[21]||(e[21]=t("div",{class:"flex items-center mb-2"},[t("svg",{class:"w-5 h-5 text-teal-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),t("span",{class:"text-sm text-gray-600"},"已行进距离")],-1)),t("p",ct,r(a.value.distance),1),e[22]||(e[22]=t("p",{class:"text-xs text-gray-500 mt-1"},"公里",-1))]),t("div",gt,[e[23]||(e[23]=t("div",{class:"flex items-center mb-2"},[t("svg",{class:"w-5 h-5 text-orange-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})]),t("span",{class:"text-sm text-gray-600"},"累计爬升")],-1)),t("p",bt,r(a.value.elevation),1),e[24]||(e[24]=t("p",{class:"text-xs text-gray-500 mt-1"},"米",-1))]),t("div",ft,[e[25]||(e[25]=t("div",{class:"flex items-center mb-2"},[t("svg",{class:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),t("span",{class:"text-sm text-gray-600"},"已用时间")],-1)),t("p",mt,r(_.value),1),t("p",pt,r(a.value.pace),1)]),t("div",ht,[e[26]||(e[26]=t("div",{class:"flex items-center mb-2"},[t("svg",{class:"w-5 h-5 text-purple-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),t("span",{class:"text-sm text-gray-600"},"平均配速")],-1)),t("p",kt,r(a.value.avgSpeed),1),e[27]||(e[27]=t("p",{class:"text-xs text-gray-500 mt-1"},"km/h",-1))])]),t("div",wt,[e[28]||(e[28]=t("h4",{class:"text-sm font-semibold text-gray-700 mb-3"},"海拔变化",-1)),t("div",yt,[(l(!0),o(p,null,B(H.value,(s,u)=>(l(),o("div",{key:u,class:"flex-1 bg-gradient-to-t from-teal-500 to-teal-300 rounded-t",style:w({height:`${s}%`})},null,4))),128))])]),t("div",Ct,[v.value?(l(),o(p,{key:1},[x.value?(l(),o("button",{key:1,onClick:j,class:"flex-1 h-14 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-semibold text-lg transition-all transform active:scale-95 shadow-md"}," 继续 ")):(l(),o("button",{key:0,onClick:S,class:"flex-1 h-14 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-semibold text-lg transition-all transform active:scale-95 shadow-md"}," 暂停 ")),t("button",{onClick:e[3]||(e[3]=s=>c.value=!0),class:"flex-1 h-14 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold text-lg transition-all transform active:scale-95 shadow-md"}," 结束徒步 ")],64)):(l(),o("button",{key:0,onClick:M,class:"flex-1 h-14 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-semibold text-lg transition-all transform active:scale-95 shadow-md"}," 开始徒步 "))])])):(l(),o("div",tt,[t("div",et,[t("div",st,[e[16]||(e[16]=t("p",{class:"text-xs text-gray-500 mb-1"},"已行进",-1)),t("p",ot,r(a.value.distance),1),e[17]||(e[17]=t("p",{class:"text-xs text-gray-400"},"km",-1))]),t("div",lt,[e[18]||(e[18]=t("p",{class:"text-xs text-gray-500 mb-1"},"累计爬升",-1)),t("p",at,r(a.value.elevation),1),e[19]||(e[19]=t("p",{class:"text-xs text-gray-400"},"m",-1))]),t("div",nt,[e[20]||(e[20]=t("p",{class:"text-xs text-gray-500 mb-1"},"已用时",-1)),t("p",rt,r(_.value),1),t("p",it,r(a.value.pace),1)])]),t("div",dt,[v.value?(l(),o(p,{key:1},[x.value?(l(),o("button",{key:1,onClick:j,class:"flex-1 h-14 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-semibold text-lg transition-all transform active:scale-95 shadow-md"}," 继续 ")):(l(),o("button",{key:0,onClick:S,class:"flex-1 h-14 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-semibold text-lg transition-all transform active:scale-95 shadow-md"}," 暂停 ")),t("button",{onClick:e[2]||(e[2]=s=>c.value=!0),class:"flex-1 h-14 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold text-lg transition-all transform active:scale-95 shadow-md"}," 结束 ")],64)):(l(),o("button",{key:0,onClick:M,class:"flex-1 h-14 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-semibold text-lg transition-all transform active:scale-95 shadow-md"}," 开始徒步 "))])]))])],6),b.value?(l(),o("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4",onClick:e[5]||(e[5]=y(s=>b.value=!1,["self"]))},[t("div",_t,[e[32]||(e[32]=z('<div class="text-center mb-6" data-v-5054db9b><div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-5054db9b><svg class="w-10 h-10 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-5054db9b><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-5054db9b></path></svg></div><h3 class="text-xl font-bold text-gray-900 mb-2" data-v-5054db9b>发送紧急求救</h3><p class="text-gray-600 text-sm" data-v-5054db9b>将向您的紧急联系人和队友发送当前位置和求救信息</p></div>',1)),t("div",Mt,[e[31]||(e[31]=t("div",{class:"flex items-center text-sm text-gray-700 mb-2"},[t("svg",{class:"w-5 h-5 text-teal-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]),t("span",null,"当前位置")],-1)),t("p",St,r(V.value),1)]),t("div",jt,[t("button",{onClick:e[4]||(e[4]=s=>b.value=!1),class:"flex-1 h-12 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition"}," 取消 "),t("button",{onClick:A,class:"flex-1 h-12 bg-red-500 hover:bg-red-600 text-white rounded-xl font-semibold transition"}," 确认发送 ")])])])):m("",!0),c.value?(l(),o("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4",onClick:e[7]||(e[7]=y(s=>c.value=!1,["self"]))},[t("div",$t,[e[33]||(e[33]=t("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"结束本次徒步？",-1)),e[34]||(e[34]=t("p",{class:"text-gray-600 mb-6"},"徒步数据将被保存，您可以在记录中查看详情",-1)),t("div",zt,[t("button",{onClick:e[6]||(e[6]=s=>c.value=!1),class:"flex-1 h-12 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-semibold transition"}," 继续徒步 "),t("button",{onClick:N,class:"flex-1 h-12 bg-teal-500 hover:bg-teal-600 text-white rounded-xl font-semibold transition"}," 确认结束 ")])])])):m("",!0),f.value?(l(),o("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e[9]||(e[9]=y(s=>f.value=!1,["self"]))},[t("div",Bt,[t("div",Lt,[t("h3",Tt,"队伍成员 ("+r(C.value.length)+")",1),t("button",{onClick:e[8]||(e[8]=s=>f.value=!1),class:"p-2"},[...e[35]||(e[35]=[t("svg",{class:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Vt,[(l(!0),o(p,null,B(C.value,s=>(l(),o("div",{key:s.id,class:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-md transition"},[t("div",Ft,[t("img",{src:s.avatar,alt:s.name,class:"w-12 h-12 rounded-full object-cover"},null,8,Ht),t("div",It,[t("div",Dt,[t("h4",Pt,r(s.name),1),t("span",{class:k(["text-xs px-2 py-1 rounded-full",s.status==="online"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"])},r(s.status==="online"?"在线":"离线"),3)]),t("p",Nt,"距离您 "+r(s.distance)+"km",1),e[36]||(e[36]=t("div",{class:"flex gap-2"},[t("button",{class:"flex-1 h-8 bg-teal-50 text-teal-600 rounded-lg text-xs font-medium hover:bg-teal-100 transition"}," 查看位置 "),t("button",{class:"flex-1 h-8 bg-blue-50 text-blue-600 rounded-lg text-xs font-medium hover:bg-blue-100 transition"}," 语音通话 ")],-1))])])]))),128))])])])):m("",!0)]))}}),Jt=Q(At,[["__scopeId","data-v-5054db9b"]]);export{Jt as default};
