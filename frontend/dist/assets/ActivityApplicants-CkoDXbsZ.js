import{k as b,E as k,J as w,r as v,l as j,v as r,q as i,z as s,L as A,M as C,x as $,A as m}from"./vue-B6Xl8iL6.js";import{t as n,a as f,_ as D}from"./index-CIMimzwA.js";import"./state-BRWMog1q.js";const M={class:"activity-applicants-page min-h-screen bg-gray-50 flex flex-col overflow-hidden"},B={key:0,class:"p-8 text-center"},z={key:1,class:"flex-1 overflow-y-auto p-4 space-y-3"},I={class:"flex items-center justify-between"},L={class:"flex items-center gap-3 flex-1"},N=["src","alt"],R={class:"flex-1"},T={class:"font-semibold text-gray-800"},E={class:"text-sm text-gray-500"},V={key:0,class:"flex gap-2"},q=["onClick"],F=["onClick"],J={key:1,class:"text-teal-600 font-medium"},S={key:2,class:"text-gray-500"},G={key:3,class:"text-blue-600 font-medium"},H={key:2,class:"p-8 text-center"},K=b({__name:"ActivityApplicants",setup(O){const y=k(),p=w(),l=v(""),c=v(!0),d=v([]),u=async()=>{var a,t;try{c.value=!0;const e=await f.get(`/api/v1/activities/${l.value}/applicants`);d.value=e.data.applicants||[]}catch(e){console.error("åŠ è½½ç”³è¯·è€…å¤±è´¥:",e),n.error(((t=(a=e.response)==null?void 0:a.data)==null?void 0:t.message)||"åŠ è½½ç”³è¯·è€…å¤±è´¥")}finally{c.value=!1}},g=async a=>{var t,e;try{await f.post(`/api/v1/activities/${l.value}/approve`,{user_id:a}),n.success("å·²åŒæ„ç”³è¯·"),await u()}catch(o){console.error("åŒæ„ç”³è¯·å¤±è´¥:",o),n.error(((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||"æ“ä½œå¤±è´¥")}},x=async a=>{var t,e;try{await f.post(`/api/v1/activities/${l.value}/reject`,{user_id:a}),n.success("å·²æ‹’ç»ç”³è¯·"),await u()}catch(o){console.error("æ‹’ç»ç”³è¯·å¤±è´¥:",o),n.error(((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.message)||"æ“ä½œå¤±è´¥")}},_=a=>{if(!a)return"";const t=new Date(a),o=new Date().getTime()-t.getTime();return o<6e4?"åˆšåˆš":o<36e5?`${Math.floor(o/6e4)}åˆ†é’Ÿå‰`:o<864e5?`${Math.floor(o/36e5)}å°æ—¶å‰`:o<6048e5?`${Math.floor(o/864e5)}å¤©å‰`:t.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},h=()=>{p.back()};return j(()=>{l.value=y.params.id,l.value?u():(n.error("æ´»åŠ¨IDæ— æ•ˆ"),p.back())}),(a,t)=>(i(),r("div",M,[s("div",{class:"bg-white border-b border-gray-100 sticky top-0 z-10 flex-shrink-0"},[s("div",{class:"flex items-center justify-between px-4 py-4"},[s("button",{onClick:h,class:"w-10 h-10 flex items-center justify-center"},[...t[0]||(t[0]=[s("span",{class:"text-2xl"},"â†",-1)])]),t[1]||(t[1]=s("h1",{class:"text-lg font-bold text-gray-800"},"æ´»åŠ¨ç”³è¯·è€…",-1)),t[2]||(t[2]=s("div",{class:"w-10"},null,-1))])]),c.value?(i(),r("div",B,[...t[3]||(t[3]=[s("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-teal-500 border-t-transparent"},null,-1),s("p",{class:"text-gray-500 mt-4"},"åŠ è½½ä¸­...",-1)])])):d.value.length>0?(i(),r("div",z,[(i(!0),r(A,null,C(d.value,e=>(i(),r("div",{key:e.user.id,class:"bg-white rounded-2xl p-4 shadow-sm"},[s("div",I,[s("div",L,[s("img",{src:e.user.avatar_url||"/default-avatar.png",alt:e.user.nickname,class:"w-12 h-12 rounded-full object-cover"},null,8,N),s("div",R,[s("h3",T,m(e.user.nickname),1),s("p",E,m(_(e.applied_at)),1)])]),e.status==="pending"?(i(),r("div",V,[s("button",{onClick:o=>g(e.user.id),class:"px-4 py-2 bg-teal-500 text-white rounded-full text-sm font-medium hover:bg-teal-600 transition"}," åŒæ„ ",8,q),s("button",{onClick:o=>x(e.user.id),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-300 transition"}," æ‹’ç» ",8,F)])):e.status==="approved"?(i(),r("div",J," å·²é€šè¿‡ ")):e.status==="rejected"?(i(),r("div",S," å·²æ‹’ç» ")):e.status==="joined"?(i(),r("div",G," å·²åŠ å…¥ ")):$("",!0)])]))),128))])):(i(),r("div",H,[...t[4]||(t[4]=[s("div",{class:"text-6xl mb-4"},"ğŸ“‹",-1),s("h3",{class:"text-lg font-semibold text-gray-800 mb-2"},"æš‚æ— ç”³è¯·è€…",-1),s("p",{class:"text-gray-500"},"è¿˜æ²¡æœ‰ç”¨æˆ·ç”³è¯·å‚åŠ æ­¤æ´»åŠ¨",-1)])]))]))}}),W=D(K,[["__scopeId","data-v-a42f763a"]]);export{W as default};
