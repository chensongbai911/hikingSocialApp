import{k as y,J as w,r as n,F as k,v as m,q as p,z as s,N as _,x as V,A as c,O as d,P as i,K as v,s as N,u as q}from"./vue-B6Xl8iL6.js";import{u as U,t as u,_ as C}from"./index-DXXKft6O.js";import"./state-BRWMog1q.js";const R={class:"register-container"},S={class:"register-card"},h={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm"},B=["disabled"],M={class:"text-center mt-4"},T=y({__name:"Register",setup(D){const b=w(),f=U(),a=n(!1),t=n(""),r=n({email:"",nickname:"",password:""}),g=async()=>{a.value=!0,t.value="";try{const l=await f.register({email:r.value.email,nickname:r.value.nickname,password:r.value.password});l.success?(u.success("注册成功！即将跳转到登录页面",2e3),setTimeout(()=>{b.push({path:"/login",query:{email:r.value.email,isNewUser:"true"}})},1500)):(t.value=l.error||"注册失败，请重试",u.error(t.value))}catch(l){console.error("注册失败:",l),t.value="注册失败，请重试",u.error(t.value)}finally{a.value=!1}};return(l,e)=>{const x=k("router-link");return p(),m("div",R,[s("div",S,[e[8]||(e[8]=s("h1",{class:"text-2xl font-bold mb-6 text-center"},"注册",-1)),s("form",{onSubmit:_(g,["prevent"]),class:"space-y-4"},[t.value?(p(),m("div",h,c(t.value),1)):V("",!0),s("div",null,[e[3]||(e[3]=s("label",{for:"email",class:"block text-sm font-medium mb-2"},"邮箱",-1)),d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.email=o),type:"email",id:"email",placeholder:"请输入邮箱",class:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:""},null,512),[[i,r.value.email]])]),s("div",null,[e[4]||(e[4]=s("label",{for:"nickname",class:"block text-sm font-medium mb-2"},"昵称",-1)),d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.nickname=o),type:"text",id:"nickname",placeholder:"请输入昵称",class:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:""},null,512),[[i,r.value.nickname]])]),s("div",null,[e[5]||(e[5]=s("label",{for:"password",class:"block text-sm font-medium mb-2"},"密码 (至少8个字符)",-1)),d(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.password=o),type:"password",id:"password",placeholder:"请输入密码",class:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:"",minlength:"8"},null,512),[[i,r.value.password]])]),s("button",{type:"submit",disabled:a.value,class:"w-full bg-primary text-white py-2 rounded-lg hover:bg-secondary disabled:opacity-50"},c(a.value?"注册中...":"注册"),9,B)],32),s("p",M,[e[7]||(e[7]=v(" 已有账号？ ",-1)),N(x,{to:"/login",class:"text-primary hover:underline"},{default:q(()=>[...e[6]||(e[6]=[v(" 立即登录 ",-1)])]),_:1})])])])}}}),F=C(T,[["__scopeId","data-v-0adb9661"]]);export{F as default};
