import{k as N,J as I,E as V,r as q,d as _,l as E,F,v as n,q as l,z as t,y as h,x as u,O as g,P as x,s as j,u as z,N as v,A as a,K as f}from"./vue-Eb8ZdQV1.js";import{u as J}from"./activity-DGmHCpy2.js";import{u as P,t as A,_ as R}from"./index-BAE1sWos.js";import"./state-WzMdx_T8.js";import"./activity-CBna8Trh.js";const K={class:"my-hiking-page"},L={class:"sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm"},O={class:"flex gap-0 border-b border-gray-200"},U={key:0,class:"absolute bottom-0 left-0 right-0 h-1 bg-teal-500 rounded-t-sm"},G={key:0,class:"absolute bottom-0 left-0 right-0 h-1 bg-teal-500 rounded-t-sm"},Q={class:"px-4 py-4 pb-20"},W={key:0},X={key:0,class:"space-y-4"},Y=["onClick"],Z={class:"relative overflow-hidden h-56"},tt=["src","alt"],et={class:"absolute top-4 left-4"},st={class:"p-4"},ot={class:"font-bold text-lg text-gray-800 mb-3"},nt={class:"space-y-2 mb-4 text-sm text-gray-600"},lt={class:"flex items-center gap-2"},rt={class:"flex items-center gap-2"},at={key:0,class:"flex items-center gap-2 py-3 border-t border-gray-100"},it={class:"flex -space-x-2"},dt=["src","alt","title"],ct={key:0,class:"w-8 h-8 rounded-full border-2 border-white bg-teal-100 flex items-center justify-center text-xs font-semibold text-teal-600"},ut={class:"text-sm text-gray-600 ml-2"},pt={key:1,class:"text-center py-16"},gt={key:1},xt={key:0,class:"space-y-4"},mt=["onClick"],ht=["src","alt"],ft={class:"absolute top-4 right-4"},bt={class:"absolute top-4 left-4"},_t={class:"inline-block text-xs font-bold px-3 py-1 rounded-full bg-yellow-500 text-white"},vt={class:"p-4"},wt=["onClick"],kt={class:"space-y-2 mb-4 text-sm text-gray-600"},yt={class:"flex items-center gap-2"},Ct={class:"flex items-center gap-2"},$t={key:0,class:"mb-4 p-3 bg-teal-50 rounded-xl border border-teal-200"},jt={class:"flex items-center justify-between gap-2"},zt={class:"flex items-center gap-2 flex-1 min-w-0"},At={class:"flex -space-x-2 flex-shrink-0"},St=["src","alt","title"],Mt={class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},Dt={class:"text-teal-600"},Bt=["onClick"],Tt={key:1,class:"mb-4 p-3 bg-orange-50 rounded-xl border border-orange-200"},Ht={class:"flex items-center justify-between gap-2"},Nt={class:"flex items-center gap-2 flex-1 min-w-0"},It={class:"flex -space-x-2 flex-shrink-0"},Vt=["src","alt","title"],qt={class:"text-sm font-semibold text-gray-700"},Et=["onClick"],Ft={class:"flex gap-2 pt-3 border-t border-gray-100"},Jt=["onClick"],Pt=["onClick"],Rt={key:1,class:"text-center py-16"},Kt=N({__name:"MyHiking",setup(Lt){const m=I(),S=V(),p=J();P();const i=q("joined");_(()=>p.loading);const M=o=>{const s=new Date,d=new Date(o.start_time),e=o.end_time?new Date(o.end_time):null;return o.status==="cancelled"?"å·²å–æ¶ˆ":o.status==="completed"||e&&s>e?"å·²å®Œæˆ":s>=d&&(!e||s<=e)?"è¿›è¡Œä¸­":s<d?"å¾…å‚åŠ ":o.status==="recruiting"?"æ‹›å‹Ÿä¸­":"å·²å®Œæˆ"},w=o=>({id:o.id,title:o.title,location:o.location,startTime:o.start_time,coverImage:o.cover_image_url||"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&h=400&fit=crop",status:M(o),difficulty:o.difficulty||"easy",participantCount:o.participant_count||0,participants:[],applicants:[]}),k=_(()=>p.joinedActivities.map(w)),y=_(()=>p.createdActivities.map(w));E(async()=>{S.query.tab==="created"&&(i.value="created"),await C()});const C=async()=>{try{await Promise.all([p.fetchMyJoinedActivities({page:1,page_size:20}),p.fetchMyCreatedActivities({page:1,page_size:20})]),console.log("æ´»åŠ¨åˆ—è¡¨åŠ è½½æˆåŠŸ")}catch(o){console.error("åŠ è½½æ´»åŠ¨åˆ—è¡¨å¤±è´¥:",o)}},$=o=>{if(!o)return"";try{const s=new Date(o),d=String(s.getMonth()+1).padStart(2,"0"),e=String(s.getDate()).padStart(2,"0"),r=String(s.getHours()).padStart(2,"0"),c=String(s.getMinutes()).padStart(2,"0");return`${d}-${e} ${r}:${c}`}catch{return o}},b=o=>{m.push(`/activity/${o}`)},D=o=>{console.log("æŸ¥çœ‹ç”³è¯·è€…åˆ—è¡¨:",o),m.push(`/activity/${o}/applicants`)},B=o=>{m.push(`/activity/${o}`)},T=o=>{m.push(`/create-activity?id=${o}`)},H=async o=>{if(confirm("ç¡®å®šå–æ¶ˆè¯¥æ´»åŠ¨å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"))try{await p.deleteActivity(o.toString()),A.success("æ´»åŠ¨å·²å–æ¶ˆ"),await C()}catch(s){console.error("å–æ¶ˆæ´»åŠ¨å¤±è´¥:",s),A.error("å–æ¶ˆæ´»åŠ¨å¤±è´¥")}};return(o,s)=>{const d=F("router-link");return l(),n("div",K,[t("div",L,[s[4]||(s[4]=t("div",{class:"px-4 py-4"},[t("h1",{class:"text-2xl font-bold text-gray-800 text-center"},"å¾’æ­¥è®°å½•")],-1)),t("div",O,[t("button",{onClick:s[0]||(s[0]=e=>i.value="joined"),class:h(["flex-1 py-3 px-4 font-medium text-center transition-all relative",i.value==="joined"?"text-teal-600":"text-gray-600 hover:text-gray-800"])},[s[2]||(s[2]=t("span",null,"æˆ‘åŠ å…¥çš„",-1)),i.value==="joined"?(l(),n("div",U)):u("",!0)],2),t("button",{onClick:s[1]||(s[1]=e=>i.value="created"),class:h(["flex-1 py-3 px-4 font-medium text-center transition-all relative",i.value==="created"?"text-teal-600":"text-gray-600 hover:text-gray-800"])},[s[3]||(s[3]=t("span",null,"æˆ‘å‘å¸ƒçš„",-1)),i.value==="created"?(l(),n("div",G)):u("",!0)],2)])]),t("div",Q,[i.value==="joined"?(l(),n("div",W,[k.value.length>0?(l(),n("div",X,[(l(!0),n(g,null,x(k.value,e=>(l(),n("div",{key:e.id,onClick:r=>b(e.id),class:"activity-card-joined bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:-translate-y-1"},[t("div",Z,[t("img",{src:e.coverImage,alt:e.title,class:"w-full h-full object-cover"},null,8,tt),t("div",et,[t("span",{class:h(["inline-block text-xs font-bold px-3 py-1 rounded-full text-white",e.status==="å¾…å‚åŠ "?"bg-teal-500":e.status==="è¿›è¡Œä¸­"?"bg-orange-500":e.status==="å·²å®Œæˆ"?"bg-green-500":"bg-gray-500"])},a(e.status),3)]),s[5]||(s[5]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"},null,-1))]),t("div",st,[t("h3",ot,a(e.title),1),t("div",nt,[t("div",lt,[s[6]||(s[6]=t("svg",{class:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})],-1)),t("span",null,a($(e.startTime)),1)]),t("div",rt,[s[7]||(s[7]=t("svg",{class:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),t("span",null,a(e.location),1)])]),e.participants&&e.participants.length>0?(l(),n("div",at,[t("div",it,[(l(!0),n(g,null,x((e.participants||[]).slice(0,5),(r,c)=>(l(),n("img",{key:c,src:r.avatar,alt:r.name,title:r.name,class:"w-8 h-8 rounded-full border-2 border-white object-cover hover:z-10 transition-transform hover:scale-110"},null,8,dt))),128)),(e.participants||[]).length>5?(l(),n("div",ct," +"+a((e.participants||[]).length-5),1)):u("",!0)]),t("span",ut,a(e.participants.length)+"äººå‚åŠ  ",1)])):u("",!0)])],8,Y))),128))])):(l(),n("div",pt,[s[9]||(s[9]=t("div",{class:"text-5xl mb-3 opacity-50"},"ğŸ¥¾",-1)),s[10]||(s[10]=t("p",{class:"text-gray-600 text-lg mb-4"},"è¿˜æ²¡æœ‰åŠ å…¥ä»»ä½•å¾’æ­¥æ´»åŠ¨",-1)),j(d,{to:"/discover",class:"inline-block px-6 py-2.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-semibold text-sm"},{default:z(()=>[...s[8]||(s[8]=[v(" å»å‘ç°æ´»åŠ¨ ",-1)])]),_:1})]))])):u("",!0),i.value==="created"?(l(),n("div",gt,[y.value.length>0?(l(),n("div",xt,[(l(!0),n(g,null,x(y.value,e=>(l(),n("div",{key:e.id,class:"activity-card-created bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 group"},[t("div",{class:"relative overflow-hidden h-56 cursor-pointer",onClick:r=>b(e.id)},[t("img",{src:e.coverImage,alt:e.title,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,ht),t("div",ft,[t("span",{class:h(["inline-block text-xs font-bold px-3 py-1 rounded-full text-white",e.status==="æ‹›å‹Ÿä¸­"?"bg-teal-500":e.status==="è¿›è¡Œä¸­"?"bg-orange-500":"bg-gray-500"])},a(e.status),3)]),t("div",bt,[t("span",_t," éš¾åº¦ "+a(e.difficulty||"3.0"),1)]),s[11]||(s[11]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"},null,-1))],8,mt),t("div",vt,[t("h3",{class:"font-bold text-lg text-gray-800 mb-3 cursor-pointer hover:text-teal-600 transition",onClick:r=>b(e.id)},a(e.title),9,wt),t("div",kt,[t("div",yt,[s[12]||(s[12]=t("svg",{class:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})],-1)),t("span",null,a($(e.startTime)),1)]),t("div",Ct,[s[13]||(s[13]=t("svg",{class:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),t("span",null,a(e.location),1)])]),e.status==="æ‹›å‹Ÿä¸­"?(l(),n("div",$t,[t("div",jt,[t("div",zt,[t("div",At,[(l(!0),n(g,null,x((e.applicants||[]).slice(0,3),(r,c)=>(l(),n("img",{key:c,src:r.avatar,alt:r.name,title:r.name,class:"w-7 h-7 rounded-full border-2 border-white object-cover"},null,8,St))),128))]),t("span",Mt,[t("span",Dt,a(e.applicantCount||0),1),s[14]||(s[14]=v("äººç”³è¯·ä¸­ ",-1))])]),t("button",{onClick:f(r=>D(e.id),["stop"]),class:"text-sm text-teal-600 font-semibold hover:text-teal-700 whitespace-nowrap"}," æŸ¥çœ‹ç”³è¯· â†’ ",8,Bt)])])):e.status==="è¿›è¡Œä¸­"?(l(),n("div",Tt,[t("div",Ht,[t("div",Nt,[t("div",It,[(l(!0),n(g,null,x((e.participants||[]).slice(0,5),(r,c)=>(l(),n("img",{key:c,src:r.avatar,alt:r.name,title:r.name,class:"w-7 h-7 rounded-full border-2 border-white object-cover"},null,8,Vt))),128))]),t("span",qt,a((e.participants||[]).length)+"äººå‚åŠ  ",1)]),t("button",{onClick:f(r=>B(e.id),["stop"]),class:"text-sm text-orange-600 font-semibold hover:text-orange-700 whitespace-nowrap"}," è¯¦æƒ… â†’ ",8,Et)])])):u("",!0),t("div",Ft,[t("button",{onClick:f(r=>T(e.id),["stop"]),class:"flex-1 py-2 px-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-medium text-sm"}," ç¼–è¾‘ ",8,Jt),t("button",{onClick:f(r=>H(e.id),["stop"]),class:"flex-1 py-2 px-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium text-sm"}," å–æ¶ˆ ",8,Pt)])])]))),128))])):(l(),n("div",Rt,[s[16]||(s[16]=t("div",{class:"text-5xl mb-3 opacity-50"},"ğŸ—»",-1)),s[17]||(s[17]=t("p",{class:"text-gray-600 text-lg mb-4"},"è¿˜æ²¡æœ‰å‘å¸ƒä»»ä½•å¾’æ­¥æ´»åŠ¨",-1)),j(d,{to:"/create-activity",class:"inline-block px-6 py-2.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition font-semibold text-sm"},{default:z(()=>[...s[15]||(s[15]=[v(" å‘å¸ƒç¬¬ä¸€ä¸ªæ´»åŠ¨ ",-1)])]),_:1})]))])):u("",!0)])])}}}),Xt=R(Kt,[["__scopeId","data-v-c5e8aa1d"]]);export{Xt as default};
