import{k as z,J as A,r as u,d as M,l as N,F as R,v as o,q as a,z as e,A as r,G as i,x as V,K as f,L as v,s as B,u as L,M as F,y as T}from"./vue-Dw4nopsa.js";import{u as q,a as b,_ as E}from"./index-CdGZvDMd.js";import"./state-DpVNMUPX.js";const G={class:"home-page min-h-screen bg-gray-50 pb-20"},I={class:"bg-gradient-to-r from-teal-500 to-green-500 text-white"},J={class:"px-4 py-6"},K={class:"flex items-center justify-between"},O={class:"text-2xl font-bold mb-1"},P={class:"px-4 -mt-4 mb-4"},Q={class:"bg-white rounded-2xl shadow-md p-4 grid grid-cols-4 gap-2"},W={key:0,class:"absolute top-2 right-2 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-xs text-white"},X={class:"px-4 mb-6"},Y={key:0,class:"space-y-3"},Z={key:1,class:"space-y-3"},ee=["onClick"],te={class:"relative h-48 overflow-hidden"},se=["src","alt"],ne={class:"absolute top-3 left-3"},re={class:"p-4"},oe={class:"font-bold text-base text-gray-800 mb-2"},ae={class:"space-y-1 text-sm text-gray-600 mb-3"},le={class:"flex items-center gap-2"},ie={class:"flex items-center gap-2"},de={class:"flex items-center justify-between pt-3 border-t border-gray-100"},ce={class:"flex items-center gap-2"},ue=["src","alt"],xe={class:"text-xs text-gray-600"},me={class:"flex items-center gap-1 text-xs text-gray-500"},pe={key:2,class:"bg-white rounded-2xl p-8 text-center"},ge={class:"px-4 mb-6"},fe={class:"flex items-center justify-between mb-3"},ve={class:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide"},be=["onClick"],he=["src","alt"],ye={class:"text-sm font-medium text-gray-800 text-center truncate"},_e={class:"text-xs text-gray-500 text-center"},we=z({__name:"Home",setup(ke){const l=A(),w=q(),x=u(!1),m=u([]),h=u([]),d=u(0),k=M(()=>{const s=new Date().getHours();return s<12?"æ—©ä¸Šå¥½":s<18?"ä¸‹åˆå¥½":"æ™šä¸Šå¥½"}),y=async()=>{try{x.value=!0;const s=await b.get("/api/v1/discovery/recommended-activities",{params:{page:1,page_size:5}});s.data.activities&&(m.value=s.data.activities)}catch(s){console.error("åŠ è½½æŽ¨èæ´»åŠ¨å¤±è´¥:",s)}finally{x.value=!1}},_=async()=>{try{const s=await b.get("/api/v1/discovery/recommended-users",{params:{page:1,page_size:10}});s.data.users&&(h.value=s.data.users)}catch(s){console.error("åŠ è½½æŽ¨èç”¨æˆ·å¤±è´¥:",s)}},C=async()=>{try{const s=await b.get("/api/v1/messages/unread-count");s.data&&(d.value=s.data.count||0)}catch(s){console.error("åŠ è½½æœªè¯»æ¶ˆæ¯æ•°å¤±è´¥:",s)}},j=()=>{y(),_()},$=s=>{l.push(`/activity/${s}`)},S=s=>{if(!s)return"";try{const t=new Date(s),p=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),g=String(t.getMinutes()).padStart(2,"0");return`${p}-${c} ${n}:${g}`}catch{return s}},D=s=>{switch(s){case"easy":return"bg-green-500";case"moderate":return"bg-yellow-500";case"hard":return"bg-red-500";default:return"bg-gray-500"}},H=s=>{switch(s){case"easy":return"ç®€å•";case"moderate":return"ä¸­ç­‰";case"hard":return"å›°éš¾";default:return"æœªçŸ¥"}},U=s=>{switch(s){case"beginner":return"æ–°æ‰‹";case"intermediate":return"ä¸­çº§";case"advanced":return"èµ„æ·±";default:return"æ–°æ‰‹"}};return N(()=>{y(),_(),C()}),(s,t)=>{var c;const p=R("router-link");return a(),o("div",G,[e("div",I,[e("div",J,[e("div",K,[e("div",null,[e("h1",O,r(k.value)+", "+r(((c=i(w).currentUser)==null?void 0:c.nickname)||"å¾’æ­¥è€…")+"! ",1),t[5]||(t[5]=e("p",{class:"text-teal-100 text-sm"},"å‘çŽ°ç²¾å½©çš„å¾’æ­¥æ´»åŠ¨",-1))]),t[6]||(t[6]=e("div",{class:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center"},[e("span",{class:"text-3xl"},"ðŸ”ï¸")],-1))])])]),e("div",P,[e("div",Q,[e("button",{onClick:t[0]||(t[0]=n=>i(l).push("/create-activity")),class:"flex flex-col items-center py-3 hover:bg-gray-50 rounded-xl transition"},[...t[7]||(t[7]=[e("div",{class:"w-12 h-12 bg-teal-100 rounded-full flex items-center justify-center mb-2"},[e("span",{class:"text-2xl"},"âž•")],-1),e("span",{class:"text-xs text-gray-700"},"å‘èµ·æ´»åŠ¨",-1)])]),e("button",{onClick:t[1]||(t[1]=n=>i(l).push("/my-hiking")),class:"flex flex-col items-center py-3 hover:bg-gray-50 rounded-xl transition"},[...t[8]||(t[8]=[e("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-2"},[e("span",{class:"text-2xl"},"ðŸ“‹")],-1),e("span",{class:"text-xs text-gray-700"},"æˆ‘çš„æ´»åŠ¨",-1)])]),e("button",{onClick:t[2]||(t[2]=n=>i(l).push("/discover")),class:"flex flex-col items-center py-3 hover:bg-gray-50 rounded-xl transition"},[...t[9]||(t[9]=[e("div",{class:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-2"},[e("span",{class:"text-2xl"},"ðŸ”")],-1),e("span",{class:"text-xs text-gray-700"},"å‘çŽ°ç”¨æˆ·",-1)])]),e("button",{onClick:t[3]||(t[3]=n=>i(l).push("/messages")),class:"flex flex-col items-center py-3 hover:bg-gray-50 rounded-xl transition relative"},[t[10]||(t[10]=e("div",{class:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mb-2"},[e("span",{class:"text-2xl"},"ðŸ’¬")],-1)),t[11]||(t[11]=e("span",{class:"text-xs text-gray-700"},"æ¶ˆæ¯",-1)),d.value>0?(a(),o("div",W,r(d.value>9?"9+":d.value),1)):V("",!0)])])]),e("div",X,[e("div",{class:"flex items-center justify-between mb-3"},[t[12]||(t[12]=e("h2",{class:"text-lg font-bold text-gray-800"},"ðŸ”¥ æŽ¨èæ´»åŠ¨",-1)),e("button",{onClick:j,class:"text-sm text-teal-600 hover:text-teal-700"}," æ¢ä¸€æ‰¹ ")]),x.value?(a(),o("div",Y,[(a(),o(f,null,v(3,n=>e("div",{key:n,class:"bg-white rounded-2xl p-4 animate-pulse"},[...t[13]||(t[13]=[e("div",{class:"h-40 bg-gray-200 rounded-xl mb-3"},null,-1),e("div",{class:"h-4 bg-gray-200 rounded w-3/4 mb-2"},null,-1),e("div",{class:"h-3 bg-gray-200 rounded w-1/2"},null,-1)])])),64))])):m.value.length>0?(a(),o("div",Z,[(a(!0),o(f,null,v(m.value,n=>(a(),o("div",{key:n.id,onClick:g=>$(n.id),class:"bg-white rounded-2xl shadow-sm overflow-hidden hover:shadow-md transition cursor-pointer"},[e("div",te,[e("img",{src:n.cover_image_url||"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&h=400&fit=crop",alt:n.title,class:"w-full h-full object-cover"},null,8,se),e("div",ne,[e("span",{class:T(["px-3 py-1 rounded-full text-xs font-medium text-white",D(n.difficulty)])},r(H(n.difficulty)),3)])]),e("div",re,[e("h3",oe,r(n.title),1),e("div",ae,[e("div",le,[t[14]||(t[14]=e("span",null,"ðŸ“",-1)),e("span",null,r(n.location),1)]),e("div",ie,[t[15]||(t[15]=e("span",null,"ðŸ•",-1)),e("span",null,r(S(n.start_time)),1)])]),e("div",de,[e("div",ce,[e("img",{src:n.creator.avatar_url||"/default-avatar.png",alt:n.creator.nickname,class:"w-6 h-6 rounded-full object-cover"},null,8,ue),e("span",xe,r(n.creator.nickname),1)]),e("div",me,[t[16]||(t[16]=e("span",null,"ðŸ‘¥",-1)),e("span",null,r(n.participant_count||0)+"äººå‚åŠ ",1)])])])],8,ee))),128))])):(a(),o("div",pe,[t[17]||(t[17]=e("div",{class:"text-6xl mb-3"},"ðŸ”ï¸",-1)),t[18]||(t[18]=e("p",{class:"text-gray-500 mb-4"},"æš‚æ— æŽ¨èæ´»åŠ¨",-1)),e("button",{onClick:t[4]||(t[4]=n=>i(l).push("/create-activity")),class:"px-6 py-2 bg-teal-500 text-white rounded-full text-sm hover:bg-teal-600 transition"}," å‘èµ·ç¬¬ä¸€ä¸ªæ´»åŠ¨ ")]))]),e("div",ge,[e("div",fe,[t[20]||(t[20]=e("h2",{class:"text-lg font-bold text-gray-800"},"ðŸ‘¥ æŽ¨èä¼™ä¼´",-1)),B(p,{to:"/discover",class:"text-sm text-teal-600 hover:text-teal-700"},{default:L(()=>[...t[19]||(t[19]=[F(" æŸ¥çœ‹æ›´å¤š ",-1)])]),_:1})]),e("div",ve,[(a(!0),o(f,null,v(h.value,n=>(a(),o("div",{key:n.id,onClick:g=>i(l).push(`/user/${n.id}`),class:"flex-shrink-0 bg-white rounded-2xl p-4 w-32 hover:shadow-md transition cursor-pointer"},[e("img",{src:n.avatar_url||"/default-avatar.png",alt:n.nickname,class:"w-16 h-16 rounded-full object-cover mx-auto mb-2"},null,8,he),e("p",ye,r(n.nickname),1),e("p",_e,r(U(n.hiking_level)),1)],8,be))),128))])])])}}}),Se=E(we,[["__scopeId","data-v-ea0456be"]]);export{Se as default};
