import{k as A,J as N,r as u,d as h,l as T,v as a,q as n,z as e,x as r,y as d,A as o,O as g,P as f}from"./vue-Dq4PaVdn.js";import{_ as z}from"./index-BHhpTfea.js";import"./state-COm4LJOs.js";const B={class:"message-center"},L={class:"tabs"},R={key:0,class:"badge"},V={key:0,class:"badge"},j={key:0,class:"badge"},q={key:0,class:"tab-content"},E={key:0,class:"empty"},F={key:1,class:"conversation-list"},J=["onClick"],P=["src","alt"],G={class:"conversation-info"},H={class:"header"},K={class:"name"},Q={class:"time"},U={class:"preview"},W={class:"message"},X={key:0,class:"unread-badge"},Y={key:1,class:"tab-content"},Z={key:0,class:"empty"},tt={key:1,class:"notification-list"},et={class:"notification-content"},st={class:"text"},at={class:"time"},nt=["onClick"],it={key:2,class:"tab-content"},ot={key:0,class:"empty"},ct={key:1,class:"activity-message-list"},rt=["onClick"],dt={class:"message-content"},lt={class:"title"},_t={class:"text"},ut={class:"footer"},vt={class:"activity-name"},pt={class:"time"},yt=A({__name:"MessageCenter",setup(mt){const k=N(),c=u("conversations"),v=u([{id:"1",name:"å¼ ä¸‰",avatar_url:"",last_message:"æ˜Žå¤©çš„å¾’æ­¥æ´»åŠ¨å‡†å¤‡å¥½äº†å—?",last_message_time:new Date(Date.now()-36e5).toISOString(),unread_count:2},{id:"2",name:"æŽå››",avatar_url:"",last_message:"å¥½çš„,é‚£æˆ‘ä»¬æ˜Žå¤©è§",last_message_time:new Date(Date.now()-72e5).toISOString(),unread_count:0}]),_=u([{id:"1",type:"friend",content:"çŽ‹äº” æŽ¥å—äº†ä½ çš„å¥½å‹è¯·æ±‚",created_at:new Date(Date.now()-18e5).toISOString(),is_read:!1},{id:"2",type:"system",content:"æ‚¨çš„è´¦å·å®‰å…¨ç­‰çº§å·²æå‡",created_at:new Date(Date.now()-864e5).toISOString(),is_read:!0}]),p=u([{id:"1",type:"application_approved",title:"æŠ¥åé€šè¿‡",content:"æ‚¨çš„æ´»åŠ¨æŠ¥åç”³è¯·å·²é€šè¿‡",activity_name:"å‘¨æœ«é¦™å±±å¾’æ­¥",activity_id:"1",created_at:new Date(Date.now()-36e5).toISOString(),is_read:!1},{id:"2",type:"activity_reminder",title:"æ´»åŠ¨æé†’",content:"æ´»åŠ¨å°†åœ¨1å°æ—¶åŽå¼€å§‹,è¯·åšå¥½å‡†å¤‡",activity_name:"æ¤ç‰©å›­å¾’æ­¥",activity_id:"2",created_at:new Date(Date.now()-72e5).toISOString(),is_read:!1},{id:"3",type:"activity_cancelled",title:"æ´»åŠ¨å–æ¶ˆ",content:"æ´»åŠ¨å› å¤©æ°”åŽŸå› å–æ¶ˆ,æ•¬è¯·è°…è§£",activity_name:"é›¨ä¸­å¾’æ­¥",activity_id:"3",created_at:new Date(Date.now()-1728e5).toISOString(),is_read:!0}]),w=h(()=>v.value.reduce((i,s)=>i+(s.unread_count||0),0)),D=h(()=>_.value.filter(i=>!i.is_read).length),C=h(()=>p.value.filter(i=>!i.is_read).length),$=i=>{k.push(`/chat/${i}`)},I=i=>{const s=_.value.find(t=>t.id===i);s&&(s.is_read=!0)},M=i=>{i.is_read=!0,k.push(`/activity/${i.activity_id}`)},y=i=>{const s=new Date(i),l=new Date().getTime()-s.getTime(),m=Math.floor(l/6e4),S=Math.floor(l/36e5),b=Math.floor(l/864e5);return m<1?"åˆšåˆš":m<60?`${m}åˆ†é’Ÿå‰`:S<24?`${S}å°æ—¶å‰`:b<7?`${b}å¤©å‰`:s.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})},O=i=>({friend:"ðŸ‘¥",system:"âš™ï¸",activity:"ðŸŽ¯",comment:"ðŸ’¬",like:"â¤ï¸"})[i]||"ðŸ“¢",x=i=>({application_approved:"âœ…",application_rejected:"âŒ",activity_reminder:"â°",activity_cancelled:"ðŸš«",activity_updated:"ðŸ“",new_participant:"ðŸ‘‹"})[i]||"ðŸŽ¯";return T(()=>{}),(i,s)=>(n(),a("div",B,[e("div",L,[e("div",{class:d(["tab",{active:c.value==="conversations"}]),onClick:s[0]||(s[0]=t=>c.value="conversations")},[s[3]||(s[3]=e("span",null,"ç§ä¿¡",-1)),w.value>0?(n(),a("span",R,o(w.value),1)):r("",!0)],2),e("div",{class:d(["tab",{active:c.value==="notifications"}]),onClick:s[1]||(s[1]=t=>c.value="notifications")},[s[4]||(s[4]=e("span",null,"é€šçŸ¥",-1)),D.value>0?(n(),a("span",V,o(D.value),1)):r("",!0)],2),e("div",{class:d(["tab",{active:c.value==="activity"}]),onClick:s[2]||(s[2]=t=>c.value="activity")},[s[5]||(s[5]=e("span",null,"æ´»åŠ¨æ¶ˆæ¯",-1)),C.value>0?(n(),a("span",j,o(C.value),1)):r("",!0)],2)]),c.value==="conversations"?(n(),a("div",q,[v.value.length===0?(n(),a("div",E,[...s[6]||(s[6]=[e("div",{class:"empty-icon"},"ðŸ’¬",-1),e("p",null,"æš‚æ— ç§ä¿¡",-1)])])):(n(),a("div",F,[(n(!0),a(g,null,f(v.value,t=>(n(),a("div",{key:t.id,class:"conversation-item",onClick:l=>$(t.id)},[e("img",{src:t.avatar_url||"/default-avatar.png",alt:t.name,class:"avatar"},null,8,P),e("div",G,[e("div",H,[e("h4",K,o(t.name),1),e("span",Q,o(y(t.last_message_time)),1)]),e("div",U,[e("p",W,o(t.last_message),1),t.unread_count&&t.unread_count>0?(n(),a("span",X,o(t.unread_count),1)):r("",!0)])])],8,J))),128))]))])):r("",!0),c.value==="notifications"?(n(),a("div",Y,[_.value.length===0?(n(),a("div",Z,[...s[7]||(s[7]=[e("div",{class:"empty-icon"},"ðŸ””",-1),e("p",null,"æš‚æ— é€šçŸ¥",-1)])])):(n(),a("div",tt,[(n(!0),a(g,null,f(_.value,t=>(n(),a("div",{key:t.id,class:d(["notification-item",{unread:!t.is_read}])},[e("div",{class:d(["icon",`icon-${t.type}`])},o(O(t.type)),3),e("div",et,[e("p",st,o(t.content),1),e("span",at,o(y(t.created_at)),1)]),t.is_read?r("",!0):(n(),a("button",{key:0,class:"mark-read",onClick:l=>I(t.id)}," âœ“ ",8,nt))],2))),128))]))])):r("",!0),c.value==="activity"?(n(),a("div",it,[p.value.length===0?(n(),a("div",ot,[...s[8]||(s[8]=[e("div",{class:"empty-icon"},"ðŸŽ¯",-1),e("p",null,"æš‚æ— æ´»åŠ¨æ¶ˆæ¯",-1)])])):(n(),a("div",ct,[(n(!0),a(g,null,f(p.value,t=>(n(),a("div",{key:t.id,class:d(["activity-message-item",{unread:!t.is_read}]),onClick:l=>M(t)},[e("div",{class:d(["icon",`icon-${t.type}`])},o(x(t.type)),3),e("div",dt,[e("h4",lt,o(t.title),1),e("p",_t,o(t.content),1),e("div",ut,[e("span",vt,o(t.activity_name),1),e("span",pt,o(y(t.created_at)),1)])])],10,rt))),128))]))])):r("",!0)]))}}),kt=z(yt,[["__scopeId","data-v-23a0976e"]]);export{kt as default};
