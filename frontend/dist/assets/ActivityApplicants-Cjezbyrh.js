import{k as b,E as k,J as w,r as p,l as j,v as r,q as i,z as s,K as A,L as C,x as $,A as f}from"./vue-Dw4nopsa.js";import{t as n,a as v,_ as D}from"./index-CdGZvDMd.js";import"./state-DpVNMUPX.js";const B={class:"activity-applicants-page min-h-screen bg-gray-50"},M={key:0,class:"p-8 text-center"},z={key:1,class:"p-4 space-y-3"},I={class:"flex items-center justify-between"},L={class:"flex items-center gap-3 flex-1"},N=["src","alt"],R={class:"flex-1"},T={class:"font-semibold text-gray-800"},E={class:"text-sm text-gray-500"},V={key:0,class:"flex gap-2"},q=["onClick"],F=["onClick"],J={key:1,class:"text-teal-600 font-medium"},K={key:2,class:"text-gray-500"},S={key:3,class:"text-blue-600 font-medium"},G={key:2,class:"p-8 text-center"},H=b({__name:"ActivityApplicants",setup(O){const g=k(),m=w(),l=p(""),c=p(!0),d=p([]),u=async()=>{var o,t;try{c.value=!0;const e=await v.get(`/api/v1/activities/${l.value}/applicants`);d.value=e.data.applicants||[]}catch(e){console.error("åŠ è½½ç”³è¯·è€…å¤±è´¥:",e),n.error(((t=(o=e.response)==null?void 0:o.data)==null?void 0:t.message)||"åŠ è½½ç”³è¯·è€…å¤±è´¥")}finally{c.value=!1}},y=async o=>{var t,e;try{await v.post(`/api/v1/activities/${l.value}/approve`,{user_id:o}),n.success("å·²åŒæ„ç”³è¯·"),await u()}catch(a){console.error("åŒæ„ç”³è¯·å¤±è´¥:",a),n.error(((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"æ“ä½œå¤±è´¥")}},_=async o=>{var t,e;try{await v.post(`/api/v1/activities/${l.value}/reject`,{user_id:o}),n.success("å·²æ‹’ç»ç”³è¯·"),await u()}catch(a){console.error("æ‹’ç»ç”³è¯·å¤±è´¥:",a),n.error(((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"æ“ä½œå¤±è´¥")}},x=o=>{if(!o)return"";const t=new Date(o),a=new Date().getTime()-t.getTime();return a<6e4?"åˆšåˆš":a<36e5?`${Math.floor(a/6e4)}åˆ†é’Ÿå‰`:a<864e5?`${Math.floor(a/36e5)}å°æ—¶å‰`:a<6048e5?`${Math.floor(a/864e5)}å¤©å‰`:t.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},h=()=>{m.back()};return j(()=>{l.value=g.params.id,l.value?u():(n.error("æ´»åŠ¨IDæ— æ•ˆ"),m.back())}),(o,t)=>(i(),r("div",B,[s("div",{class:"bg-white border-b border-gray-100 sticky top-0 z-10"},[s("div",{class:"flex items-center justify-between px-4 py-4"},[s("button",{onClick:h,class:"w-10 h-10 flex items-center justify-center"},[...t[0]||(t[0]=[s("span",{class:"text-2xl"},"â†",-1)])]),t[1]||(t[1]=s("h1",{class:"text-lg font-bold text-gray-800"},"æ´»åŠ¨ç”³è¯·è€…",-1)),t[2]||(t[2]=s("div",{class:"w-10"},null,-1))])]),c.value?(i(),r("div",M,[...t[3]||(t[3]=[s("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-teal-500 border-t-transparent"},null,-1),s("p",{class:"text-gray-500 mt-4"},"åŠ è½½ä¸­...",-1)])])):d.value.length>0?(i(),r("div",z,[(i(!0),r(A,null,C(d.value,e=>(i(),r("div",{key:e.user.id,class:"bg-white rounded-2xl p-4 shadow-sm"},[s("div",I,[s("div",L,[s("img",{src:e.user.avatar_url||"/default-avatar.png",alt:e.user.nickname,class:"w-12 h-12 rounded-full object-cover"},null,8,N),s("div",R,[s("h3",T,f(e.user.nickname),1),s("p",E,f(x(e.applied_at)),1)])]),e.status==="pending"?(i(),r("div",V,[s("button",{onClick:a=>y(e.user.id),class:"px-4 py-2 bg-teal-500 text-white rounded-full text-sm font-medium hover:bg-teal-600 transition"}," åŒæ„ ",8,q),s("button",{onClick:a=>_(e.user.id),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-300 transition"}," æ‹’ç» ",8,F)])):e.status==="approved"?(i(),r("div",J," å·²é€šè¿‡ ")):e.status==="rejected"?(i(),r("div",K," å·²æ‹’ç» ")):e.status==="joined"?(i(),r("div",S," å·²åŠ å…¥ ")):$("",!0)])]))),128))])):(i(),r("div",G,[...t[4]||(t[4]=[s("div",{class:"text-6xl mb-4"},"ğŸ“‹",-1),s("h3",{class:"text-lg font-semibold text-gray-800 mb-2"},"æš‚æ— ç”³è¯·è€…",-1),s("p",{class:"text-gray-500"},"è¿˜æ²¡æœ‰ç”¨æˆ·ç”³è¯·å‚åŠ æ­¤æ´»åŠ¨",-1)])]))]))}}),W=D(H,[["__scopeId","data-v-a9b30b46"]]);export{W as default};
