import{b as p}from"./index-CWcBcR69.js";const h=a=>new Promise((o,e)=>{const n=new FileReader;n.onload=c=>{var d;(d=c.target)!=null&&d.result?o(c.target.result):e(new Error("读取文件失败"))},n.onerror=e,n.readAsDataURL(a)}),P=async a=>{const o=await h(a),e=await p.addPhoto(o);if(e.code===200&&e.data)return e.data;throw new Error(e.message||"上传照片失败")},R=async a=>{const o=a.map(e=>P(e));return Promise.all(o)},A=(a,o=1200,e=1200,n=.8)=>new Promise((c,d)=>{const l=new FileReader;l.onload=u=>{var m;const s=new Image;s.onload=()=>{const i=document.createElement("canvas");let r=s.width,t=s.height;(r>o||t>e)&&(r>t?(t=t*o/r,r=o):(r=r*e/t,t=e)),i.width=r,i.height=t;const w=i.getContext("2d");w==null||w.drawImage(s,0,0,r,t);const g=i.toDataURL("image/jpeg",n);c(g)},s.onerror=d,s.src=(m=u.target)==null?void 0:m.result},l.onerror=d,l.readAsDataURL(a)});export{A as c,R as u};
