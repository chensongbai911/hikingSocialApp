import{k as D,J as R,r as n,d as L,l as M,v as l,q as i,z as s,O as m,P as S,U as C,S as T,L as f,M as g,y as V,A as o}from"./vue-B6Xl8iL6.js";import{r as h}from"./route-CMQZM-Sp.js";import{_ as B}from"./index-D-ytOed8.js";import"./apiService-eCEBkkdb.js";import"./state-BRWMog1q.js";const F={class:"routes-container"},U={class:"routes-header"},w={class:"header-actions"},z={class:"routes-list"},A={key:0,class:"loading"},N={key:1,class:"empty-state"},P=["onClick"],j={class:"route-image"},q=["src","alt"],E={class:"route-info"},I={class:"description"},J={class:"stats"},O={class:"stat"},Q={class:"value"},$={class:"stat"},G={class:"value"},H={class:"stat"},K={class:"value"},W={class:"tags"},X={class:"footer"},Y={class:"rating"},Z={class:"rating-text"},ss=D({__name:"RouteList",setup(ts){const y=R(),v=n([]),p=n([]),r=n(!0),d=n(""),c=n(""),_=L(()=>v.value.filter(a=>{const t=a.name.includes(d.value)||a.description.includes(d.value),e=!c.value||a.difficulty===c.value;return t&&e})),b=a=>({easy:"简单",moderate:"中等",hard:"困难",expert:"专家"})[a]||a,k=a=>p.value.filter(t=>t.route_id===a).map(t=>t.tag_name).slice(0,3),x=a=>{y.push({name:"RouteDetail",params:{id:a}})};return M(async()=>{try{r.value=!0;const[a,t]=await Promise.all([h.getRoutes(),h.getRouteTags()]);v.value=a,p.value=t}catch(a){console.error("Failed to load routes:",a)}finally{r.value=!1}}),(a,t)=>(i(),l("div",F,[s("div",U,[t[3]||(t[3]=s("h1",null,"精选路线",-1)),s("div",w,[m(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),type:"text",placeholder:"搜索路线...",class:"search-input"},null,512),[[S,d.value]]),m(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),class:"filter-select"},[...t[2]||(t[2]=[T('<option value="" data-v-1598c55b>所有难度</option><option value="easy" data-v-1598c55b>简单</option><option value="moderate" data-v-1598c55b>中等</option><option value="hard" data-v-1598c55b>困难</option><option value="expert" data-v-1598c55b>专家</option>',5)])],512),[[C,c.value]])])]),s("div",z,[r.value?(i(),l("div",A," 加载中... ")):_.value.length===0?(i(),l("div",N," 没有找到匹配的路线 ")):(i(!0),l(f,{key:2},g(_.value,e=>(i(),l("div",{key:e.id,class:"route-card",onClick:u=>x(e.id)},[s("div",j,[s("img",{src:e.cover_image||"/default-route.jpg",alt:e.name,class:"image"},null,8,q),s("div",{class:V(["difficulty-badge",e.difficulty])},o(b(e.difficulty)),3)]),s("div",E,[s("h3",null,o(e.name),1),s("p",I,o(e.description),1),s("div",J,[s("div",O,[t[4]||(t[4]=s("span",{class:"label"},"距离",-1)),s("span",Q,o(e.distance)+" km",1)]),s("div",$,[t[5]||(t[5]=s("span",{class:"label"},"爬升",-1)),s("span",G,o(e.elevation_gain)+" m",1)]),s("div",H,[t[6]||(t[6]=s("span",{class:"label"},"耗时",-1)),s("span",K,o(Math.floor(e.estimated_duration/60))+"h",1)])]),s("div",W,[(i(!0),l(f,null,g(k(e.id),u=>(i(),l("span",{key:u,class:"tag"},o(u),1))),128))]),s("div",X,[s("div",Y,[t[7]||(t[7]=s("span",{class:"stars"},"★",-1)),s("span",Z,o(e.rating_avg.toFixed(1))+" ("+o(e.rating_count)+") ",1)]),t[8]||(t[8]=s("button",{class:"btn-primary"},"查看详情",-1))])])],8,P))),128))])]))}}),ns=B(ss,[["__scopeId","data-v-1598c55b"]]);export{ns as default};
