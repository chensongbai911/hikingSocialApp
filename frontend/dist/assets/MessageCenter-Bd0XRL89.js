import{k as A,J as N,r as u,d as g,l as z,v as n,q as i,z as e,x as c,y as d,A as o,L as f,M as k}from"./vue-B6Xl8iL6.js";import{_ as B}from"./index-D-ytOed8.js";import"./state-BRWMog1q.js";const L={class:"message-center"},R={class:"tabs"},V={key:0,class:"badge"},j={key:0,class:"badge"},q={key:0,class:"badge"},E={key:0,class:"tab-content"},F={key:0,class:"empty"},J={key:1,class:"conversation-list"},G=["onClick"],H=["src","alt"],K={class:"conversation-info"},P={class:"header"},Q={class:"name"},U={class:"time"},W={class:"preview"},X={class:"message"},Y={key:0,class:"unread-badge"},Z={key:1,class:"tab-content"},tt={key:0,class:"empty"},et={key:1,class:"notification-list"},st={class:"notification-content"},at={class:"text"},nt={class:"time"},it=["onClick"],ot={key:2,class:"tab-content"},ct={key:0,class:"empty"},rt={key:1,class:"activity-message-list"},dt=["onClick"],lt={class:"message-content"},_t={class:"title"},ut={class:"text"},vt={class:"footer"},pt={class:"activity-name"},yt={class:"time"},mt=A({__name:"MessageCenter",setup(ht){const w=N(),r=u("conversations"),v=a=>{r.value=a,window.scrollTo({top:0,behavior:"smooth"})},p=u([{id:"1",name:"å¼ ä¸‰",avatar_url:"",last_message:"æ˜Žå¤©çš„å¾’æ­¥æ´»åŠ¨å‡†å¤‡å¥½äº†å—?",last_message_time:new Date(Date.now()-36e5).toISOString(),unread_count:2},{id:"2",name:"æŽå››",avatar_url:"",last_message:"å¥½çš„,é‚£æˆ‘ä»¬æ˜Žå¤©è§",last_message_time:new Date(Date.now()-72e5).toISOString(),unread_count:0}]),_=u([{id:"1",type:"friend",content:"çŽ‹äº” æŽ¥å—äº†ä½ çš„å¥½å‹è¯·æ±‚",created_at:new Date(Date.now()-18e5).toISOString(),is_read:!1},{id:"2",type:"system",content:"æ‚¨çš„è´¦å·å®‰å…¨ç­‰çº§å·²æå‡",created_at:new Date(Date.now()-864e5).toISOString(),is_read:!0}]),y=u([{id:"1",type:"application_approved",title:"æŠ¥åé€šè¿‡",content:"æ‚¨çš„æ´»åŠ¨æŠ¥åç”³è¯·å·²é€šè¿‡",activity_name:"å‘¨æœ«é¦™å±±å¾’æ­¥",activity_id:"1",created_at:new Date(Date.now()-36e5).toISOString(),is_read:!1},{id:"2",type:"activity_reminder",title:"æ´»åŠ¨æé†’",content:"æ´»åŠ¨å°†åœ¨1å°æ—¶åŽå¼€å§‹,è¯·åšå¥½å‡†å¤‡",activity_name:"æ¤ç‰©å›­å¾’æ­¥",activity_id:"2",created_at:new Date(Date.now()-72e5).toISOString(),is_read:!1},{id:"3",type:"activity_cancelled",title:"æ´»åŠ¨å–æ¶ˆ",content:"æ´»åŠ¨å› å¤©æ°”åŽŸå› å–æ¶ˆ,æ•¬è¯·è°…è§£",activity_name:"é›¨ä¸­å¾’æ­¥",activity_id:"3",created_at:new Date(Date.now()-1728e5).toISOString(),is_read:!0}]),C=g(()=>p.value.reduce((a,s)=>a+(s.unread_count||0),0)),D=g(()=>_.value.filter(a=>!a.is_read).length),S=g(()=>y.value.filter(a=>!a.is_read).length),I=a=>{w.push(`/chat/${a}`)},M=a=>{const s=_.value.find(t=>t.id===a);s&&(s.is_read=!0)},O=a=>{a.is_read=!0,w.push(`/activity/${a.activity_id}`)},m=a=>{const s=new Date(a),l=new Date().getTime()-s.getTime(),h=Math.floor(l/6e4),b=Math.floor(l/36e5),$=Math.floor(l/864e5);return h<1?"åˆšåˆš":h<60?`${h}åˆ†é’Ÿå‰`:b<24?`${b}å°æ—¶å‰`:$<7?`${$}å¤©å‰`:s.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})},x=a=>({friend:"ðŸ‘¥",system:"âš™ï¸",activity:"ðŸŽ¯",comment:"ðŸ’¬",like:"â¤ï¸"})[a]||"ðŸ“¢",T=a=>({application_approved:"âœ…",application_rejected:"âŒ",activity_reminder:"â°",activity_cancelled:"ðŸš«",activity_updated:"ðŸ“",new_participant:"ðŸ‘‹"})[a]||"ðŸŽ¯";return z(()=>{}),(a,s)=>(i(),n("div",L,[e("div",R,[e("div",{class:d(["tab",{active:r.value==="conversations"}]),onClick:s[0]||(s[0]=t=>v("conversations"))},[s[3]||(s[3]=e("span",null,"ç§ä¿¡",-1)),C.value>0?(i(),n("span",V,o(C.value),1)):c("",!0)],2),e("div",{class:d(["tab",{active:r.value==="notifications"}]),onClick:s[1]||(s[1]=t=>v("notifications"))},[s[4]||(s[4]=e("span",null,"é€šçŸ¥",-1)),D.value>0?(i(),n("span",j,o(D.value),1)):c("",!0)],2),e("div",{class:d(["tab",{active:r.value==="activity"}]),onClick:s[2]||(s[2]=t=>v("activity"))},[s[5]||(s[5]=e("span",null,"æ´»åŠ¨æ¶ˆæ¯",-1)),S.value>0?(i(),n("span",q,o(S.value),1)):c("",!0)],2)]),r.value==="conversations"?(i(),n("div",E,[p.value.length===0?(i(),n("div",F,[...s[6]||(s[6]=[e("div",{class:"empty-icon"},"ðŸ’¬",-1),e("p",null,"æš‚æ— ç§ä¿¡",-1)])])):(i(),n("div",J,[(i(!0),n(f,null,k(p.value,t=>(i(),n("div",{key:t.id,class:"conversation-item",onClick:l=>I(t.id)},[e("img",{src:t.avatar_url||"/default-avatar.png",alt:t.name,class:"avatar"},null,8,H),e("div",K,[e("div",P,[e("h4",Q,o(t.name),1),e("span",U,o(m(t.last_message_time)),1)]),e("div",W,[e("p",X,o(t.last_message),1),t.unread_count&&t.unread_count>0?(i(),n("span",Y,o(t.unread_count),1)):c("",!0)])])],8,G))),128))]))])):c("",!0),r.value==="notifications"?(i(),n("div",Z,[_.value.length===0?(i(),n("div",tt,[...s[7]||(s[7]=[e("div",{class:"empty-icon"},"ðŸ””",-1),e("p",null,"æš‚æ— é€šçŸ¥",-1)])])):(i(),n("div",et,[(i(!0),n(f,null,k(_.value,t=>(i(),n("div",{key:t.id,class:d(["notification-item",{unread:!t.is_read}])},[e("div",{class:d(["icon",`icon-${t.type}`])},o(x(t.type)),3),e("div",st,[e("p",at,o(t.content),1),e("span",nt,o(m(t.created_at)),1)]),t.is_read?c("",!0):(i(),n("button",{key:0,class:"mark-read",onClick:l=>M(t.id)}," âœ“ ",8,it))],2))),128))]))])):c("",!0),r.value==="activity"?(i(),n("div",ot,[y.value.length===0?(i(),n("div",ct,[...s[8]||(s[8]=[e("div",{class:"empty-icon"},"ðŸŽ¯",-1),e("p",null,"æš‚æ— æ´»åŠ¨æ¶ˆæ¯",-1)])])):(i(),n("div",rt,[(i(!0),n(f,null,k(y.value,t=>(i(),n("div",{key:t.id,class:d(["activity-message-item",{unread:!t.is_read}]),onClick:l=>O(t)},[e("div",{class:d(["icon",`icon-${t.type}`])},o(T(t.type)),3),e("div",lt,[e("h4",_t,o(t.title),1),e("p",ut,o(t.content),1),e("div",vt,[e("span",pt,o(t.activity_name),1),e("span",yt,o(m(t.created_at)),1)])])],10,dt))),128))]))])):c("",!0)]))}}),wt=B(mt,[["__scopeId","data-v-45ee924a"]]);export{wt as default};
