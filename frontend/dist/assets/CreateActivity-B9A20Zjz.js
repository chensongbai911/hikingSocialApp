import{k as Me,r as v,l as Se,W as je,v as u,q as d,z as e,x as g,L as H,M as se,O as z,P as j,A as c,d as le,w as Te,S as Pe,X as Ie,K as ce,y as ne,J as Fe,E as Ue,p as Ae,U as ze}from"./vue-Dq4PaVdn.js";import{u as Be}from"./activity-CYvuZ61G.js";import{t as m,_ as De,a as J}from"./index-DVwHWCBY.js";import"./state-COm4LJOs.js";import"./activity-2pnciig_.js";const Ne={class:"fixed inset-0 bg-white z-50 flex flex-col"},Ve={class:"border-b border-gray-100"},He={class:"flex items-center justify-between p-4"},Re={class:"px-4 pb-4"},qe={class:"relative"},Ee={key:0,class:"mt-2 bg-white rounded-2xl shadow-lg max-h-60 overflow-y-auto"},Ge=["onClick"],Oe={class:"font-medium text-gray-800"},Ke={class:"text-sm text-gray-500 mt-1"},Je={class:"flex-1 relative"},Ye={class:"bg-white border-t border-gray-100 p-4"},Ze={key:0,class:"bg-gray-50 rounded-2xl p-4 mb-4"},We={class:"flex items-start"},Qe={class:"ml-3 flex-1"},Xe={class:"font-medium text-gray-800"},et={class:"text-sm text-gray-500 mt-1"},tt=["disabled"],st=Me({__name:"MapPicker",emits:["close","confirm"],setup(_,{emit:P}){const R=P,w=v(null),M=v(""),y=v([]),D=v({name:"",address:"",lat:0,lng:0});let l=null,L=null,N=null,b=null;Se(()=>{Y()}),je(()=>{l&&l.destroy(),b&&clearTimeout(b)});const Y=()=>{if(!window.AMap){m.error("åœ°å›¾åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–APIå¯†é’¥é…ç½®");return}l=new window.AMap.Map(w.value,{zoom:14,center:[116.397428,39.90923],viewMode:"2D",pitch:0,mapStyle:"amap://styles/normal",zooms:[3,18]}),l.on("complete",()=>{setTimeout(()=>{const f=document.querySelector(".amap-logo"),n=document.querySelector(".amap-copyright");f&&(f.style.display="none"),n&&(n.style.display="none")},100)}),L=new window.AMap.Geocoder({city:"åŒ—äº¬"}),N=new window.AMap.PlaceSearch({city:"åŒ—äº¬",pageSize:10,pageIndex:1}),l.on("moveend",()=>{const f=l.getCenter();h(f.lng,f.lat)}),S()},S=()=>{if(!window.AMap)return;new window.AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4}).getCurrentPosition((n,x)=>{if(n==="complete"){const{lng:p,lat:U}=x.position;l.setCenter([p,U]),h(p,U)}else console.log("å®šä½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤ä½ç½®")})},h=(f,n)=>{L&&L.getAddress([f,n],(x,p)=>{if(x==="complete"&&p.info==="OK"){const U=p.regeocode.addressComponent,ie=p.regeocode.formattedAddress,ae=p.regeocode.pois[0];D.value={name:ae?ae.name:U.township||U.district,address:ie,lat:n,lng:f}}})},$=()=>{b&&clearTimeout(b),b=window.setTimeout(()=>{if(!M.value.trim()||!N){y.value=[];return}N.search(M.value,(f,n)=>{f==="complete"&&n.poiList&&n.poiList.pois?y.value=n.poiList.pois.map(x=>({name:x.name,address:x.address||x.pname+x.cityname+x.adname,location:x.location})):y.value=[]})},300)},F=f=>{const{lng:n,lat:x}=f.location;l.setCenter([n,x]),y.value=[],M.value="",h(n,x)},q=()=>{D.value.name&&R("confirm",D.value)};return(f,n)=>(d(),u("div",Ne,[e("div",Ve,[e("div",He,[e("button",{onClick:n[0]||(n[0]=x=>f.$emit("close")),class:"p-2 -ml-2"},[...n[2]||(n[2]=[e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),n[3]||(n[3]=e("h3",{class:"text-lg font-bold text-gray-800"},"é€‰æ‹©é›†åˆåœ°ç‚¹",-1)),n[4]||(n[4]=e("div",{class:"w-6"},null,-1))]),e("div",Re,[e("div",qe,[H(e("input",{"onUpdate:modelValue":n[1]||(n[1]=x=>M.value=x),onInput:$,type:"text",placeholder:"æœç´¢åœ°ç‚¹",class:"w-full pl-10 pr-4 py-3 bg-gray-50 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500"},null,544),[[se,M.value]]),n[5]||(n[5]=e("svg",{class:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),y.value.length>0?(d(),u("div",Ee,[(d(!0),u(z,null,j(y.value,(x,p)=>(d(),u("div",{key:p,onClick:U=>F(x),class:"p-3 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 cursor-pointer"},[e("div",Oe,c(x.name),1),e("div",Ke,c(x.address),1)],8,Ge))),128))])):g("",!0)])]),e("div",Je,[e("div",{ref_key:"mapContainer",ref:w,class:"w-full h-full"},null,512),n[7]||(n[7]=e("div",{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none"},[e("svg",{class:"w-12 h-12 text-teal-500 drop-shadow-lg",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})])],-1)),e("button",{onClick:S,class:"absolute bottom-24 right-4 w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center"},[...n[6]||(n[6]=[e("svg",{class:"w-6 h-6 text-teal-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])])]),e("div",Ye,[D.value.name?(d(),u("div",Ze,[e("div",We,[n[8]||(n[8]=e("svg",{class:"w-5 h-5 text-teal-500 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),e("div",Qe,[e("div",Xe,c(D.value.name),1),e("div",et,c(D.value.address),1)])])])):g("",!0),e("button",{onClick:q,disabled:!D.value.name,class:"w-full py-4 bg-teal-500 text-white font-medium rounded-2xl disabled:bg-gray-300 disabled:cursor-not-allowed"}," ç¡®è®¤ä½ç½® ",8,tt)])]))}}),at=De(st,[["__scopeId","data-v-127d30b8"]]),te={getDestinations:_=>J.get("/destinations",{params:_}),getDestinationById:_=>J.get(`/destinations/${_}`),getPopularDestinations:_=>J.get("/destinations/popular",{params:{limit:_}}),getNearbyDestinations:(_,P,R,w)=>J.get("/destinations/nearby",{params:{latitude:_,longitude:P,radius:R,limit:w}}),recordSearch:(_,P)=>J.post("/destinations/search/record",{keyword:_,destinationId:P}),getSearchHistory:_=>J.get("/destinations/search/history",{params:{limit:_}}),toggleFavorite:_=>J.post(`/destinations/${_}/favorite`),getFavorites:()=>J.get("/destinations/favorites/list")},ot={class:"fixed inset-0 bg-white z-50 flex flex-col"},lt={class:"bg-white border-b border-gray-100"},nt={class:"flex items-center justify-center relative px-4 py-4"},it={key:0,class:"px-4 pb-4"},rt={class:"relative"},dt={key:0,class:"flex-1 overflow-y-auto"},ut={class:"px-4 py-4 space-y-6"},ct={key:0},vt={class:"flex gap-2 flex-wrap"},pt=["onClick"],ft={class:"space-y-3"},gt=["onClick"],xt=["src","alt"],mt={class:"flex-1"},yt={class:"flex items-center gap-2 mb-1"},bt={class:"font-bold text-gray-800"},ht={key:0,class:"px-2 py-0.5 bg-teal-50 text-teal-500 text-xs rounded-full font-medium"},wt={class:"flex items-center gap-2 text-xs text-gray-500"},kt={key:1,class:"flex-1 relative"},_t={key:0,class:"absolute top-0 left-0 right-0 bg-white/95 backdrop-blur-sm border-b border-gray-200 p-4 z-20"},$t={class:"flex gap-2"},Ct={class:"flex-1 relative"},Mt={key:2,class:"absolute bottom-0 left-0 right-0 bg-white/95 backdrop-blur-sm border-t-2 border-teal-500 p-4 pb-safe z-20"},St={class:"mb-3"},Dt={class:"font-bold text-gray-900 text-lg"},Pt={class:"text-sm text-gray-600 mt-1"},At={key:3,class:"absolute bottom-4 right-4 bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-3 z-20"},zt={class:"bg-white rounded-t-3xl shadow-2xl max-h-[70vh] overflow-y-auto"},jt={class:"relative"},Lt={class:"relative h-48 overflow-hidden rounded-t-3xl"},Tt=["src","alt"],It={class:"absolute bottom-4 left-4 right-4"},Ft={class:"text-2xl font-bold text-white mb-1"},Ut={class:"flex items-center gap-2 text-white/90 text-sm"},Bt={class:"p-4 space-y-4"},Nt={class:"flex gap-2 flex-wrap"},Vt={class:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-xs font-medium"},Ht={key:0,class:"px-3 py-1 bg-teal-50 text-teal-600 rounded-full text-xs font-medium"},Rt={key:0,class:"space-y-2"},qt={class:"flex gap-2 overflow-x-auto pb-2"},Et=["src"],Gt=Me({__name:"DestinationPicker",emits:["close","select"],setup(_,{emit:P}){const R=P,w=v(!1),M=v(""),y=v(""),D=v(!1);let l=null,L=null,N=null,b=null;const Y=[];let S=null;const h=v(null),$=v(null),F=v([]),q=v([]),f=v([]),n=v([]),x=v("popularity"),p=v(null),U={easy:"å…¥é—¨",moderate:"ä¸­ç­‰",hard:"å›°éš¾"},ie=le(()=>{if(!M.value)return F.value;const o=M.value.toLowerCase();return f.value.filter(a=>{var r;return a.name.toLowerCase().includes(o)||a.area.toLowerCase().includes(o)||((r=a.tags)==null?void 0:r.toLowerCase().includes(o))})}),ae=o=>o?o<1?`${(o*1e3).toFixed(0)}m`:`${o.toFixed(1)}km`:"";Se(async()=>{try{ve(),be(),await ye(),await E()}catch(o){console.error("åˆå§‹åŒ–å¤±è´¥:",o)}});const ve=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async o=>{$.value={latitude:o.coords.latitude,longitude:o.coords.longitude},await Z()},o=>{console.error("è·å–ä½ç½®å¤±è´¥:",o),$.value={latitude:39.9042,longitude:116.4074}}):$.value={latitude:39.9042,longitude:116.4074}},ye=async()=>{try{D.value=!0;const o=await te.getPopularDestinations(10);if(o.code===200){const a=Array.from(new Map(o.data.map(r=>[r.id,r])).values());F.value=a.map(T)}}catch(o){console.error("åŠ è½½çƒ­é—¨ç›®çš„åœ°å¤±è´¥:",o)}finally{D.value=!1}},Z=async()=>{if($.value)try{const o=await te.getNearbyDestinations($.value.latitude,$.value.longitude,50,10);o.code===200&&(q.value=o.data.map(T))}catch(o){console.error("åŠ è½½é™„è¿‘ç›®çš„åœ°å¤±è´¥:",o)}},E=async()=>{var o,a;try{const r=await te.getDestinations({pageSize:100,sortBy:x.value,latitude:(o=$.value)==null?void 0:o.latitude,longitude:(a=$.value)==null?void 0:a.longitude});r.code===200&&(f.value=r.data.destinations.map(T))}catch(r){console.error("åŠ è½½ç›®çš„åœ°åˆ—è¡¨å¤±è´¥:",r)}},T=o=>({...o,image:o.cover_image||"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400",badge:o.popularity_score>1e3?"äººæ°”æ¦œ Top":"",distance:o.user_distance?ae(o.user_distance):`${o.distance||0}km`,visitors:`${(o.visit_count/1e3).toFixed(1)}k+`,difficulty:U[o.difficulty]||o.difficulty}),be=async()=>{try{const o=await te.getSearchHistory(10);o.code===200&&(n.value=o.data)}catch{const a=localStorage.getItem("destination_search_history");a&&(n.value=JSON.parse(a))}};Te(M,async o=>{o&&setTimeout(async()=>{M.value===o&&await E()},300)});const W=()=>{w.value=!0,setTimeout(()=>{he()},100)},he=()=>{if(!window.AMap){m.error("åœ°å›¾åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•");return}l=new window.AMap.Map("amap-container",{zoom:12,center:$.value?[$.value.longitude,$.value.latitude]:[116.4074,39.9042],mapStyle:"amap://styles/normal",features:["bg","road","building","point"],viewMode:"2D",showLabel:!0,labelzIndex:130,zoomEnable:!0,dragEnable:!0,doubleClickZoom:!0,scrollWheel:!0,touchZoom:!0,zooms:[3,18],pitch:0,rotation:0}),l.on("complete",()=>{console.log("åœ°å›¾åŠ è½½å®Œæˆ"),setTimeout(()=>{const o=document.querySelector(".amap-logo"),a=document.querySelector(".amap-copyright");o&&(o.style.display="none"),a&&(a.style.display="none")},100)}),window.AMap.plugin(["AMap.PlaceSearch","AMap.Geolocation","AMap.Geocoder"],()=>{L=new window.AMap.PlaceSearch({map:l,pageSize:10,pageIndex:1,city:"åŒ—äº¬",citylimit:!1}),N=new window.AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,zoomToAccuracy:!0,buttonPosition:"RB"}),b=new window.AMap.Geocoder({city:"å…¨å›½"})}),oe(),l.on("click",o=>{const{lng:a,lat:r}=o.lnglat;K(a,r)})},oe=()=>{Y.forEach(a=>a.setMap(null)),Y.length=0,(f.value.length>0?f.value:F.value).forEach(a=>{if(!a.latitude||!a.longitude)return;let r="#10b981";a.difficulty==="ä¸­ç­‰"||a.difficulty==="moderate"?r="#f59e0b":(a.difficulty==="å›°éš¾"||a.difficulty==="hard")&&(r="#ef4444");const i=`
      <div style="
        background: ${r};
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        cursor: pointer;
        border: 3px solid white;
      ">
        ğŸ”ï¸
      </div>
      <div style="
        position: absolute;
        top: 45px;
        left: 50%;
        transform: translateX(-50%);
        background: white;
        padding: 4px 8px;
        border-radius: 12px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        white-space: nowrap;
        font-size: 12px;
        font-weight: 600;
        color: #1f2937;
      ">
        ${a.name}
      </div>
    `,t=new window.AMap.Marker({position:[a.longitude,a.latitude],content:i,offset:new window.AMap.Pixel(-20,-20),extData:a});t.on("click",()=>{fe(a),l.setCenter([a.longitude,a.latitude])}),t.setMap(l),Y.push(t)})};let G=null;const re=()=>{!y.value||!L||(clearTimeout(G),G=setTimeout(()=>{L.search(y.value,(o,a)=>{if(o==="complete"&&a.poiList){const r=a.poiList.pois;if(r.length>0){const i=r[0];l.setCenter([i.location.lng,i.location.lat]),l.setZoom(15)}}})},500))},O=()=>{w.value=!1,h.value=null,l&&(l.destroy(),l=null),S&&(S.setMap(null),S=null)},K=(o,a)=>{S&&S.setMap(null),S=new window.AMap.Marker({position:[o,a],content:`
      <div style="
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
        border-radius: 50% 50% 50% 0;
        transform: rotate(-45deg);
        border: 4px solid white;
        box-shadow: 0 4px 12px rgba(20, 184, 166, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
      ">
        <div style="
          transform: rotate(45deg);
          font-size: 24px;
        ">ğŸ“</div>
      </div>
    `,offset:new window.AMap.Pixel(-25,-50),zIndex:200}),S.setMap(l),l.setCenter([o,a]),b?b.getAddress([o,a],(r,i)=>{var t;if(r==="complete"&&i.info==="OK"){const s=i.regeocode.addressComponent,k=i.regeocode.formattedAddress,I=(t=i.regeocode.pois)==null?void 0:t[0];h.value={name:(I==null?void 0:I.name)||s.township||s.district||"é€‰ä¸­çš„ä½ç½®",address:k,lat:a,lng:o}}else h.value={name:"é€‰ä¸­çš„ä½ç½®",address:`${a.toFixed(6)}, ${o.toFixed(6)}`,lat:a,lng:o}}):h.value={name:"é€‰ä¸­çš„ä½ç½®",address:`${a.toFixed(6)}, ${o.toFixed(6)}`,lat:a,lng:o}},de=()=>{h.value=null,S&&(S.setMap(null),S=null)},pe=async()=>{if(!h.value)return;const o=h.value.name;try{await te.recordSearch(o)}catch{n.value.includes(o)||(n.value.unshift(o),n.value.length>10&&n.value.pop(),localStorage.setItem("destination_search_history",JSON.stringify(n.value)))}n.value.includes(o)||(n.value.unshift(o),n.value.length>10&&n.value.pop()),R("select",o),m.success(`å·²é€‰æ‹©: ${o}`)},Q=()=>{!y.value||!L||L.search(y.value,(o,a)=>{if(o==="complete"&&a.poiList){const r=a.poiList.pois;if(r.length>0){const i=r[0],t=i.location.lng,s=i.location.lat;K(t,s),l.setZoom(15),m.success(`æ‰¾åˆ° ${r.length} ä¸ªç»“æœ`)}else m.info("æœªæ‰¾åˆ°ç›¸å…³åœ°ç‚¹")}})},fe=async o=>{try{const a=await te.getDestinationById(o.id);a.code===200&&(p.value=T(a.data))}catch{p.value=T(o)}},ge=()=>{p.value=null},we=o=>{ue(o),p.value=null},ue=async o=>{try{await te.recordSearch(o)}catch{n.value.includes(o)||(n.value.unshift(o),n.value.length>10&&n.value.pop(),localStorage.setItem("destination_search_history",JSON.stringify(n.value)))}n.value.includes(o)||(n.value.unshift(o),n.value.length>10&&n.value.pop()),R("select",o)},ke=()=>{n.value=[],localStorage.removeItem("destination_search_history"),m.success("å·²æ¸…é™¤æœç´¢è®°å½•")},_e=()=>{w.value&&l&&N?N.getCurrentPosition((o,a)=>{if(o==="complete"){const r=a.position;l.setCenter([r.lng,r.lat]),l.setZoom(13),$.value={latitude:r.lat,longitude:r.lng},m.success("å®šä½æˆåŠŸ"),Z()}else m.error("å®šä½å¤±è´¥")}):(ve(),m.info("æ­£åœ¨å®šä½..."))};return je(()=>{l&&(l.destroy(),l=null),G&&clearTimeout(G)}),(o,a)=>(d(),u("div",ot,[e("div",lt,[e("div",nt,[e("button",{onClick:a[0]||(a[0]=r=>o.$emit("close")),class:"absolute left-4 w-10 h-10 flex items-center justify-center"},[...a[4]||(a[4]=[e("span",{class:"text-2xl"},"â†",-1)])]),a[5]||(a[5]=e("h2",{class:"text-lg font-bold text-gray-800"},"é€‰æ‹©ç›®çš„åœ°",-1))]),w.value?g("",!0):(d(),u("div",it,[e("div",rt,[a[6]||(a[6]=e("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-teal-500 text-xl"},"ğŸ”",-1)),H(e("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>M.value=r),type:"text",placeholder:"æœç´¢å±±å³°ã€è·¯çº¿ã€æ™¯åŒº",class:"w-full pl-12 pr-4 py-3 bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500"},null,512),[[se,M.value]])])]))]),w.value?(d(),u("div",kt,[a[18]||(a[18]=e("div",{id:"amap-container",class:"absolute inset-0 bg-gray-100"},null,-1)),h.value?g("",!0):(d(),u("div",_t,[e("div",$t,[e("button",{onClick:O,class:"w-12 h-12 bg-white border border-gray-200 rounded-full flex items-center justify-center hover:bg-gray-50 transition shadow-sm flex-shrink-0"},[...a[12]||(a[12]=[e("span",{class:"text-xl"},"â†",-1)])]),e("div",Ct,[a[13]||(a[13]=e("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-teal-500 text-lg"},"ğŸ”",-1)),H(e("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>y.value=r),onInput:re,onKeyup:Ie(Q,["enter"]),type:"text",placeholder:"æœç´¢åœ°ç‚¹æˆ–ç‚¹å‡»åœ°å›¾é€‰æ‹©ä½ç½®",class:"w-full pl-11 pr-4 py-3 bg-white border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-sm"},null,544),[[se,y.value]])]),e("button",{onClick:_e,class:"w-12 h-12 bg-teal-500 text-white rounded-full flex items-center justify-center hover:bg-teal-600 transition shadow-lg flex-shrink-0",title:"å®šä½åˆ°æˆ‘çš„ä½ç½®"},[...a[14]||(a[14]=[e("span",{class:"text-xl"},"ğŸ“",-1)])])])])),h.value?(d(),u("button",{key:1,onClick:O,class:"absolute top-4 left-4 z-20 bg-white rounded-full px-4 py-3 shadow-lg flex items-center gap-2 hover:bg-gray-50 transition"},[...a[15]||(a[15]=[e("span",{class:"text-base"},"â†",-1),e("span",{class:"text-sm font-medium"},"åˆ—è¡¨",-1)])])):g("",!0),h.value?(d(),u("div",Mt,[e("div",St,[a[16]||(a[16]=e("div",{class:"text-xs text-teal-600 font-medium mb-1"},"âœ“ å·²é€‰ä¸­ä½ç½®",-1)),e("div",Dt,c(h.value.name||"æœªå‘½ååœ°ç‚¹"),1),e("div",Pt,c(h.value.address||"ç‚¹å‡»åœ°å›¾å¯é‡æ–°é€‰æ‹©"),1)]),e("div",{class:"flex gap-3"},[e("button",{onClick:de,class:"flex-1 py-3.5 bg-gray-100 text-gray-700 rounded-full font-medium hover:bg-gray-200 transition text-base"}," é‡æ–°é€‰æ‹© "),e("button",{onClick:pe,class:"flex-1 py-3.5 bg-gradient-to-r from-teal-500 to-emerald-500 text-white rounded-full font-bold hover:from-teal-600 hover:to-emerald-600 transition shadow-lg text-base"}," âœ“ ç¡®è®¤æ­¤ä½ç½® ")])])):g("",!0),h.value?g("",!0):(d(),u("div",At,[...a[17]||(a[17]=[Pe('<div class="flex flex-col gap-2 text-xs" data-v-af4a7d04><div class="flex items-center gap-2" data-v-af4a7d04><div class="w-4 h-4 bg-green-500 rounded-full" data-v-af4a7d04></div><span class="text-gray-700 font-medium" data-v-af4a7d04>ç®€å•</span></div><div class="flex items-center gap-2" data-v-af4a7d04><div class="w-4 h-4 bg-yellow-500 rounded-full" data-v-af4a7d04></div><span class="text-gray-700 font-medium" data-v-af4a7d04>ä¸­ç­‰</span></div><div class="flex items-center gap-2" data-v-af4a7d04><div class="w-4 h-4 bg-red-500 rounded-full" data-v-af4a7d04></div><span class="text-gray-700 font-medium" data-v-af4a7d04>å›°éš¾</span></div></div>',1)])]))])):(d(),u("div",dt,[e("div",{class:"px-4 pt-4"},[e("div",{onClick:W,class:"bg-gradient-to-r from-teal-50 to-emerald-50 rounded-2xl p-4 flex items-center gap-4 cursor-pointer hover:shadow-md transition"},[...a[7]||(a[7]=[Pe('<div class="w-14 h-14 bg-teal-500 rounded-full flex items-center justify-center text-white text-2xl shadow-lg" data-v-af4a7d04> ğŸ—ºï¸ </div><div class="flex-1" data-v-af4a7d04><h3 class="text-base font-bold text-gray-800 mb-1" data-v-af4a7d04>åœ°å›¾æ‰¾å±±</h3><p class="text-sm text-gray-500" data-v-af4a7d04>åœ¨åœ°å›¾ä¸Šå‘ç°ä½ èº«è¾¹çš„å®è—å¾’æ­¥ç‚¹</p></div><span class="text-teal-500 text-2xl" data-v-af4a7d04>â†’</span>',3)])])]),e("div",ut,[n.value.length>0?(d(),u("div",ct,[e("div",{class:"flex items-center justify-between mb-3"},[a[8]||(a[8]=e("h3",{class:"text-base font-bold text-teal-600"},"æœ€è¿‘æœç´¢",-1)),e("button",{onClick:ke,class:"text-sm text-gray-500"},"æ¸…é™¤è®°å½•")]),e("div",vt,[(d(!0),u(z,null,j(n.value,r=>(d(),u("button",{key:r,onClick:i=>ue(r),class:"px-4 py-2 bg-white border border-gray-200 rounded-full text-sm text-gray-700 hover:border-teal-500 hover:bg-teal-50 hover:text-teal-600 transition flex items-center gap-2"},[a[9]||(a[9]=e("span",{class:"text-teal-500"},"ğŸ•",-1)),e("span",null,c(r),1)],8,pt))),128))])])):g("",!0),e("div",null,[a[11]||(a[11]=e("h3",{class:"text-base font-bold text-gray-800 mb-3"},"çƒ­é—¨æ¨è",-1)),e("div",ft,[(d(!0),u(z,null,j(ie.value,r=>(d(),u("div",{key:r.name,onClick:i=>ue(r.name),class:"bg-white border border-gray-200 rounded-2xl p-3 flex items-center gap-3 hover:border-teal-500 hover:shadow-md transition cursor-pointer"},[e("img",{src:r.image,alt:r.name,class:"w-16 h-16 rounded-xl object-cover"},null,8,xt),e("div",mt,[e("div",yt,[e("h4",bt,c(r.name),1),r.badge?(d(),u("span",ht,c(r.badge),1)):g("",!0)]),e("div",wt,[e("span",null,"ğŸ“ "+c(r.distance),1),a[10]||(a[10]=e("span",null,"â€¢",-1)),e("span",null,c(r.area),1)])])],8,gt))),128))])])])])),p.value?(d(),u("div",{key:2,class:"fixed inset-x-0 bottom-0 z-60 animate-slide-up",onClick:ce(ge,["self"])},[e("div",zt,[e("div",jt,[e("button",{onClick:ge,class:"absolute top-4 right-4 w-8 h-8 bg-black/60 rounded-full flex items-center justify-center text-white z-10"}," âœ• "),e("div",Lt,[e("img",{src:p.value.image,alt:p.value.name,class:"w-full h-full object-cover"},null,8,Tt),a[20]||(a[20]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"},null,-1)),e("div",It,[e("h3",Ft,c(p.value.name),1),e("div",Ut,[e("span",null,c(p.value.area),1),a[19]||(a[19]=e("span",null,"â€¢",-1)),e("span",null,c(p.value.distance),1)])])]),e("div",Bt,[e("div",Nt,[e("span",{class:ne(["px-3 py-1 rounded-full text-xs font-medium",p.value.difficulty==="å…¥é—¨"?"bg-green-50 text-green-600":p.value.difficulty==="ä¸­ç­‰"?"bg-yellow-50 text-yellow-600":"bg-red-50 text-red-600"])},c(p.value.difficulty)+"éš¾åº¦ ",3),e("span",Vt,c(p.value.visitors)+" äººå»è¿‡ ",1),p.value.badge?(d(),u("span",Ht,c(p.value.badge),1)):g("",!0)]),p.value.photos?(d(),u("div",Rt,[a[21]||(a[21]=e("h4",{class:"text-sm font-bold text-gray-800"},"ğŸ“· å®æ™¯å›¾",-1)),e("div",qt,[(d(!0),u(z,null,j(p.value.photos,(r,i)=>(d(),u("img",{key:i,src:r,class:"w-24 h-24 rounded-xl object-cover flex-shrink-0"},null,8,Et))),128))])])):g("",!0),e("button",{onClick:a[3]||(a[3]=r=>we(p.value.name)),class:"w-full py-4 bg-teal-500 text-white rounded-2xl font-bold text-base hover:bg-teal-600 transition"}," é€‰æ‹©æ­¤ç›®çš„åœ° ")])])])])):g("",!0)]))}}),Ot=De(Gt,[["__scopeId","data-v-af4a7d04"]]),Kt={class:"create-activity-page min-h-screen bg-gray-50 pb-32"},Jt={class:"bg-white border-b border-gray-100 sticky top-0 z-10"},Yt={class:"flex items-center justify-center relative px-4 py-4"},Zt={class:"text-lg font-bold text-gray-800"},Wt={class:"px-4 py-6 space-y-4"},Qt={class:"relative"},Xt={class:"grid grid-cols-2 gap-3"},es={class:"flex items-start justify-between"},ts={class:"flex-1"},ss={class:"font-semibold text-gray-800 mb-1"},as={class:"text-sm text-gray-500"},os={class:"bg-white border border-gray-200 rounded-2xl p-4"},ls={class:"flex gap-3"},ns=["onClick"],is={class:"mt-6"},rs={class:"flex items-center justify-center gap-6"},ds={class:"text-3xl font-bold text-gray-800"},us={class:"flex items-center justify-between mb-2"},cs={class:"text-xs text-gray-500"},vs={class:"flex gap-3 flex-wrap"},ps=["src"],fs={key:0,class:"absolute top-1 left-1 bg-teal-500 text-white text-xs px-2 py-0.5 rounded-full"},gs=["onClick"],xs={key:0,class:"w-24 h-24 border-2 border-dashed border-gray-300 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-teal-500 hover:bg-teal-50 transition"},ms={class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-4 pt-4 pb-6 z-40 shadow-top",style:{"padding-bottom":"max(24px, env(safe-area-inset-bottom))"}},ys={class:"flex gap-3"},bs=["disabled"],hs={class:"bg-white rounded-t-3xl w-full pb-safe animate-slide-up"},ws={class:"p-4 border-b border-gray-100"},ks={class:"text-center text-gray-600 mb-2"},_s={class:"p-4"},$s={class:"grid grid-cols-7 gap-2 mb-2"},Cs={class:"grid grid-cols-7 gap-2"},Ms=["onClick","disabled"],Ss={class:"px-4 pb-4"},Ds={class:"bg-white rounded-t-3xl w-full pb-safe animate-slide-up"},Ps={class:"p-6 flex justify-center items-center gap-4"},As=["value"],zs=["value"],js={class:"px-4 pb-4"},Ls={key:5,class:"fixed inset-0 bg-white z-[60]"},Ts={class:"h-full flex flex-col"},Is={class:"bg-white border-b border-gray-100 p-4"},Fs={class:"flex items-center gap-3"},Us={class:"flex-1 relative"},Bs={class:"flex-1 overflow-y-auto p-4"},Ns={key:0,class:"text-center py-12 text-gray-400"},Vs={key:1,class:"space-y-2"},Hs=["onClick"],Rs={class:"flex items-start gap-3"},qs={class:"flex-1 min-w-0"},Es={class:"font-semibold text-gray-800 mb-1"},Gs={class:"text-sm text-gray-500 truncate"},Os={class:"flex items-center gap-2 text-xs text-gray-400 mt-1"},Ks={key:0},Js={key:6,class:"fixed inset-0 bg-white z-[60]"},Ys={class:"h-full flex flex-col"},Zs={class:"bg-white border-b border-gray-100"},Ws={class:"flex items-center justify-center relative px-4 py-4"},Qs={class:"flex-1 overflow-y-auto p-4"},Xs={key:0,class:"text-center py-12 text-gray-400"},ea={key:1,class:"space-y-3"},ta=["onClick"],sa={class:"flex items-start justify-between gap-3"},aa={class:"flex items-start gap-3 flex-1 min-w-0"},oa={class:"flex-1 min-w-0"},la={class:"font-semibold text-gray-800 mb-1"},na={class:"text-sm text-gray-500"},ia={class:"flex items-center gap-2 text-xs text-gray-400 mt-2"},ra={key:0},da=["onClick"],ua={class:"bg-white rounded-3xl w-full max-w-sm p-6 animate-scale-in"},ca={class:"flex gap-3"},va=Me({__name:"CreateActivity",setup(_){const P=Fe(),R=Ue(),w=Be(),M=le(()=>w.loading),y=v(!1),D=v(null),l=v({title:"",destination:"",date:"",time:"",meetingPoint:"å¥¥æ—åŒ¹å…‹æ£®æ—å…¬å›­å—é—¨",meetingAddress:"åŒ—äº¬å¸‚æœé˜³åŒºç§‘èŸè·¯33å·",difficulty:"easy",maxParticipants:4,description:""}),L=async i=>{try{const t=await w.getActivityById(i);if(t){if(l.value.title=t.title,l.value.destination=t.location,l.value.difficulty=t.difficulty||"easy",l.value.maxParticipants=t.max_participants||4,l.value.description=t.description||"",t.start_time){const s=new Date(t.start_time),k=s.getFullYear(),I=String(s.getMonth()+1).padStart(2,"0"),V=String(s.getDate()).padStart(2,"0"),A=String(s.getHours()).padStart(2,"0"),B=String(s.getMinutes()).padStart(2,"0");l.value.date=`${k}-${I}-${V}`,l.value.time=`${A}:${B}`,n.value=s,E.value=A,T.value=B}t.photos&&t.photos.length>0?b.value=t.photos:t.cover_image_url&&(b.value=[t.cover_image_url]),m.success("æ´»åŠ¨æ•°æ®åŠ è½½æˆåŠŸ")}}catch(t){console.error("åŠ è½½æ´»åŠ¨æ•°æ®å¤±è´¥:",t),m.error("åŠ è½½æ´»åŠ¨æ•°æ®å¤±è´¥"),P.back()}};Se(async()=>{const i=R.query.id;i&&i!=="NaN"&&(y.value=!0,D.value=i,await L(i))});const N=[{value:"easy",label:"ç®€å•"},{value:"moderate",label:"ä¸­ç­‰"},{value:"hard",label:"å›°éš¾"}],b=v([]),Y=i=>{const t=i.target,s=t.files;if(s){const k=6-b.value.length;Array.from(s).slice(0,k).forEach(V=>{if(!V.type.startsWith("image/")){m.warning("è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶");return}if(V.size>5*1024*1024){m.warning("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MB");return}const A=new FileReader;A.onload=B=>{var X;(X=B.target)!=null&&X.result&&b.value.length<6&&b.value.push(B.target.result)},A.readAsDataURL(V)}),t.value=""}},S=i=>{b.value.splice(i,1)},h=()=>{l.value.maxParticipants>1&&l.value.maxParticipants--},$=()=>{l.value.maxParticipants<99&&l.value.maxParticipants++},F=v(!1),q=v(new Date().getFullYear()),f=v(new Date().getMonth()+1),n=v(null),x=["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"],p=le(()=>{if(!n.value)return"";const i=String(n.value.getMonth()+1).padStart(2,"0"),t=String(n.value.getDate()).padStart(2,"0");return`${i}-${t}`}),U=le(()=>{const i=q.value,t=f.value,s=new Date(i,t-1,1),I=new Date(i,t,0).getDate(),V=s.getDay(),A=[],B=new Date;B.setHours(0,0,0,0);const X=new Date(i,t-1,0).getDate();for(let C=V-1;C>=0;C--)A.push({day:X-C,isCurrentMonth:!1,disabled:!0,isPast:!0,key:`prev-${X-C}`});for(let C=1;C<=I;C++){const ee=new Date(i,t-1,C);ee.setHours(0,0,0,0);const Ce=ee<B,xe=n.value&&ee.getTime()===n.value.getTime();A.push({day:C,date:ee,isCurrentMonth:!0,disabled:!1,isPast:Ce,isSelected:xe,key:`current-${C}`})}const $e=42-A.length;for(let C=1;C<=$e;C++)A.push({day:C,isCurrentMonth:!1,disabled:!0,isPast:!1,key:`next-${C}`});return A}),ie=()=>{f.value===1?(f.value=12,q.value--):f.value--},ae=()=>{f.value===12?(f.value=1,q.value++):f.value++},ve=i=>{!i.disabled&&!i.isPast&&i.isCurrentMonth&&(n.value=i.date)},ye=()=>{if(n.value){const i=n.value.getFullYear(),t=String(n.value.getMonth()+1).padStart(2,"0"),s=String(n.value.getDate()).padStart(2,"0");l.value.date=`${i}-${t}-${s}`,F.value=!1}},Z=v(!1),E=v("08"),T=v("00"),be=()=>{l.value.time=`${E.value}:${T.value}`,Z.value=!1},W=v(!1),he=i=>{l.value.destination=i,W.value=!1},oe=v(!1),G=v(!1),re=v(!1),O=v(""),K=v(!1),de=v({name:"æ¾æ—å¡åœè½¦åœºå…¥å£",address:"åŒ—äº¬å¸‚æ˜Œå¹³åŒºåä¸‰é™µé•‡åä¸‰é™µæ°´åº“è·¯ 168 å·é™¢"}),pe=v([{id:"1",name:"å¥¥æ—åŒ¹å…‹æ£®æ—å…¬å›­å—é—¨",address:"åŒ—äº¬å¸‚æœé˜³åŒºç§‘èŸè·¯33å·",distance:"è·ç¦» 2.5 km",category:"å…¬å›­"},{id:"2",name:"æ¾æ—å¡åœè½¦åœºå…¥å£",address:"åŒ—äº¬å¸‚æ˜Œå¹³åŒºåä¸‰é™µé•‡åä¸‰é™µæ°´åº“è·¯ 168 å·é™¢",distance:"è·ç¦» 5.3 km",category:"åœè½¦åœº"},{id:"3",name:"é¦™å±±å…¬å›­ä¸œé—¨",address:"åŒ—äº¬å¸‚æµ·æ·€åŒºä¹°å–è¡—40å·",distance:"è·ç¦» 8.7 km",category:"å…¬å›­"},{id:"4",name:"é¢å’Œå›­åŒ—å®«é—¨",address:"åŒ—äº¬å¸‚æµ·æ·€åŒºæ–°å»ºå®«é—¨è·¯19å·",distance:"è·ç¦» 6.2 km",category:"æ™¯åŒº"},{id:"5",name:"å…«è¾¾å²­é•¿åŸæ¸¸å®¢ä¸­å¿ƒ",address:"åŒ—äº¬å¸‚å»¶åº†åŒºG6äº¬è—é«˜é€Ÿ58å·å‡ºå£",distance:"è·ç¦» 45.8 km",category:"æ™¯åŒº"},{id:"6",name:"ç™¾æœ›å±±æ£®æ—å…¬å›­",address:"åŒ—äº¬å¸‚æµ·æ·€åŒºé»‘å±±æ‰ˆåŒ—å£19å·",distance:"è·ç¦» 7.1 km",category:"å…¬å›­"}]),Q=v([{id:"1",name:"å¥¥æ—åŒ¹å…‹æ£®æ—å…¬å›­å—é—¨",address:"åŒ—äº¬å¸‚æœé˜³åŒºç§‘èŸè·¯33å·",distance:"è·ç¦» 2.5 km",category:"å…¬å›­"},{id:"3",name:"é¦™å±±å…¬å›­ä¸œé—¨",address:"åŒ—äº¬å¸‚æµ·æ·€åŒºä¹°å–è¡—40å·",distance:"è·ç¦» 8.7 km",category:"å…¬å›­"}]),fe=le(()=>{if(!O.value.trim())return pe.value;const i=O.value.toLowerCase();return pe.value.filter(t=>{var s;return t.name.toLowerCase().includes(i)||t.address.toLowerCase().includes(i)||((s=t.category)==null?void 0:s.toLowerCase().includes(i))})});le(()=>Q.value.some(i=>i.name===de.value.name));const ge=i=>{de.value={name:i.name,address:i.address},G.value=!1},we=i=>{de.value={name:i.name,address:i.address},re.value=!1},ue=i=>{const t=Q.value.findIndex(s=>s.id===i);t>=0&&Q.value.splice(t,1)},ke=i=>{l.value.meetingPoint=i.name,l.value.meetingAddress=i.address,oe.value=!1},_e=()=>{K.value=!0},o=()=>{K.value=!1,P.back()},a=async()=>{if(!l.value.title){m.warning("è¯·è¾“å…¥æ´»åŠ¨åç§°");return}if(!l.value.destination){m.warning("è¯·é€‰æ‹©ç›®çš„åœ°ç‚¹");return}if(!l.value.date){m.warning("è¯·é€‰æ‹©æ´»åŠ¨æ—¥æœŸ");return}if(!l.value.time){m.warning("è¯·é€‰æ‹©æ´»åŠ¨æ—¶é—´");return}if(!l.value.difficulty){m.warning("è¯·é€‰æ‹©éš¾åº¦ç­‰çº§");return}try{const i=`${l.value.date}T${l.value.time}:00`,t=new Date(i),s=new Date(t.getTime()+4*60*60*1e3),k=s.getFullYear(),I=String(s.getMonth()+1).padStart(2,"0"),V=String(s.getDate()).padStart(2,"0"),A=String(s.getHours()).padStart(2,"0"),B=String(s.getMinutes()).padStart(2,"0"),X=String(s.getSeconds()).padStart(2,"0"),$e=`${k}-${I}-${V}T${A}:${B}:${X}`,ee=b.value.length>0?b.value:["https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&h=600&fit=crop"],Ce=ee[0],xe={title:l.value.title,description:l.value.description||`${l.value.title} - æ¬¢è¿åŠ å…¥!`,location:l.value.destination,start_time:i,end_time:$e,difficulty:l.value.difficulty,max_participants:l.value.maxParticipants,cover_image_url:Ce,photos:ee};let me=!1;y.value&&D.value?(me=!!await w.updateActivity(D.value,xe),me?(m.success("æ´»åŠ¨ä¿®æ”¹æˆåŠŸï¼"),P.push("/my-hiking?tab=created")):m.error("ä¿®æ”¹å¤±è´¥: "+w.error)):(me=!!await w.createActivity(xe),me?(m.success("æ´»åŠ¨å‘å¸ƒæˆåŠŸï¼"),P.push("/my-hiking?tab=created")):m.error("å‘å¸ƒå¤±è´¥: "+w.error))}catch(i){console.error("æäº¤æ´»åŠ¨å¤±è´¥:",i),m.error(y.value?"ä¿®æ”¹æ´»åŠ¨å¤±è´¥":"å‘å¸ƒæ´»åŠ¨å¤±è´¥")}},r=()=>{P.back()};return(i,t)=>(d(),u("div",Kt,[e("div",Jt,[e("div",Yt,[e("button",{onClick:r,class:"absolute left-4 w-10 h-10 flex items-center justify-center"},[...t[22]||(t[22]=[e("span",{class:"text-2xl"},"â†",-1)])]),e("h1",Zt,c(y.value?"ç¼–è¾‘æ´»åŠ¨":"åˆ›å»ºå¾’æ­¥æ´»åŠ¨"),1)])]),e("div",Wt,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"æ´»åŠ¨åç§°",-1)),H(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.title=s),type:"text",placeholder:"è¯·è¾“å…¥æ´»åŠ¨åç§°",class:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent"},null,512),[[se,l.value.title]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ç›®çš„åœ°ç‚¹",-1)),e("div",Qt,[H(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.destination=s),type:"text",placeholder:"æœç´¢æˆ–è¾“å…¥åœ°ç‚¹",readonly:"",onClick:t[2]||(t[2]=s=>W.value=!0),class:"w-full px-4 py-3 pr-12 bg-white border border-gray-200 rounded-2xl focus:outline-none cursor-pointer"},null,512),[[se,l.value.destination]]),e("button",{onClick:t[3]||(t[3]=s=>W.value=!0),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-teal-500 text-xl"}," ğŸ” ")])]),e("div",Xt,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"æ—¥æœŸ",-1)),e("div",{onClick:t[4]||(t[4]=s=>F.value=!0),class:"flex items-center justify-between px-4 py-3 bg-white border border-gray-200 rounded-2xl cursor-pointer"},[e("span",{class:ne(l.value.date?"text-gray-800":"text-gray-400")},c(l.value.date||"é€‰æ‹©æ—¥æœŸ"),3),t[25]||(t[25]=e("span",{class:"text-teal-500 text-xl"},"ğŸ“…",-1))])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"æ—¶é—´",-1)),e("div",{onClick:t[5]||(t[5]=s=>Z.value=!0),class:"flex items-center justify-between px-4 py-3 bg-white border border-gray-200 rounded-2xl cursor-pointer"},[e("span",{class:ne(l.value.time?"text-gray-800":"text-gray-400")},c(l.value.time||"é€‰æ‹©æ—¶é—´"),3),t[27]||(t[27]=e("span",{class:"text-teal-500 text-xl"},"ğŸ•",-1))])])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"é›†åˆåœ°ç‚¹",-1)),e("div",{onClick:t[6]||(t[6]=s=>oe.value=!0),class:"bg-white border border-gray-200 rounded-2xl p-4 cursor-pointer hover:border-teal-500 transition"},[e("div",es,[e("div",ts,[e("h3",ss,c(l.value.meetingPoint||"ç‚¹å‡»é€‰æ‹©é›†åˆåœ°ç‚¹"),1),e("p",as,c(l.value.meetingAddress||"é€‰æ‹©æ´»åŠ¨é›†åˆçš„å…·ä½“ä½ç½®"),1)]),t[29]||(t[29]=e("button",{class:"ml-3 text-teal-500 text-2xl"},"ğŸ“",-1))])])]),e("div",os,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"éš¾åº¦ç­‰çº§",-1)),e("div",ls,[(d(),u(z,null,j(N,s=>e("button",{key:s.value,onClick:k=>l.value.difficulty=s.value,type:"button",class:ne(["flex-1 py-3 rounded-full font-medium text-base transition",l.value.difficulty===s.value?"bg-teal-500 text-white":"bg-gray-100 text-gray-700"])},c(s.label),11,ns)),64))]),e("div",is,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"æ‰€éœ€äººæ•°",-1)),e("div",rs,[e("button",{onClick:h,type:"button",class:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-2xl text-gray-600 hover:bg-gray-200 transition"}," âˆ’ "),e("span",ds,c(l.value.maxParticipants)+"äºº",1),e("button",{onClick:$,type:"button",class:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-2xl text-teal-500 hover:bg-teal-50 transition"}," + ")])])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"æ´»åŠ¨æè¿°",-1)),H(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.description=s),placeholder:"ç®€å•ä»‹ç»ä¸€ä¸‹æ´»åŠ¨å§...",class:"w-full px-4 py-3 bg-white border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent min-h-[120px] resize-none"},null,512),[[se,l.value.description]])]),e("div",null,[e("div",us,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700"},"ä¸Šä¼ ç…§ç‰‡",-1)),e("span",cs,c(b.value.length)+"/6å¼  Â· ç¬¬ä¸€å¼ ä¸ºå°é¢",1)]),e("div",vs,[(d(!0),u(z,null,j(b.value,(s,k)=>(d(),u("div",{key:k,class:"relative w-24 h-24 rounded-2xl overflow-hidden group"},[e("img",{src:s,alt:"Uploaded",class:"w-full h-full object-cover"},null,8,ps),k===0?(d(),u("div",fs," å°é¢ ")):g("",!0),e("button",{onClick:I=>S(k),class:"absolute top-1 right-1 w-6 h-6 bg-black/70 rounded-full flex items-center justify-center text-white text-sm opacity-0 group-hover:opacity-100 transition-opacity"}," âœ• ",8,gs)]))),128)),b.value.length<6?(d(),u("label",xs,[e("input",{type:"file",accept:"image/*",multiple:"",onChange:Y,class:"hidden"},null,32),t[35]||(t[35]=e("span",{class:"text-3xl text-teal-500"},"ğŸ–¼ï¸",-1)),t[36]||(t[36]=e("span",{class:"text-xs text-gray-500 mt-1"},"æ·»åŠ ç…§ç‰‡",-1))])):g("",!0)]),t[37]||(t[37]=e("p",{class:"text-xs text-gray-400 mt-2"}," æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæœ€å¤š 6 å¼ ï¼Œç¬¬ä¸€å¼ å°†ä½œä¸ºæ´»åŠ¨å°é¢ ",-1))])]),e("div",ms,[e("div",ys,[y.value?(d(),u("button",{key:0,onClick:_e,class:"flex-1 py-4 bg-gray-200 text-gray-700 rounded-2xl font-bold text-lg hover:bg-gray-300 transition shadow-lg"}," å–æ¶ˆ ")):g("",!0),e("button",{onClick:a,disabled:M.value,class:ne(["py-4 rounded-2xl font-bold text-lg transition shadow-lg",y.value?"flex-1 bg-teal-500 text-white hover:bg-teal-600":"w-full bg-teal-500 text-white hover:bg-teal-600","disabled:opacity-50 disabled:cursor-not-allowed"])},c(M.value?"å¤„ç†ä¸­...":y.value?"ä¿å­˜ä¿®æ”¹":"å‘å¸ƒæ´»åŠ¨"),11,bs)])]),F.value?(d(),u("div",{key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-end",onClick:t[8]||(t[8]=ce(s=>F.value=!1,["self"]))},[e("div",hs,[e("div",ws,[e("div",{class:"flex items-center justify-between mb-4"},[e("button",{onClick:ie,class:"text-teal-500 text-xl"},"â†"),t[38]||(t[38]=e("h3",{class:"text-lg font-bold text-gray-800"},"é€‰æ‹©æ´»åŠ¨æ—¥æœŸ",-1)),e("button",{onClick:ae,class:"text-teal-500 text-xl"},"â†’")]),e("div",ks,c(q.value)+"å¹´"+c(f.value)+"æœˆ",1)]),e("div",_s,[e("div",$s,[(d(),u(z,null,j(x,s=>e("div",{key:s,class:"text-center text-sm text-gray-500 py-2"},c(s),1)),64))]),e("div",Cs,[(d(!0),u(z,null,j(U.value,s=>(d(),u("button",{key:s.key,onClick:k=>ve(s),disabled:s.disabled||s.isPast,class:ne(["aspect-square flex items-center justify-center rounded-full text-base transition",s.isCurrentMonth?"text-gray-800":"text-gray-300",s.isSelected?"bg-teal-500 text-white font-bold":"",!s.isSelected&&s.isCurrentMonth&&!s.disabled&&!s.isPast?"hover:bg-gray-100":"",s.disabled||s.isPast?"opacity-30 cursor-not-allowed":""])},c(s.day),11,Ms))),128))])]),e("div",Ss,[e("button",{onClick:ye,class:"w-full py-4 bg-teal-500 text-white rounded-2xl font-bold text-base hover:bg-teal-600 transition"}," ç¡®å®šæ—¥æœŸ"+c(p.value?` (${p.value})`:""),1)])])])):g("",!0),Z.value?(d(),u("div",{key:1,class:"fixed inset-0 bg-black/50 z-50 flex items-end",onClick:t[11]||(t[11]=ce(s=>Z.value=!1,["self"]))},[e("div",Ds,[t[40]||(t[40]=e("div",{class:"p-4 border-b border-gray-100"},[e("h3",{class:"text-lg font-bold text-gray-800 text-center"},"é€‰æ‹©æ—¶é—´")],-1)),e("div",Ps,[H(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>E.value=s),class:"text-3xl font-bold text-gray-800 bg-transparent border-b-2 border-teal-500 px-4 py-2 focus:outline-none"},[(d(),u(z,null,j(24,s=>e("option",{key:s,value:String(s-1).padStart(2,"0")},c(String(s-1).padStart(2,"0")),9,As)),64))],512),[[ze,E.value]]),t[39]||(t[39]=e("span",{class:"text-3xl font-bold text-gray-800"},":",-1)),H(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>T.value=s),class:"text-3xl font-bold text-gray-800 bg-transparent border-b-2 border-teal-500 px-4 py-2 focus:outline-none"},[(d(),u(z,null,j(60,s=>e("option",{key:s,value:String(s-1).padStart(2,"0")},c(String(s-1).padStart(2,"0")),9,zs)),64))],512),[[ze,T.value]])]),e("div",js,[e("button",{onClick:be,class:"w-full py-4 bg-teal-500 text-white rounded-2xl font-bold text-base hover:bg-teal-600 transition"}," ç¡®å®šæ—¶é—´ ("+c(E.value)+":"+c(T.value)+") ",1)])])])):g("",!0),W.value?(d(),Ae(Ot,{key:2,onClose:t[12]||(t[12]=s=>W.value=!1),onSelect:he})):g("",!0),oe.value?(d(),Ae(at,{key:3,onClose:t[13]||(t[13]=s=>oe.value=!1),onConfirm:ke})):g("",!0),g("",!0),G.value?(d(),u("div",Ls,[e("div",Ts,[e("div",Is,[e("div",Fs,[e("button",{onClick:t[17]||(t[17]=s=>G.value=!1),class:"text-2xl text-gray-700"}," â† "),e("div",Us,[t[45]||(t[45]=e("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-xl"},"ğŸ”",-1)),H(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>O.value=s),type:"text",placeholder:"æœç´¢é›†åˆåœ°ç‚¹",class:"w-full pl-12 pr-4 py-3 bg-gray-100 rounded-2xl focus:outline-none focus:ring-2 focus:ring-teal-500",autofocus:""},null,512),[[se,O.value]])])])]),e("div",Bs,[fe.value.length===0?(d(),u("div",Ns,[t[46]||(t[46]=e("div",{class:"text-5xl mb-3"},"ğŸ”",-1)),e("p",null,c(O.value?"æœªæ‰¾åˆ°ç›¸å…³åœ°ç‚¹":"è¾“å…¥å…³é”®è¯æœç´¢åœ°ç‚¹"),1)])):(d(),u("div",Vs,[(d(!0),u(z,null,j(fe.value,s=>(d(),u("div",{key:s.id,onClick:k=>ge(s),class:"bg-white border border-gray-200 rounded-2xl p-4 hover:border-teal-500 hover:shadow-md transition cursor-pointer"},[e("div",Rs,[t[47]||(t[47]=e("div",{class:"w-10 h-10 bg-teal-50 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-xl"},"ğŸ“")],-1)),e("div",qs,[e("h4",Es,c(s.name),1),e("p",Gs,c(s.address),1),e("div",Os,[e("span",null,c(s.distance),1),s.category?(d(),u("span",Ks,"â€¢ "+c(s.category),1)):g("",!0)])])])],8,Hs))),128))]))])])])):g("",!0),re.value?(d(),u("div",Js,[e("div",Ys,[e("div",Zs,[e("div",Ws,[e("button",{onClick:t[19]||(t[19]=s=>re.value=!1),class:"absolute left-4 text-2xl text-gray-700"}," â† "),t[48]||(t[48]=e("h2",{class:"text-lg font-bold text-gray-800"},"æˆ‘çš„æ”¶è—",-1))])]),e("div",Qs,[Q.value.length===0?(d(),u("div",Xs,[...t[49]||(t[49]=[e("div",{class:"text-5xl mb-3"},"ğŸ“‘",-1),e("p",{class:"text-base"},"æš‚æ— æ”¶è—åœ°ç‚¹",-1),e("p",{class:"text-sm mt-2"},"ç‚¹å‡»åœ°ç‚¹å³ä¸Šè§’æ˜Ÿæ ‡å³å¯æ”¶è—",-1)])])):(d(),u("div",ea,[(d(!0),u(z,null,j(Q.value,s=>(d(),u("div",{key:s.id,onClick:k=>we(s),class:"bg-white border border-gray-200 rounded-2xl p-4 hover:border-teal-500 hover:shadow-md transition cursor-pointer"},[e("div",sa,[e("div",aa,[t[50]||(t[50]=e("div",{class:"w-12 h-12 bg-teal-50 rounded-xl flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-2xl"},"ğŸ“")],-1)),e("div",oa,[e("h4",la,c(s.name),1),e("p",na,c(s.address),1),e("div",ia,[e("span",null,c(s.distance),1),s.category?(d(),u("span",ra,"â€¢ "+c(s.category),1)):g("",!0)])])]),e("button",{onClick:ce(k=>ue(s.id),["stop"]),class:"text-2xl flex-shrink-0"}," â­ ",8,da)])],8,ta))),128))]))])])])):g("",!0),K.value?(d(),u("div",{key:7,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center px-4",onClick:t[21]||(t[21]=ce(s=>K.value=!1,["self"]))},[e("div",ua,[t[51]||(t[51]=e("div",{class:"text-center mb-6"},[e("div",{class:"text-5xl mb-4"},"âš ï¸"),e("h3",{class:"text-xl font-bold text-gray-800 mb-2"},"ç¡®å®šæ”¾å¼ƒä¿®æ”¹å—ï¼Ÿ"),e("p",{class:"text-gray-500 text-sm"},"å·²ä¿®æ”¹çš„å†…å®¹å°†ä¸ä¼šä¿å­˜")],-1)),e("div",ca,[e("button",{onClick:t[20]||(t[20]=s=>K.value=!1),class:"flex-1 py-3 bg-gray-100 text-gray-700 rounded-2xl font-medium hover:bg-gray-200 transition"}," ç»§ç»­ç¼–è¾‘ "),e("button",{onClick:o,class:"flex-1 py-3 bg-red-500 text-white rounded-2xl font-medium hover:bg-red-600 transition"}," æ”¾å¼ƒä¿®æ”¹ ")])])])):g("",!0)]))}}),ya=De(va,[["__scopeId","data-v-4d682e12"]]);export{ya as default};
