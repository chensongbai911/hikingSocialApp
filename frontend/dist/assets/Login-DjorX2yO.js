import{k as w,J as _,E as k,r as d,l as q,F as V,v as p,q as m,z as s,K as M,x as N,A as c,L as v,M as f,N as b,s as S,u as h}from"./vue-Dq4PaVdn.js";import{u as C,i as L,t as i,_ as B}from"./index-B8D5talc.js";import"./state-COm4LJOs.js";const U={class:"login-container"},D={class:"login-card"},E={key:0,class:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm"},R=["disabled"],T={class:"text-center mt-4"},z=w({__name:"Login",setup(A){const y=_(),t=k(),u=C(),a=d(!1),o=d(""),r=d({email:"",password:""});q(()=>{t.query.email&&(r.value.email=t.query.email),t.query.password&&(r.value.password=t.query.password)});const g=async()=>{a.value=!0,o.value="";try{await u.login(r.value)?(L(),i.success("登录成功"),y.push("/discover")):(o.value=u.error||"登录失败，请检查邮箱和密码",i.error(o.value))}catch(l){console.error("登录失败:",l),o.value="登录失败，请重试",i.error(o.value)}finally{a.value=!1}};return(l,e)=>{const x=V("router-link");return m(),p("div",U,[s("div",D,[e[6]||(e[6]=s("h1",{class:"text-2xl font-bold mb-6 text-center"},"登录",-1)),s("form",{onSubmit:M(g,["prevent"]),class:"space-y-4"},[o.value?(m(),p("div",E,c(o.value),1)):N("",!0),s("div",null,[e[2]||(e[2]=s("label",{for:"email",class:"block text-sm font-medium mb-2"},"邮箱",-1)),v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>r.value.email=n),type:"email",id:"email",placeholder:"请输入邮箱",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary",required:""},null,512),[[f,r.value.email]])]),s("div",null,[e[3]||(e[3]=s("label",{for:"password",class:"block text-sm font-medium mb-2"},"密码",-1)),v(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>r.value.password=n),type:"password",id:"password",placeholder:"请输入密码",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-primary",required:""},null,512),[[f,r.value.password]])]),s("button",{type:"submit",disabled:a.value,class:"w-full bg-primary text-white py-2 rounded-lg hover:bg-secondary disabled:opacity-50"},c(a.value?"登录中...":"登录"),9,R)],32),s("p",T,[e[5]||(e[5]=b(" 没有账号？ ",-1)),S(x,{to:"/register",class:"text-primary hover:underline"},{default:h(()=>[...e[4]||(e[4]=[b(" 立即注册 ",-1)])]),_:1})])])])}}}),K=B(z,[["__scopeId","data-v-a0a12f4d"]]);export{K as default};
