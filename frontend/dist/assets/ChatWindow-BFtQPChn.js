import{k as De,J as Re,E as je,r as c,d as Be,l as We,w as ze,W as Ae,v as r,q as i,z as a,x as k,y as b,A as C,O as de,P as ve,K as R,L as Le,M as $e,X as Ee,n as ge,G as L}from"./vue-Dq4PaVdn.js";import{a as V,u as Pe,s as N,c as pe,t as f,d as Oe,b as Fe,e as fe,f as He,h as Ve,r as Ne,j as Ke}from"./index-B8D5talc.js";import"./state-COm4LJOs.js";const qe={async uploadImage(x){const u=new FormData;return u.append("image",x),V.post("/upload/image",u,{headers:{"Content-Type":"multipart/form-data"}})},async uploadAvatar(x){const u=new FormData;return u.append("avatar",x),V.post("/upload/avatar",u,{headers:{"Content-Type":"multipart/form-data"}})},async uploadPhotos(x){const u=new FormData;return x.forEach(I=>{u.append("photos",I)}),V.post("/upload/photos",u,{headers:{"Content-Type":"multipart/form-data"}})},async uploadActivityCover(x){const u=new FormData;return u.append("cover",x),V.post("/upload/activity-cover",u,{headers:{"Content-Type":"multipart/form-data"}})},async uploadMessageImage(x){const u=new FormData;return u.append("image",x),V.post("/upload/message-image",u,{headers:{"Content-Type":"multipart/form-data"}})}},Ge={class:"fixed inset-0 bg-white flex flex-col z-50",style:{"max-height":"100dvh"}},Je={class:"bg-white border-b border-gray-100 p-4 flex items-center space-x-3 flex-shrink-0"},Xe={class:"relative flex-shrink-0"},Qe=["src","alt"],Ye={class:"flex-1 min-w-0"},Ze={class:"font-semibold text-gray-900 truncate text-base"},et={class:"text-xs truncate flex items-center space-x-1"},tt={key:0,class:"text-red-500"},st={key:0,class:"flex items-center space-x-2"},nt={class:"text-xs text-amber-700 bg-amber-100 px-2 py-1 rounded-full"},at={key:0,class:"bg-red-50 text-red-600 text-sm px-4 py-2"},lt={key:1,class:"bg-red-50 text-red-600 text-sm px-4 py-2"},ot={key:2,class:"bg-amber-50 text-amber-700 text-sm px-4 py-2"},rt={key:0,class:"text-center text-gray-400 py-8"},it={key:1,class:"flex flex-col items-center justify-center py-16"},ct=["src","alt"],ut={class:"break-words"},dt={key:1,class:"rounded-2xl overflow-hidden"},vt=["src","onClick"],gt={key:2,class:"text-xs text-gray-400 px-3 py-2"},pt={class:"mt-1 text-xs text-gray-400"},ft={class:"flex items-center justify-between"},ht=["onClick"],mt=["onClick"],xt={key:2,class:"text-xs text-gray-500 mt-2"},wt={class:"bg-white border-t border-gray-100 p-4 flex-shrink-0 pb-6"},yt=["onClick"],kt={class:"flex items-end space-x-1.5"},_t={class:"flex-1 bg-gray-50 rounded-2xl flex items-center min-w-0"},bt=["disabled"],Ct={key:1,class:"mt-3 text-center"},It={class:"inline-flex items-center space-x-2 bg-red-50 text-red-600 px-4 py-2 rounded-full"},Mt={class:"text-sm font-medium"},Ut=["src"],Rt=De({__name:"ChatWindow",setup(x){const u=Re(),I=je(),X=I==null?void 0:I.state,w=Pe(),h=c(I.params.id),j=c(""),K=c(),ee=c(),$=c(),S=c(!1),M=c(!1),B=c(0),E=c(null),W=c(!1),y=c(void 0),U=c(!1),q=c(new Set);let z=null,T=null,te=0;const p=c([]),P=c(1),O=c(1),G=c(!1),Q=c(!0),F=c(""),se=e=>p.value.some(t=>t.id===e),v=c({id:"",name:"å¯¹æ–¹",avatar:"",isOnline:!0}),he=["ğŸ˜Š","ğŸ˜‚","â¤ï¸","ğŸ‘","ğŸ™","ğŸ˜","ğŸ˜­","ğŸ¤”","ğŸ‘","ğŸ‰","ğŸ”¥","ğŸ’ª","ğŸŒŸ","âœ¨","ğŸŒˆ","ğŸŒ¸","ğŸŒº","ğŸŒ»","ğŸŒ","ğŸŒ™","â­","ğŸ’«","âœ…","âŒ"],ne=async()=>{var t;const e=I.params.id;if(h.value=e,!h.value){f.error("æ— æ•ˆçš„å¯¹è¯"),u.push({name:"Messages"});return}try{Q.value=!0,F.value="";const s=await Oe(e),{otherUserId:g,isLimited:n,remainingMessages:o,isBlacklisted:D}=s||{},_=g||e;v.value.id=_;try{console.log("[ChatWindow] è·å–ç”¨æˆ·èµ„æ–™:",_);const l=await Fe.getUserProfile(_);console.log("[ChatWindow] ç”¨æˆ·èµ„æ–™å“åº”:",l);const m=((t=l==null?void 0:l.data)==null?void 0:t.data)||(l==null?void 0:l.data)||l;m?(v.value.name=m.nickname||m.name||m.email||`ç”¨æˆ·${_.slice(-4)}`,v.value.avatar=m.avatar_url||m.avatar||v.value.avatar,v.value.isOnline=m.is_online??m.isOnline??!1,console.log("[ChatWindow] ç”¨æˆ·ä¿¡æ¯å·²è®¾ç½®:",v.value)):(console.warn("[ChatWindow] ç”¨æˆ·æ•°æ®ä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤å€¼"),v.value.name=`ç”¨æˆ·${_.slice(-4)}`)}catch(l){if(console.error("[ChatWindow] è·å–å¯¹æ–¹èµ„æ–™å¤±è´¥:",l),v.value.name=`ç”¨æˆ·${_.slice(-4)}`,(l==null?void 0:l.code)!==4001&&(l==null?void 0:l.code)!==404)throw l}W.value=!!n,y.value=o,U.value=!!D,console.log("[ChatWindow] å¯¹è¯é™åˆ¶ä¿¡æ¯:",{isLimited:W.value,remainingMessages:y.value,isBlacklisted:U.value});const d=await fe(e),A=(d==null?void 0:d.messages)||d||[];console.log("[ChatWindow] è·å–æ¶ˆæ¯åˆ—è¡¨:",{total:d==null?void 0:d.total,count:A.length,messages:A}),d!=null&&d.pagination?O.value=d.pagination.totalPages||1:d!=null&&d.totalPages&&(O.value=d.totalPages),P.value=1,p.value=A.map(l=>({id:String(l.id),content:l.content||l.imageUrl||l.image_url||l.fileUrl||l.file_url||"",contentType:l.contentType||l.content_type||"text",senderId:String(l.senderId||l.sender_id),createdAt:l.createdAt||l.created_at,isRecalled:l.isRecalled||l.is_recalled,imageUrl:l.imageUrl||l.image_url,fileUrl:l.fileUrl||l.file_url})),console.log("[ChatWindow] è½¬æ¢åçš„æ¶ˆæ¯:",p.value),await pe(h.value),J()}catch(s){F.value=(s==null?void 0:s.message)||"åŠ è½½å¤±è´¥",f.error(F.value)}finally{Q.value=!1}},me=()=>{(X==null?void 0:X.from)==="messages"?u.push({name:"Messages"}):u.back()},Y=async(e="text",t)=>{var g;if(U.value){f.warning("ä½ å·²è¢«å¯¹æ–¹æ‹‰é»‘ï¼Œæ— æ³•å‘é€");return}if(W.value&&y.value!==void 0&&y.value<=0){f.warning("æœªäº’å…³ä»…å¯å‘é€3æ¡æ¶ˆæ¯ï¼Œå·²è¾¾ä¸Šé™");return}const s=j.value.trim();if(!(e==="text"&&!s))try{const n=await He(h.value,e==="text"?s:"",e,t==null?void 0:t.imageUrl,void 0);console.log("[ChatWindow] å‘é€æ¶ˆæ¯å“åº”:",n);const o=(n==null?void 0:n.message)||((g=n==null?void 0:n.data)==null?void 0:g.message)||n;if(console.log("[ChatWindow] æå–çš„æ¶ˆæ¯å¯¹è±¡:",o),o&&!se(String(o.id))){const D={id:String(o.id),content:o.content||o.imageUrl||o.image_url||o.fileUrl||o.file_url||"",contentType:o.contentType||o.content_type||e,senderId:String(o.senderId||o.sender_id||w.userId),createdAt:o.createdAt||o.created_at||new Date().toISOString(),isRecalled:o.isRecalled||o.is_recalled||!1,imageUrl:o.imageUrl||o.image_url,fileUrl:o.fileUrl||o.file_url};console.log("[ChatWindow] æ·»åŠ æ–°æ¶ˆæ¯åˆ°åˆ—è¡¨:",D),p.value.push(D)}(n==null?void 0:n.remainingMessages)!==void 0&&(y.value=n.remainingMessages,console.log("[ChatWindow] æ›´æ–°å‰©ä½™æ¶ˆæ¯æ•°:",y.value)),e==="text"&&(j.value=""),le(),await ge(),J()}catch(n){console.error("[ChatWindow] å‘é€æ¶ˆæ¯å¤±è´¥:",n),f.error((n==null?void 0:n.message)||"å‘é€å¤±è´¥")}},ae=Be(()=>{const e=W.value&&y.value!==void 0&&y.value<=0,t=!j.value.trim();return U.value||e||t}),xe=async e=>{var g;const t=e.target.files;if(!t||!t.length)return;const s=t[0];if(s.size>10*1024*1024){f.warning("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡10MB"),e.target.value="";return}try{const n=await qe.uploadImage(s),o=((g=n==null?void 0:n.data)==null?void 0:g.url)||(n==null?void 0:n.url);if(!o)throw new Error("ä¸Šä¼ å¤±è´¥");await Y("image",{imageUrl:o})}catch(n){f.error((n==null?void 0:n.message)||"ä¸Šä¼ å¤±è´¥")}finally{e.target.value=""}},we=async e=>{try{await Ne(e),p.value=p.value.map(t=>t.id===e?{...t,isRecalled:!0}:t),f.success("å·²æ’¤å›")}catch(t){f.error((t==null?void 0:t.message)||"æ’¤å›å¤±è´¥")}},ye=async e=>{try{await Ke(e,"inappropriate"),f.success("å·²ä¸¾æŠ¥")}catch(t){f.error((t==null?void 0:t.message)||"ä¸¾æŠ¥å¤±è´¥")}},ke=async()=>{try{await Ve(h.value),p.value=[],f.success("å·²æ¸…ç©ºå¹¶å½’æ¡£")}catch(e){f.error((e==null?void 0:e.message)||"æ¸…ç©ºå¤±è´¥")}},J=()=>{ge(()=>{K.value&&(K.value.scrollTop=K.value.scrollHeight)})},_e=async()=>{if(!(G.value||P.value>=O.value))try{G.value=!0;const e=P.value+1,t=await fe(h.value,e);t!=null&&t.pagination&&(O.value=t.pagination.totalPages||1);const g=((t==null?void 0:t.messages)||(t==null?void 0:t.items)||[]).map(n=>({id:String(n.id),content:n.content||n.imageUrl||n.image_url||n.fileUrl||n.file_url||"",contentType:n.contentType||n.content_type||"text",senderId:String(n.senderId||n.sender_id),createdAt:n.createdAt||n.created_at,isRecalled:n.isRecalled||n.is_recalled,imageUrl:n.imageUrl||n.image_url,fileUrl:n.fileUrl||n.file_url}));p.value.unshift(...g),P.value=e}catch(e){console.error("[ChatWindow] åŠ è½½æ›´å¤šæ¶ˆæ¯å¤±è´¥:",e)}finally{G.value=!1}},be=e=>{const t=e.target;t&&t.scrollTop<100&&!G.value&&P.value<O.value&&_e()},Ce=e=>{const s=new Date().getTime()-e.getTime();return s<6e4?"åˆšåˆš":s<36e5?`${Math.floor(s/6e4)}åˆ†é’Ÿå‰`:s<864e5?e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}):e.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})},le=()=>{if($.value){$.value.style.height="auto";const e=Math.min($.value.scrollHeight,128);$.value.style.height=`${e}px`}},oe=e=>{N.sendTyping(h.value,e)},Ie=()=>{oe(!0),z&&window.clearTimeout(z),z=window.setTimeout(()=>oe(!1),1500)},re=()=>{le(),Ie()},ie=()=>{S.value&&(S.value=!1)},Me=()=>{var e;return(e=ee.value)==null?void 0:e.click()},Ue=e=>{j.value+=e,re()},Se=()=>{S.value=!S.value},ce=()=>{M.value||(M.value=!0,te=Date.now(),B.value=0,T=window.setInterval(()=>{B.value=Math.floor((Date.now()-te)/1e3),B.value>=60&&Z()},200))},Z=()=>{M.value&&(M.value=!1,T&&(clearInterval(T),T=null),B.value=0)},ue=()=>{M.value&&(M.value=!1,T&&(clearInterval(T),T=null),B.value=0)},Te=e=>{E.value=e},H=[];return We(async()=>{await ne(),J(),document.addEventListener("click",ie),H.push(N.onMessageReceived(e=>{var s,g,n,o,D,_,d,A,l,m;if(String(e.conversationId||e.conversation_id)!==h.value)return;const t=String(e.id||((s=e.message)==null?void 0:s.id)||Date.now());se(t)||(p.value.push({id:t,content:((g=e.message)==null?void 0:g.content)||e.content||((n=e.message)==null?void 0:n.image_url)||e.imageUrl||"",contentType:((o=e.message)==null?void 0:o.content_type)||e.contentType||"text",senderId:String(((D=e.message)==null?void 0:D.sender_id)||e.senderId||e.sender_id),createdAt:((_=e.message)==null?void 0:_.created_at)||e.createdAt||new Date().toISOString(),isRecalled:(d=e.message)==null?void 0:d.is_recalled,imageUrl:((A=e.message)==null?void 0:A.image_url)||e.imageUrl,fileUrl:((l=e.message)==null?void 0:l.file_url)||e.fileUrl}),String(((m=e.message)==null?void 0:m.sender_id)||e.senderId||e.sender_id)!==String(w.userId)&&pe(h.value).catch(()=>{}),J())})),H.push(N.onRecall(e=>{String(e.conversationId)===h.value&&(p.value=p.value.map(t=>t.id===String(e.messageId)?{...t,isRecalled:!0}:t))})),H.push(N.onBlacklist(e=>{(String(e.targetUserId)===w.userId||String(e.userId)===v.value.id)&&(U.value=e.action==="added")})),H.push(N.onUserTyping(e=>{if(String(e.conversationId)!==h.value)return;const t=new Set(q.value);e.isTyping&&e.fromUserId!==w.userId?t.add(String(e.fromUserId)):t.delete(String(e.fromUserId)),q.value=t,z&&window.clearTimeout(z),z=window.setTimeout(()=>{q.value=new Set},3e3)}))}),ze(()=>I.params.id,async(e,t)=>{e&&e!==t&&await ne()}),Ae(()=>{document.removeEventListener("click",ie),H.forEach(e=>e())}),(e,t)=>(i(),r("div",Ge,[a("div",Je,[a("button",{onClick:me,class:"p-2 -ml-2"},[...t[7]||(t[7]=[a("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),a("div",Xe,[a("img",{src:v.value.avatar||"https://placehold.co/48x48",alt:v.value.name,class:"w-10 h-10 rounded-full object-cover"},null,8,Qe),U.value?k("",!0):(i(),r("div",{key:0,class:b(["absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white",v.value.isOnline?"bg-green-500":"bg-gray-400"])},null,2))]),a("div",Ye,[a("h2",Ze,C(v.value.name||"å¯¹æ–¹"),1),a("p",et,[U.value?(i(),r("span",tt,"å·²è¢«å¯¹æ–¹æ‹‰é»‘")):(i(),r("span",{key:1,class:b(v.value.isOnline?"text-green-600":"text-gray-500")},C(v.value.isOnline?"åœ¨çº¿":"ç¦»çº¿"),3))])]),W.value?(i(),r("div",st,[a("span",nt,"å‰©ä½™ "+C(y.value??0)+" / 3",1)])):k("",!0),a("button",{onClick:ke,class:"p-2 text-gray-500 hover:text-red-500",title:"æ¸…ç©ºå¯¹è¯"},[...t[8]||(t[8]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),F.value?(i(),r("div",at,C(F.value),1)):U.value?(i(),r("div",lt," å¯¹æ–¹å·²å°†ä½ æ‹‰é»‘ï¼Œæ— æ³•å‘é€æ¶ˆæ¯ ")):W.value?(i(),r("div",ot," æœªäº’å…³ï¼Œä»…å¯å†å‘é€ "+C(y.value??0)+" æ¡æ¶ˆæ¯ ",1)):k("",!0),a("div",{ref_key:"messagesContainer",ref:K,class:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",onScroll:be},[Q.value?(i(),r("div",rt,"åŠ è½½ä¸­...")):p.value.length?k("",!0):(i(),r("div",it,[...t[9]||(t[9]=[a("svg",{class:"w-20 h-20 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),a("p",{class:"text-gray-400 text-center mb-2"},"æš‚æ—¶æ²¡æœ‰æ¶ˆæ¯",-1),a("p",{class:"text-gray-400 text-sm text-center"},"å¼€å§‹ä½ ä»¬çš„ç¬¬ä¸€æ¬¡å¯¹è¯å§ï½",-1)])])),(i(!0),r(de,null,ve(p.value,s=>(i(),r("div",{key:s.id,class:b(["flex",s.senderId===L(w).userId?"justify-end":"justify-start"])},[a("div",{class:b(["flex",s.senderId===L(w).userId?"flex-row-reverse":"flex-row","items-end space-x-2"])},[s.senderId!==L(w).userId?(i(),r("img",{key:0,src:v.value.avatar||"https://placehold.co/48x48",alt:v.value.name,class:"w-8 h-8 rounded-full object-cover flex-shrink-0"},null,8,ct)):k("",!0),a("div",{class:b(["max-w-[70%]",s.senderId===L(w).userId?"mr-2":"ml-2"])},[s.contentType==="text"&&!s.isRecalled?(i(),r("div",{key:0,class:b(["px-4 py-2 rounded-2xl",s.senderId===L(w).userId?"bg-teal-500 text-white rounded-br-sm":"bg-white text-gray-800 rounded-bl-sm"])},[a("p",ut,C(s.content),1)],2)):s.contentType==="image"&&!s.isRecalled?(i(),r("div",dt,[a("img",{src:s.imageUrl||s.content,alt:"å›¾ç‰‡",class:"max-w-full h-auto cursor-pointer",onClick:g=>Te(s.imageUrl||s.content)},null,8,vt)])):(i(),r("div",gt,"æ¶ˆæ¯å·²æ’¤å›")),a("div",pt,[a("div",ft,[a("span",null,C(Ce(new Date(s.createdAt))),1),s.senderId===L(w).userId&&!s.isRecalled?(i(),r("button",{key:0,class:"hover:text-red-500 ml-3",onClick:g=>we(s.id)}," æ’¤å› ",8,ht)):s.isRecalled?k("",!0):(i(),r("button",{key:1,class:"hover:text-amber-600 ml-3",onClick:g=>ye(s.id)}," ä¸¾æŠ¥ ",8,mt))])])],2)],2)],2))),128)),q.value.size>0?(i(),r("div",xt,"å¯¹æ–¹æ­£åœ¨è¾“å…¥...")):k("",!0)],544),a("div",wt,[S.value?(i(),r("div",{key:0,class:"mb-3 p-3 bg-gray-50 rounded-2xl grid grid-cols-8 gap-2 max-h-48 overflow-y-auto",onClick:t[0]||(t[0]=R(()=>{},["stop"]))},[(i(),r(de,null,ve(he,s=>a("button",{key:s,onClick:g=>Ue(s),class:"text-2xl hover:scale-125 transition-transform"},C(s),9,yt)),64))])):k("",!0),a("div",kt,[a("button",{onMousedown:ce,onMouseup:Z,onMouseleave:ue,onTouchstart:R(ce,["prevent"]),onTouchend:R(Z,["prevent"]),onTouchcancel:R(ue,["prevent"]),class:b(["p-2.5 rounded-full transition-all duration-200 flex-shrink-0",M.value?"bg-red-500 text-white scale-110":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[...t[10]||(t[10]=[a("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"}),a("path",{d:"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})],-1)])],34),a("div",_t,[Le(a("textarea",{ref_key:"textInput",ref:$,"onUpdate:modelValue":t[1]||(t[1]=s=>j.value=s),placeholder:"è¾“å…¥æ¶ˆæ¯...",rows:"1",class:"flex-1 bg-transparent px-3 py-2.5 focus:outline-none resize-none max-h-32 overflow-y-auto text-sm",onInput:re,onKeydown:t[2]||(t[2]=Ee(R(s=>Y(),["exact","prevent"]),["enter"])),onFocus:t[3]||(t[3]=s=>S.value=!1)},null,544),[[$e,j.value]]),a("button",{onClick:R(Se,["stop"]),class:b(["p-2 transition-colors flex-shrink-0",S.value?"text-teal-500":"text-gray-600"])},[...t[11]||(t[11]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],2),a("button",{onClick:Me,class:"p-2 text-gray-600 hover:text-teal-500 transition-colors flex-shrink-0"},[...t[12]||(t[12]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]),a("input",{ref_key:"imageInput",ref:ee,type:"file",accept:"image/*",class:"hidden",onChange:xe},null,544)]),a("button",{onClick:t[4]||(t[4]=s=>Y()),disabled:ae.value,class:b(["p-2.5 rounded-full transition-all duration-200 flex-shrink-0",ae.value?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-teal-500 text-white hover:bg-teal-600"])},[...t[13]||(t[13]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],10,bt)]),M.value?(i(),r("div",Ct,[a("div",It,[t[14]||(t[14]=a("div",{class:"w-2 h-2 bg-red-500 rounded-full animate-pulse"},null,-1)),a("span",Mt,"æ­£åœ¨å½•éŸ³ "+C(B.value)+'"',1)]),t[15]||(t[15]=a("p",{class:"text-xs text-gray-500 mt-2"},"æ¾å¼€å‘é€ï¼Œæ»‘å‡ºå–æ¶ˆ",-1))])):k("",!0)]),E.value?(i(),r("div",{key:3,onClick:t[6]||(t[6]=s=>E.value=null),class:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4"},[a("img",{src:E.value,alt:"é¢„è§ˆ",class:"max-w-full max-h-full object-contain"},null,8,Ut),a("button",{onClick:t[5]||(t[5]=R(s=>E.value=null,["stop"])),class:"absolute top-4 right-4 p-2 bg-white/20 rounded-full text-white"},[...t[16]||(t[16]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):k("",!0)]))}});export{Rt as default};
