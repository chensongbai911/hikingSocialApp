import{r as $,k as Y,l as Z,v as n,q as r,z as t,x as m,A as d,G as j,O as G,P as R,y as E,E as rt,J as ct,d as D,N as H,s as dt,K as N,S as W}from"./vue-Eb8ZdQV1.js";import{u as ut}from"./activity-DGmHCpy2.js";import{d as vt,s as pt}from"./state-WzMdx_T8.js";import{a as I,t as w,_ as Q,u as gt}from"./index-BAE1sWos.js";import"./activity-CBna8Trh.js";const ft=async p=>I.post("/applications",p),xt=async p=>I.get("/applications/my",{params:p}),mt=async(p,v)=>I.put(`/applications/${p}/review`,v),yt=async p=>I.get(`/activities/${p}/applications/pending`),ht=async p=>I.get(`/activities/${p}/participants`),X=vt("application",()=>{const p=$([]),v=$([]),y=$([]),g=$(0),f=$(!1),u=$(null);return{myApplications:p,pendingApplications:v,approvedParticipants:y,participantCount:g,loading:f,error:u,applyToActivity:async(x,i)=>{f.value=!0,u.value=null;try{const o=await ft({activity_id:x,message:i});if(o.code===200)return p.value.unshift(o.data),o.data;throw u.value=o.message,new Error(o.message)}catch(o){throw u.value=o.message||"ç”³è¯·å¤±è´¥",o}finally{f.value=!1}},fetchMyApplications:async x=>{f.value=!0,u.value=null;try{const i=await xt(x?{status:x}:void 0);i.code===200?p.value=i.data:u.value=i.message}catch(i){u.value=i.message||"è·å–ç”³è¯·åˆ—è¡¨å¤±è´¥"}finally{f.value=!1}},reviewApplication:async(x,i)=>{f.value=!0,u.value=null;try{const o=await mt(x,{action:i});if(o.code===200){const c=v.value.findIndex(C=>C.application_id===x);return c!==-1&&v.value.splice(c,1),o.data}else throw u.value=o.message,new Error(o.message)}catch(o){throw u.value=o.message||"å®¡æ ¸å¤±è´¥",o}finally{f.value=!1}},fetchPendingApplications:async x=>{f.value=!0,u.value=null;try{const i=await yt(x);i.code===200?v.value=i.data:u.value=i.message}catch(i){u.value=i.message||"è·å–å¾…å®¡æ ¸ç”³è¯·å¤±è´¥"}finally{f.value=!1}},fetchApprovedParticipants:async x=>{f.value=!0,u.value=null;try{const i=await ht(x);i.code===200?(y.value=i.data.participants,g.value=i.data.count):u.value=i.message}catch(i){u.value=i.message||"è·å–å‚ä¸è€…åˆ—è¡¨å¤±è´¥"}finally{f.value=!1}},clearApplications:()=>{p.value=[],v.value=[],y.value=[],g.value=0,u.value=null}}}),bt={class:"application-list"},wt={class:"header"},kt={class:"count"},_t={key:0,class:"loading"},$t={key:1,class:"applications"},Ct={class:"user-info"},At=["src","alt"],Mt={class:"info"},jt={class:"nickname"},zt={class:"meta"},Pt={class:"gender"},St={key:0,class:"age"},Bt={key:0,class:"message"},Dt={class:"message-content"},Tt={key:1,class:"bio"},Et={class:"bio-content"},It={class:"time"},Lt={class:"actions"},Ot=["disabled","onClick"],Ft={key:0},Vt={key:1},Jt=["disabled","onClick"],Ht={key:0},Nt={key:1},Gt={key:2,class:"empty"},Rt={key:3,class:"participants-section"},qt={class:"section-title"},Ut={class:"participants-list"},Wt=["src","alt"],Kt={class:"participant-name"},Yt=Y({__name:"ApplicationList",props:{activityId:{},showParticipants:{type:Boolean}},setup(p){const v=p,y=X(),{pendingApplications:g,approvedParticipants:f,participantCount:u,loading:k}=pt(y),h=$(null);Z(async()=>{await y.fetchPendingApplications(v.activityId),v.showParticipants&&await y.fetchApprovedParticipants(v.activityId)});const A=async i=>{try{h.value=i,await y.reviewApplication(i,"approve"),w.success("å·²é€šè¿‡ç”³è¯·"),v.showParticipants&&await y.fetchApprovedParticipants(v.activityId)}catch(o){w.error(o.message||"å®¡æ ¸å¤±è´¥")}finally{h.value=null}},M=async i=>{if(confirm("ç¡®å®šè¦æ‹’ç»æ­¤ç”³è¯·å—?"))try{h.value=i,await y.reviewApplication(i,"reject"),w.info("å·²æ‹’ç»ç”³è¯·")}catch(o){w.error(o.message||"å®¡æ ¸å¤±è´¥")}finally{h.value=null}},a=i=>{const o=new Date(i),C=new Date().getTime()-o.getTime(),z=Math.floor(C/6e4),P=Math.floor(C/36e5),S=Math.floor(C/864e5);return z<60?`${z}åˆ†é’Ÿå‰`:P<24?`${P}å°æ—¶å‰`:S<7?`${S}å¤©å‰`:o.toLocaleDateString("zh-CN")},B=i=>({beginner:"å…¥é—¨",intermediate:"è¿›é˜¶",advanced:"é«˜çº§",expert:"ä¸“å®¶"})[i||"beginner"]||"å…¥é—¨",x=i=>({male:"ç”·",female:"å¥³",other:"å…¶ä»–"})[i||""]||"";return(i,o)=>(r(),n("div",bt,[t("div",wt,[o[0]||(o[0]=t("h2",{class:"title"},"æŠ¥åç”³è¯·ç®¡ç†",-1)),t("span",kt,"å¾…å®¡æ ¸ "+d(j(g).length)+" äºº",1)]),j(k)?(r(),n("div",_t,[...o[1]||(o[1]=[t("div",{class:"spinner"},null,-1),t("span",null,"åŠ è½½ä¸­...",-1)])])):j(g).length>0?(r(),n("div",$t,[(r(!0),n(G,null,R(j(g),c=>{var C,z,P,S,L,O,F,V;return r(),n("div",{key:c.application_id,class:"application-card"},[t("div",Ct,[t("img",{src:((C=c.applicant)==null?void 0:C.avatar_url)||"/default-avatar.png",alt:(z=c.applicant)==null?void 0:z.nickname,class:"avatar"},null,8,At),t("div",Mt,[t("h3",jt,d((P=c.applicant)==null?void 0:P.nickname),1),t("div",zt,[t("span",{class:E(["level",`level-${(S=c.applicant)==null?void 0:S.hiking_level}`])},d(B((L=c.applicant)==null?void 0:L.hiking_level)),3),t("span",Pt,d(x((O=c.applicant)==null?void 0:O.gender)),1),(F=c.applicant)!=null&&F.age?(r(),n("span",St,d(c.applicant.age)+"å²",1)):m("",!0)])])]),c.message?(r(),n("div",Bt,[o[2]||(o[2]=t("p",{class:"message-label"},"ç”³è¯·ç•™è¨€:",-1)),t("p",Dt,d(c.message),1)])):m("",!0),(V=c.applicant)!=null&&V.bio?(r(),n("div",Tt,[t("p",Et,d(c.applicant.bio),1)])):m("",!0),t("div",It," ç”³è¯·æ—¶é—´: "+d(a(c.created_at)),1),t("div",Lt,[t("button",{class:"btn btn-approve",disabled:h.value===c.application_id,onClick:q=>A(c.application_id)},[h.value===c.application_id?(r(),n("span",Ft,"å¤„ç†ä¸­...")):(r(),n("span",Vt,"âœ“ é€šè¿‡"))],8,Ot),t("button",{class:"btn btn-reject",disabled:h.value===c.application_id,onClick:q=>M(c.application_id)},[h.value===c.application_id?(r(),n("span",Ht,"å¤„ç†ä¸­...")):(r(),n("span",Nt,"âœ— æ‹’ç»"))],8,Jt)])])}),128))])):(r(),n("div",Gt,[...o[3]||(o[3]=[t("div",{class:"empty-icon"},"ğŸ“‹",-1),t("p",null,"æš‚æ— å¾…å®¡æ ¸ç”³è¯·",-1)])])),p.showParticipants&&j(f).length>0?(r(),n("div",Rt,[t("h3",qt,"å·²é€šè¿‡æˆå‘˜ ("+d(j(u))+")",1),t("div",Ut,[(r(!0),n(G,null,R(j(f),c=>(r(),n("div",{key:c.id,class:"participant-item"},[t("img",{src:c.avatar_url||"/default-avatar.png",alt:c.nickname,class:"small-avatar"},null,8,Wt),t("span",Kt,d(c.nickname),1),t("span",{class:E(["participant-level",`level-${c.hiking_level}`])},d(B(c.hiking_level)),3)]))),128))])])):m("",!0)]))}}),Zt=Q(Yt,[["__scopeId","data-v-a4fc76f7"]]),Qt={class:"fixed inset-0 bg-white flex flex-col z-40"},Xt={class:"flex-1 overflow-y-auto"},te={class:"relative"},ee=["src","alt"],se={class:"absolute top-4 left-4"},ae={class:"absolute top-4 right-4"},ie={class:"bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold"},oe={class:"px-4 py-6 space-y-6"},le={class:"text-xl font-bold text-gray-900 mb-4"},ne={class:"bg-white rounded-2xl border border-gray-100 p-4"},re={class:"flex items-center mb-4"},ce={class:"ml-auto text-sm text-gray-500"},de={class:"grid grid-cols-2 gap-4 mb-4"},ue={class:"bg-gray-50 rounded-xl p-3"},ve={class:"text-2xl font-bold text-teal-500"},pe={class:"bg-gray-50 rounded-xl p-3"},ge={class:"text-2xl font-bold text-teal-500"},fe={class:"relative bg-gradient-to-b from-teal-50 to-white rounded-xl p-4 overflow-hidden"},xe=["viewBox"],me=["y1","y2"],ye=["d"],he=["d"],be=["cx","cy"],we=["x","y"],ke=["cx","cy"],_e=["x","y"],$e={class:"flex justify-between text-xs text-gray-400 mt-1"},Ce={class:"bg-white rounded-2xl border border-gray-100 p-4"},Ae={class:"bg-teal-50 rounded-xl p-4 mb-3"},Me={class:"flex items-center text-sm text-gray-700 mb-2"},je={class:"font-semibold"},ze={class:"text-sm text-gray-600 ml-6"},Pe={class:"flex items-start"},Se={class:"flex-1"},Be={class:"font-semibold text-gray-900 mb-1"},De={key:0,class:"bg-white rounded-2xl border border-gray-100 p-4"},Te={class:"text-sm text-gray-600 leading-relaxed"},Ee={key:1,class:"bg-white rounded-2xl border border-gray-100 p-4"},Ie={class:"flex items-center justify-between mb-4"},Le={class:"text-sm text-gray-500"},Oe={class:"flex -space-x-2"},Fe=["src","alt"],Ve={key:0,class:"w-10 h-10 rounded-full border-2 border-white bg-gray-200 flex items-center justify-center text-xs text-gray-600 font-semibold"},Je={class:"flex-shrink-0 bg-white border-t border-gray-100 p-4"},He={class:"flex items-center space-x-3"},Ne=["disabled"],Ge={class:"flex items-center justify-between p-4 border-b"},Re={class:"overflow-y-auto max-h-[calc(80vh-80px)]"},qe={class:"flex gap-3"},Ue={class:"flex gap-3"},T=500,_=120,We=Y({__name:"ActivityDetail",setup(p){const v=rt(),y=ct(),g=ut(),f=X(),u=gt(),k=$(!1),h=$(!1),A=$(!1),M=$(!1);D(()=>g.loading);const a=D(()=>{var b;const s=g.currentActivity;if(!s)return{id:0,title:"åŠ è½½ä¸­...",coverImage:"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800",status:"åŠ è½½ä¸­",difficulty:"0",distance:0,elevationGain:0,elevationLoss:0,maxElevation:0,minElevation:0,startTime:new Date().toISOString(),meetingPoint:"",description:"",participants:[],isJoined:!1,isOrganizer:!1,isFavorite:!1,isPending:!1,elevationData:[210,280,350,420,520,650,720,780,840,800,720,650,580,520,480,420,380,340,280,210]};let e="æ‹›å‹Ÿä¸­",l=!1;return s.status==="pending"?(e="å¾…å‘å¸ƒ",l=!0):s.status==="approved"||s.status==="recruiting"?e="æ‹›å‹Ÿä¸­":s.status==="ongoing"?e="è¿›è¡Œä¸­":s.status==="completed"?e="å·²ç»“æŸ":s.status==="cancelled"&&(e="å·²å–æ¶ˆ"),{id:parseInt(s.id),title:s.title,coverImage:s.cover_image_url||"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800",status:e,difficulty:s.difficulty||"easy",distance:s.distance||12.5,elevationGain:s.elevation_gain||642,elevationLoss:s.elevation_loss||638,maxElevation:s.max_elevation||840,minElevation:s.min_elevation||210,startTime:s.start_time,meetingPoint:s.location,description:s.description||"",participants:[],isJoined:s.is_joined||!1,isOrganizer:s.creator_id===((b=u.currentUser)==null?void 0:b.id),isFavorite:!1,isPending:l,elevationData:s.elevation_data||[210,280,350,420,520,650,720,780,840,800,720,650,580,520,480,420,380,340,280,210]}}),B=D(()=>{const s=a.value.elevationData,e=Math.max(...s),l=Math.min(...s),b=e-l;return`M ${s.map((K,U)=>{const lt=U/(s.length-1)*T,nt=_-(K-l)/b*(_-20)-10;return`${lt},${nt}`}).join(" L ")}`}),x=D(()=>`${B.value} L ${T},${_} L 0,${_} Z`),i=D(()=>{const s=a.value.elevationData,e=Math.max(...s),l=Math.min(...s),b=e-l;return{x:s.indexOf(e)/(s.length-1)*T,y:_-(e-l)/b*(_-20)-10}}),o=D(()=>{const s=a.value.elevationData,e=Math.max(...s),l=Math.min(...s),b=e-l;return{x:s.indexOf(l)/(s.length-1)*T,y:_-(l-l)/b*(_-20)-10}}),c=s=>{const e=new Date(s),l=e.getFullYear(),b=e.getMonth()+1,J=e.getDate(),U=["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"][e.getDay()];return`${l}-${b.toString().padStart(2,"0")}-${J.toString().padStart(2,"0")} (${U})`},C=s=>{const e=new Date(s),l=e.getHours().toString().padStart(2,"0"),b=e.getMinutes().toString().padStart(2,"0");return`${l}:${b}`},z=()=>{y.back()},P=()=>{k.value=!0},S=()=>{console.log("åˆ†äº«åˆ°å¾®ä¿¡"),k.value=!1},L=()=>{console.log("åˆ†äº«åˆ°æœ‹å‹åœˆ"),k.value=!1},O=()=>{const s=window.location.href;navigator.clipboard.writeText(s).then(()=>{w.success("é“¾æ¥å·²å¤åˆ¶"),k.value=!1})},F=()=>{console.log("ç”Ÿæˆåˆ†äº«å›¾ç‰‡"),k.value=!1},V=()=>{a.value.isFavorite=!a.value.isFavorite},q=()=>{y.push("/chat/organizer")},tt=async()=>{const s=v.params.id;if(a.value.isJoined)M.value=!0;else{const e=prompt("è¯·è¾“å…¥ç”³è¯·ç•™è¨€(å¯é€‰):");if(e===null)return;try{await f.applyToActivity(s,e||void 0),w.success("ç”³è¯·å·²æäº¤,è¯·ç­‰å¾…ç»„ç»‡è€…å®¡æ ¸"),await g.fetchActivityDetail(s)}catch(l){console.error("ç”³è¯·å¤±è´¥:",l),w.error("ç”³è¯·å¤±è´¥: "+(l.message||"è¯·é‡è¯•"))}}},et=async()=>{M.value=!1;const s=v.params.id;try{await g.leaveActivity(s)?(w.success("å·²å–æ¶ˆæŠ¥å"),await g.fetchActivityDetail(s)):w.error("å–æ¶ˆæŠ¥åå¤±è´¥: "+g.error)}catch(e){console.error("å–æ¶ˆæŠ¥åå¤±è´¥:",e),w.error("å–æ¶ˆæŠ¥åå¤±è´¥")}},st=()=>{h.value=!0},at=()=>{A.value=!0},it=async()=>{A.value=!1;const s=v.params.id;try{await g.updateActivity(s,{status:"recruiting"})?(w.success("æ´»åŠ¨å·²å‘å¸ƒï¼Œå¼€å§‹æ‹›å‹Ÿï¼"),await g.fetchActivityDetail(s)):w.error("å‘å¸ƒå¤±è´¥: "+g.error)}catch(e){console.error("å‘å¸ƒæ´»åŠ¨å¤±è´¥:",e),w.error("å‘å¸ƒæ´»åŠ¨å¤±è´¥")}},ot=()=>{const s=v.params.id;y.push(`/create-activity?id=${s}`)};return Z(async()=>{const s=v.params.id;try{await g.fetchActivityDetail(s),console.log("åŠ è½½æ´»åŠ¨è¯¦æƒ…æˆåŠŸ:",s)}catch(e){console.error("åŠ è½½æ´»åŠ¨è¯¦æƒ…å¤±è´¥:",e)}}),(s,e)=>(r(),n("div",Qt,[t("div",{class:"flex-shrink-0 bg-white border-b border-gray-100"},[t("div",{class:"flex items-center justify-between px-4 py-3"},[t("button",{onClick:z,class:"p-2 hover:bg-gray-100 rounded-full transition-colors"},[...e[12]||(e[12]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[14]||(e[14]=t("h1",{class:"text-lg font-semibold"},"æ´»åŠ¨è¯¦æƒ…",-1)),t("button",{onClick:P,class:"p-2 hover:bg-gray-100 rounded-full transition-colors"},[...e[13]||(e[13]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})],-1)])])])]),t("div",Xt,[t("div",te,[t("img",{src:a.value.coverImage,alt:a.value.title,class:"w-full h-64 object-cover"},null,8,ee),t("div",se,[t("span",{class:E(["px-3 py-1 rounded-full text-xs font-semibold text-white",a.value.status==="æ‹›å‹Ÿä¸­"?"bg-teal-500":a.value.status==="è¿›è¡Œä¸­"?"bg-orange-500":a.value.status==="å·²ç»“æŸ"?"bg-gray-400":"bg-teal-500"])},d(a.value.status),3)]),t("div",ae,[t("span",ie," éš¾åº¦ "+d(a.value.difficulty),1)])]),t("div",oe,[t("div",null,[t("h2",le,d(a.value.title),1)]),t("div",ne,[t("div",re,[e[15]||(e[15]=t("svg",{class:"w-5 h-5 text-teal-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1)),e[16]||(e[16]=t("span",{class:"font-semibold text-gray-900"},"è·¯çº¿è¯¦æƒ…",-1)),t("span",ce,"å…¨ç¨‹ "+d(a.value.distance)+"km",1)]),t("div",de,[t("div",ue,[e[18]||(e[18]=t("div",{class:"flex items-center text-gray-500 text-xs mb-1"},[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),H(" ç´¯è®¡çˆ¬å‡ ")],-1)),t("div",ve,[H(d(a.value.elevationGain),1),e[17]||(e[17]=t("span",{class:"text-sm text-gray-400 ml-1"},"m",-1))])]),t("div",pe,[e[20]||(e[20]=t("div",{class:"flex items-center text-gray-500 text-xs mb-1"},[t("svg",{class:"w-4 h-4 mr-1 rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),H(" ç´¯è®¡ä¸‹é™ ")],-1)),t("div",ge,[H(d(a.value.elevationLoss),1),e[19]||(e[19]=t("span",{class:"text-sm text-gray-400 ml-1"},"m",-1))])])]),t("div",fe,[e[23]||(e[23]=t("div",{class:"flex items-center justify-between mb-2"},[t("span",{class:"text-xs text-gray-500"},"æµ·æ‹” (m)"),t("span",{class:"text-xs text-teal-500 font-semibold"},"â— æ›²çº¿")],-1)),(r(),n("svg",{viewBox:`0 0 ${T} ${_}`,class:"w-full h-32"},[(r(),n(G,null,R(4,l=>t("line",{key:"grid-"+l,x1:0,y1:l*_/4,x2:T,y2:l*_/4,stroke:"#e5e7eb","stroke-width":"0.5"},null,8,me)),64)),t("path",{d:x.value,fill:"url(#gradient)",opacity:"0.3"},null,8,ye),t("path",{d:B.value,stroke:"#14b8a6","stroke-width":"2",fill:"none"},null,8,he),t("circle",{cx:i.value.x,cy:i.value.y,r:"4",fill:"#14b8a6"},null,8,be),t("text",{x:i.value.x,y:i.value.y-10,"text-anchor":"middle","font-size":"10",fill:"#14b8a6","font-weight":"bold"}," Max "+d(a.value.maxElevation)+"m ",9,we),t("circle",{cx:o.value.x,cy:o.value.y,r:"4",fill:"#94a3b8"},null,8,ke),t("text",{x:o.value.x,y:o.value.y+20,"text-anchor":"middle","font-size":"10",fill:"#64748b","font-weight":"bold"}," Min "+d(a.value.minElevation)+"m ",9,_e),e[21]||(e[21]=t("defs",null,[t("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[t("stop",{offset:"0%",style:{"stop-color":"#14b8a6","stop-opacity":"0.5"}}),t("stop",{offset:"100%",style:{"stop-color":"#14b8a6","stop-opacity":"0.05"}})])],-1))],8,xe)),t("div",$e,[e[22]||(e[22]=t("span",null,"0km",-1)),t("span",null,d((a.value.distance/3).toFixed(1))+"km",1),t("span",null,d((a.value.distance/3*2).toFixed(1))+"km",1),t("span",null,d(a.value.distance)+"km",1)])])]),t("div",Ce,[e[27]||(e[27]=t("div",{class:"flex items-center mb-4"},[t("svg",{class:"w-5 h-5 text-teal-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),t("span",{class:"font-semibold text-gray-900"},"æ—¥ç¨‹å®‰æ’")],-1)),t("div",Ae,[t("div",Me,[e[24]||(e[24]=t("svg",{class:"w-4 h-4 mr-2 text-teal-500",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"})],-1)),t("span",je,d(c(a.value.startTime)),1)]),t("div",ze,d(C(a.value.startTime))+" å‡†æ—¶å‡ºå‘ ",1)]),t("div",Pe,[e[26]||(e[26]=t("svg",{class:"w-5 h-5 text-teal-500 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})],-1)),t("div",Se,[t("div",Be,d(a.value.meetingPoint),1),e[25]||(e[25]=t("div",{class:"text-sm text-gray-500"},"è¯·è‡ªè¡Œå‰å¾€é›†åˆåœ°ç‚¹",-1))])])]),a.value.description?(r(),n("div",De,[e[28]||(e[28]=t("h3",{class:"font-semibold text-gray-900 mb-3"},"æ´»åŠ¨ç®€ä»‹",-1)),t("p",Te,d(a.value.description),1)])):m("",!0),a.value.participants&&a.value.participants.length>0?(r(),n("div",Ee,[t("div",Ie,[e[29]||(e[29]=t("h3",{class:"font-semibold text-gray-900"},"å‚ä¸è€…",-1)),t("span",Le,d(a.value.participants.length)+"äººå·²æŠ¥å",1)]),t("div",Oe,[(r(!0),n(G,null,R(a.value.participants.slice(0,5),(l,b)=>(r(),n("img",{key:b,src:l.avatar,alt:l.name,class:"w-10 h-10 rounded-full border-2 border-white object-cover"},null,8,Fe))),128)),a.value.participants.length>5?(r(),n("div",Ve," +"+d(a.value.participants.length-5),1)):m("",!0)])])):m("",!0)])]),t("div",Je,[t("div",He,[a.value.isPending?m("",!0):(r(),n("button",{key:0,onClick:V,class:E(["p-3 rounded-full border transition-all",a.value.isFavorite?"border-red-500 bg-red-50":"border-gray-300 hover:border-gray-400"])},[(r(),n("svg",{class:E(["w-6 h-6",a.value.isFavorite?"text-red-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 24 24"},[...e[30]||(e[30]=[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},null,-1)])],2))],2)),!a.value.isOrganizer&&!a.value.isPending?(r(),n("button",{key:1,onClick:q,class:"p-3 rounded-full border border-gray-300 hover:border-gray-400 transition-all"},[...e[31]||(e[31]=[t("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)])])):m("",!0),a.value.isOrganizer&&!a.value.isPending?(r(),n("button",{key:2,onClick:st,class:"p-3 rounded-full border border-orange-300 hover:border-orange-400 bg-orange-50 transition-all"},[...e[32]||(e[32]=[t("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1)])])):m("",!0),a.value.isPending&&a.value.isOrganizer?(r(),n("button",{key:3,onClick:at,class:"flex-1 py-3 rounded-full font-semibold text-white transition-all bg-teal-500 hover:bg-teal-600"}," å‘å¸ƒæ´»åŠ¨ ")):a.value.isOrganizer?a.value.isOrganizer&&!a.value.isPending?(r(),n("button",{key:5,onClick:ot,class:"flex-1 py-3 rounded-full font-semibold text-white transition-all bg-teal-500 hover:bg-teal-600"}," ç¼–è¾‘æ´»åŠ¨ ")):m("",!0):(r(),n("button",{key:4,onClick:tt,disabled:a.value.status==="å·²ç»“æŸ",class:E(["flex-1 py-3 rounded-full font-semibold text-white transition-all",a.value.isJoined?"bg-gray-400 hover:bg-gray-500":a.value.status==="å·²ç»“æŸ"?"bg-gray-300 cursor-not-allowed":"bg-teal-500 hover:bg-teal-600"])},d(a.value.isJoined?"å·²æŠ¥å":a.value.status==="å·²ç»“æŸ"?"æ´»åŠ¨å·²ç»“æŸ":"ç«‹å³æŠ¥å"),11,Ne))])]),h.value?(r(),n("div",{key:0,onClick:e[2]||(e[2]=l=>h.value=!1),class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},[t("div",{onClick:e[1]||(e[1]=N(()=>{},["stop"])),class:"bg-white rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden"},[t("div",Ge,[e[34]||(e[34]=t("h3",{class:"text-lg font-semibold"},"ç”³è¯·ç®¡ç†",-1)),t("button",{onClick:e[0]||(e[0]=l=>h.value=!1),class:"p-2 hover:bg-gray-100 rounded-full"},[...e[33]||(e[33]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Re,[dt(Zt,{"activity-id":String(j(v).params.id),"show-participants":!0},null,8,["activity-id"])])])])):m("",!0),k.value?(r(),n("div",{key:1,onClick:e[5]||(e[5]=l=>k.value=!1),class:"fixed inset-0 bg-black/50 flex items-end justify-center z-50"},[t("div",{onClick:e[4]||(e[4]=N(()=>{},["stop"])),class:"bg-white rounded-t-3xl w-full p-6 animate-slide-up"},[e[39]||(e[39]=t("h3",{class:"text-lg font-semibold text-center mb-6"},"åˆ†äº«æ´»åŠ¨",-1)),t("div",{class:"grid grid-cols-4 gap-6 mb-6"},[t("button",{onClick:S,class:"flex flex-col items-center space-y-2"},[...e[35]||(e[35]=[t("div",{class:"w-14 h-14 rounded-full bg-green-500 flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M8.5 5C4.9 5 2 7.5 2 10.6c0 1.8 1 3.5 2.6 4.5l-.6 2 2.2-1.1c.8.2 1.6.3 2.4.3 3.6 0 6.5-2.5 6.5-5.6S12.1 5 8.5 5zM7 11.5c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1zm3 0c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z"})])],-1),t("span",{class:"text-xs text-gray-600"},"å¾®ä¿¡",-1)])]),t("button",{onClick:L,class:"flex flex-col items-center space-y-2"},[...e[36]||(e[36]=[W('<div class="w-14 h-14 rounded-full bg-green-600 flex items-center justify-center" data-v-d401c25a><svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24" data-v-d401c25a><circle cx="12" cy="12" r="2" data-v-d401c25a></circle><circle cx="6" cy="6" r="2" data-v-d401c25a></circle><circle cx="18" cy="6" r="2" data-v-d401c25a></circle><circle cx="6" cy="18" r="2" data-v-d401c25a></circle><circle cx="18" cy="18" r="2" data-v-d401c25a></circle></svg></div><span class="text-xs text-gray-600" data-v-d401c25a>æœ‹å‹åœˆ</span>',2)])]),t("button",{onClick:O,class:"flex flex-col items-center space-y-2"},[...e[37]||(e[37]=[t("div",{class:"w-14 h-14 rounded-full bg-gray-200 flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})])],-1),t("span",{class:"text-xs text-gray-600"},"å¤åˆ¶é“¾æ¥",-1)])]),t("button",{onClick:F,class:"flex flex-col items-center space-y-2"},[...e[38]||(e[38]=[t("div",{class:"w-14 h-14 rounded-full bg-purple-500 flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),t("span",{class:"text-xs text-gray-600"},"ç”Ÿæˆå›¾ç‰‡",-1)])])]),t("button",{onClick:e[3]||(e[3]=l=>k.value=!1),class:"w-full py-3 bg-gray-100 rounded-full text-gray-700 font-semibold"}," å–æ¶ˆ ")])])):m("",!0),A.value?(r(),n("div",{key:2,onClick:e[8]||(e[8]=l=>A.value=!1),class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},[t("div",{onClick:e[7]||(e[7]=N(()=>{},["stop"])),class:"bg-white rounded-3xl w-full max-w-sm p-6 animate-scale-in"},[e[40]||(e[40]=W('<div class="text-center mb-6" data-v-d401c25a><div class="w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-d401c25a><svg class="w-8 h-8 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d401c25a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-d401c25a></path></svg></div><h3 class="text-xl font-bold text-gray-900 mb-2" data-v-d401c25a>ç¡®è®¤å‘å¸ƒæ´»åŠ¨ï¼Ÿ</h3><p class="text-gray-600 text-sm" data-v-d401c25a>å‘å¸ƒåå°†å¼€å§‹æ‹›å‹Ÿå‚ä¸è€…ï¼Œå…¶ä»–ç”¨æˆ·å¯ä»¥çœ‹åˆ°å¹¶æŠ¥åå‚åŠ æ­¤æ´»åŠ¨ã€‚</p></div>',1)),t("div",qe,[t("button",{onClick:e[6]||(e[6]=l=>A.value=!1),class:"flex-1 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition"}," å–æ¶ˆ "),t("button",{onClick:it,class:"flex-1 py-3 rounded-xl bg-teal-500 text-white font-semibold hover:bg-teal-600 transition"}," ç¡®è®¤å‘å¸ƒ ")])])])):m("",!0),M.value?(r(),n("div",{key:3,onClick:e[11]||(e[11]=l=>M.value=!1),class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},[t("div",{onClick:e[10]||(e[10]=N(()=>{},["stop"])),class:"bg-white rounded-3xl w-full max-w-sm p-6 animate-scale-in"},[e[41]||(e[41]=W('<div class="text-center mb-6" data-v-d401c25a><div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-d401c25a><svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d401c25a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-d401c25a></path></svg></div><h3 class="text-xl font-bold text-gray-900 mb-2" data-v-d401c25a>ç¡®è®¤å–æ¶ˆæŠ¥åï¼Ÿ</h3><p class="text-gray-600 text-sm" data-v-d401c25a>å–æ¶ˆåéœ€è¦é‡æ–°ç”³è¯·æ‰èƒ½å‚åŠ æ­¤æ´»åŠ¨ã€‚</p></div>',1)),t("div",Ue,[t("button",{onClick:e[9]||(e[9]=l=>M.value=!1),class:"flex-1 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition"}," æˆ‘å†æƒ³æƒ³ "),t("button",{onClick:et,class:"flex-1 py-3 rounded-xl bg-orange-500 text-white font-semibold hover:bg-orange-600 transition"}," ç¡®è®¤å–æ¶ˆ ")])])])):m("",!0)]))}}),ts=Q(We,[["__scopeId","data-v-d401c25a"]]);export{ts as default};
