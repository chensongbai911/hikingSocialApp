# 真实地图功能测试清单

## ✅ 配置完成

- [x] 高德地图 API Key 已配置
- [x] 安全密钥已配置
- [x] index.html 已引入高德地图 JS API
- [x] MapPicker 组件已创建
- [x] CreateActivity.vue 已集成 MapPicker
- [x] 无编译错误

## 🧪 功能测试步骤

### 1. 启动开发服务器

```bash
cd frontend
npm run dev
```

### 2. 测试地图加载

- [ ] 访问创建活动页面 `http://localhost:5173/create`
- [ ] 点击"集合地点"卡片
- [ ] 地图选择器全屏打开
- [ ] 地图正常显示（有高德地图底图）
- [ ] 中心点标记（红色标记）显示

### 3. 测试地图交互

- [ ] 拖动地图，地图可以平移
- [ ] 双指缩放（或鼠标滚轮），地图可以缩放
- [ ] 地图移动后，底部信息卡片自动更新地址

### 4. 测试搜索功能

- [ ] 点击顶部搜索框
- [ ] 输入地点名称（如"天安门"）
- [ ] 搜索结果列表显示
- [ ] 点击搜索结果
- [ ] 地图自动移动到选中位置
- [ ] 底部信息卡片更新为选中地点信息

### 5. 测试定位功能

- [ ] 点击右下角定位按钮（圆形按钮）
- [ ] 浏览器提示授权定位（首次使用）
- [ ] 授权后，地图移动到当前位置
- [ ] 底部信息卡片显示当前位置信息

### 6. 测试位置确认

- [ ] 选择一个位置后，底部显示地点名称和地址
- [ ] 点击"确认位置"按钮
- [ ] 地图选择器关闭
- [ ] 返回创建活动表单
- [ ] "集合地点"和"详细地址"自动填充

### 7. 测试返回功能

- [ ] 打开地图选择器
- [ ] 点击左上角返回按钮
- [ ] 地图选择器关闭
- [ ] 表单数据未改变

## 🐛 常见问题排查

### 地图不显示

1. 打开浏览器控制台（F12）
2. 查看 Console 是否有错误
3. 检查 Network 标签，看高德地图 API 是否加载成功
4. 确认 API Key 配置正确

### 定位失败

1. 确认浏览器支持定位（需要 HTTPS 或 localhost）
2. 检查浏览器定位权限是否授权
3. 查看控制台错误信息

### 搜索无结果

1. 确认网络连接正常
2. 确认 API Key 权限包含搜索服务
3. 尝试搜索更具体的地点名称

## 📊 预期效果

### 地图界面

- 全屏白色背景
- 顶部：返回按钮 + 标题 + 搜索框
- 中间：高德地图 + 中心标记
- 右下角：定位按钮
- 底部：位置信息卡片 + 确认按钮

### 交互流畅度

- 地图拖动：流畅无卡顿
- 搜索响应：输入后 300ms 延迟搜索
- 地址更新：地图停止移动后自动更新
- 位置确认：点击后立即关闭并更新表单

## 🎯 核心功能验证

| 功能     | 状态      | 备注         |
| -------- | --------- | ------------ |
| 地图显示 | ⏳ 待测试 | 高德地图 2.0 |
| 地图交互 | ⏳ 待测试 | 拖动、缩放   |
| 搜索地点 | ⏳ 待测试 | 实时搜索     |
| 获取定位 | ⏳ 待测试 | 浏览器定位   |
| 地理编码 | ⏳ 待测试 | 坐标转地址   |
| 位置确认 | ⏳ 待测试 | 数据回传     |

## 📝 测试后更新

测试完成后，将 ⏳ 更新为：

- ✅ 通过
- ❌ 失败（附上错误信息）
